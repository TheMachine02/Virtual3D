    1 00:0000 -  -  -  -  #include	"vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
    1 00:0000 -  -  -  -  #define dbgbreak   scf \ sbc hl, hl \ ld (hl), 2
    2 00:0000 -  -  -  -  #define dbgstart0 	push hl \ ld hl,$F20030 \ set 0,(hl) \ pop hl
    3 00:0000 -  -  -  -  #define dbgstop0	push hl \ ld hl,$F20030 \ res 0,(hl) \ pop hl
    4 00:0000 -  -  -  -  
    5 00:0000 -  -  -  -   ; Virtual-3D library, version 1.0
    6 00:0000 -  -  -  -   ;
    7 00:0000 -  -  -  -   ; Copyright (c) 2016-2017, 'TheMachine02'
    8 00:0000 -  -  -  -   ; All rights reserved.
    9 00:0000 -  -  -  -   ;
   10 00:0000 -  -  -  -   ; Redistribution and use in source and binary forms, with or without
   11 00:0000 -  -  -  -   ; modification, are permitted provided that the following conditions are met:
   12 00:0000 -  -  -  -   ;
   13 00:0000 -  -  -  -   ; ; Redistributions of source code must retain the above copyright notice, this
   14 00:0000 -  -  -  -   ; list of conditions and the following disclaimer.
   15 00:0000 -  -  -  -   ;
   16 00:0000 -  -  -  -   ; ; Redistributions in binary form must reproduce the above copyright notice,
   17 00:0000 -  -  -  -   ; this list of conditions and the following disclaimer in the documentation
   18 00:0000 -  -  -  -   ; and/or other materials provided with the distribution.
   19 00:0000 -  -  -  -   ;
   20 00:0000 -  -  -  -   ; THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
   21 00:0000 -  -  -  -   ; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   22 00:0000 -  -  -  -   ; IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   23 00:0000 -  -  -  -   ; DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
   24 00:0000 -  -  -  -   ; FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   25 00:0000 -  -  -  -   ; DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
   26 00:0000 -  -  -  -   ; SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
   27 00:0000 -  -  -  -   ; CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
   28 00:0000 -  -  -  -   ; OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
   29 00:0000 -  -  -  -   ; OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   30 00:0000 -  -  -  -   ; ;
   31 00:0000 -  -  -  -  
   32 00:0000 -  -  -  -  #ifndef VX_3D_GUARD
   33 00:0000 -  -  -  -  #define VX_3D_GUARD
   34 00:0000 -  -  -  -  
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
   39 00:0000 -  -  -  -  #include "relocate.inc"
Listing for file "include\\relocate.inc"
    1 00:0000 -  -  -  -  #macro relocate(new_location)
    2 00:0000              #ifdef old_location
    3 00:0000                .echo "Error: You cannot nest relocate blocks."
    4 00:0000              #else
    5 00:0000                #define old_location eval($)
    6 00:0000                .org new_location
    7 00:0000                #define g_location eval(new_location)
    8 00:0000              #endif
    9 00:0000             #endmacro
   10 00:0000 -  -  -  -  #define .relocate relocate(
   11 00:0000 -  -  -  -  
   12 00:0000 -  -  -  -  #macro endrelocate()
   13 00:0000              #ifdef g_location
   14 00:0000                .org $-g_location + old_location
   15 00:0000                #undefine g_location
   16 00:0000                #undefine old_location
   17 00:0000              #else
   18 00:0000                .echo "Error : No relocate statements corresponds to this endrelocate."
   19 00:0000              #endif
   20 00:0000             #endmacro
   21 00:0000 -  -  -  -  #define .endrelocate endrelocate(
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
  178 00:0000 -  -  -  -  
  179 00:0000 -  -  -  -  ; global compilation variable ;
  180 00:0000 -  -  -  -  
  181 00:0000 -  -  -  -  #define	VX_PS_1.0
  182 00:0000 -  -  -  -  #define	VX_VS_1.x
  183 00:0000 -  -  -  -  .echo "vxLib API version 1.0"
  184 00:0000 -  -  -  -  .echo "pixel shader version  : ps_1.0"
  185 00:0000 -  -  -  -  ; ps_1.0
  186 00:0000 -  -  -  -  .echo "vertex shader version : vs_1.x"
  187 00:0000 -  -  -  -  
  188 00:0000 -  -  -  -  .addinstr  ldi	(de),a 1312 2 NOP 0
  189 00:0000 -  -  -  -  .addinstr  xori a,(de) 13EBAEEB 4 NOP 0
  190 00:0000 -  -  -  -  .addinstr  andi a,(de) 13EBA6EB 4 NOP 0
  191 00:0000 -  -  -  -  .addinstr  ori	a,(de) 13EBB6EB 4 NOP 0
  192 00:0000 -  -  -  -  
  193 00:0000 -  -  -  -  #endif
Listing for file "example1.ez80"
    2 00:0000 -  -  -  -  
    3 00:0000 -  -  -  -  #define	DELTA	4096
    4 00:0000 -  -  -  -  
    5 00:0000 -  -  -  -  .org userMem - 2
    6 D1:A87F EF 7B -  -  .db tExtTok, tAsm84CeCmp
    7 D1:A881 -  -  -  -  .assume ADL=1
    8 D1:A881 -  -  -  -  
    9 D1:A881 -  -  -  -  ; init the virtual 3d library
   10 D1:A881 CD 6F 01 D2 	call	vxEngineInit
   11 D1:A885 D8 -  -  -  	ret	c		; qui if error at init
   12 D1:A886 -  -  -  -  
   13 D1:A886 21 06 0A D2 	ld	hl, VertexName
   14 D1:A88A CD 67 C4 D1 	call	vxFindFile
   15 D1:A88E D8 -  -  -  	ret	c
   16 D1:A88F 22 0E 0A D2 	ld	(Vertex), hl
   17 D1:A893 -  -  -  -  
   18 D1:A893 21 11 0A D2 	ld	hl, TriangleName
   19 D1:A897 CD 67 C4 D1 	call	vxFindFile
   20 D1:A89B D8 -  -  -  	ret	c
   21 D1:A89C 22 19 0A D2 	ld	(Triangle), hl
   22 D1:A8A0 -  -  -  -  
   23 D1:A8A0 -  -  -  -  
   24 D1:A8A0 -  -  -  -  ; setup global variable for rendering, euler angle and the translation of WorldMatrix
   25 D1:A8A0 -  -  -  -  
   26 D1:A8A0 21 00 00 00 	ld	hl, 0
   27 D1:A8A4 22 6D 0A D2 	ld	(EulerAngle), hl
   28 D1:A8A8 -  -  -  -  
   29 D1:A8A8 DD 21 4C 0A 
              D2 -  -  -  	ld	ix, WorldMatrix
   30 D1:A8AD ED 22 00 -  	lea	hl, ix+0
   31 D1:A8B0 CD 25 AC D1 	call	vxMatrixLoadIdentity
   32 D1:A8B4 21 00 00 01 	ld	hl, 65536
   33 D1:A8B8 DD 2F 0F -  	ld	(ix+15), hl		; Z translation of the matrix
   34 D1:A8BB -  -  -  -  
   35 D1:A8BB -  -  -  -  MainLoop:
   36 D1:A8BB -  -  -  -  
   37 D1:A8BB CD 0C AA D1 	call	vxTimerStart
   38 D1:A8BF -  -  -  -  
   39 D1:A8BF 2A 6D 0A D2 	ld	hl, (EulerAngle)
   40 D1:A8C3 FD 21 2E 0A 
              D2 -  -  -  	ld	iy, Quaternion
   41 D1:A8C8 DD 21 25 0A 
              D2 -  -  -  	ld	ix, UnitVector
   42 D1:A8CD CD 1C B1 D1 	call	vxQuaternionRotationAxis
   43 D1:A8D1 DD 21 4C 0A 
              D2 -  -  -  	ld	ix, WorldMatrix
   44 D1:A8D6 CD 6E B0 D1 	call	vxQuaternionGetMatrix
   45 D1:A8DA ED 55 00 -  	lea	iy, ix+0
   46 D1:A8DD DD 21 1C 0A 
              D2 -  -  -  	ld	ix, ScaleMatrix
   47 D1:A8E2 21 4C 0A D2 	ld	hl, WorldMatrix
   48 D1:A8E6 CD BB AC D1 	call	vxMatrixMlt
   49 D1:A8EA -  -  -  -  
   50 D1:A8EA 3E 0A -  -  	ld	a, VX_GEOMETRY_CI9
   51 D1:A8EC DD 21 4C 0A 
              D2 -  -  -  	ld	ix, WorldMatrix
   52 D1:A8F1 FD 21 5E 0A 
              D2 -  -  -  	ld	iy, ModelMatrix
   53 D1:A8F6 01 00 80 D0 	ld	bc, VX_VERTEX_BUFFER
   54 D1:A8FA 2A 0E 0A D2 	ld	hl, (Vertex)
   55 D1:A8FE ED 5B 19 0A 
              D2 -  -  -  	ld	de, (Triangle)
   56 D1:A903 CD F0 BF D1 	call	vxCmdDraw
   57 D1:A907 -  -  -  -  
   58 D1:A907 2A 89 BD D1 	ld	hl, (vxGeometrySize)
   59 D1:A90B 22 72 A9 D1 	ld	(triangle_count), hl
   60 D1:A90F -  -  -  -  
   61 D1:A90F CD 8F C1 D1 	call	vxCmdDepthSort
   62 D1:A913 -  -  -  -  
   63 D1:A913 0E 00 -  -  	ld	c, %00000000
   64 D1:A915 CD A1 B3 D1 	call	vxClearBuffer
   65 D1:A919 CD 00 BF D1 	call	vxCmdExecute
   66 D1:A91D -  -  -  -  
   67 D1:A91D -  -  -  -  ; timer & counter
   68 D1:A91D -  -  -  -  
   69 D1:A91D 01 FF 09 00 	ld	bc, 320*8-1
   70 D1:A921 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
   71 D1:A926 B7 -  -  -  	or	a, a
   72 D1:A927 ED 62 -  -  	sbc	hl, hl
   73 D1:A929 19 -  -  -  	add	hl, de
   74 D1:A92A 13 -  -  -  	inc	de
   75 D1:A92B 36 00 -  -  	ld	(hl), 0
   76 D1:A92D ED B0 -  -  	ldir
   77 D1:A92F -  -  -  -  
   78 D1:A92F 21 00 00 00 	ld	hl, 0
   79 D1:A933 22 91 02 D2 	ld	(TextXPos_SMC), hl
   80 D1:A937 3E 00 -  -  	ld	a, 0
   81 D1:A939 32 9F 02 D2 	ld	(TextYPos_SMC), a
   82 D1:A93D -  -  -  -  
   83 D1:A93D CD 2A AA D1 	call	vxTimerRead
   84 D1:A941 -  -  -  -  ; do (ade/256)/187
   85 D1:A941 ED 53 00 0A 
              D2 -  -  -  	ld	(Temp), de
   86 D1:A946 32 03 0A D2 	ld	(Temp+3), a
   87 D1:A94A ED 5B 01 0A 
              D2 -  -  -  	ld	de, (Temp+1)
   88 D1:A94F -  -  -  -  ; divide de by 187
   89 D1:A94F EB -  -  -  	ex	de, hl
   90 D1:A950 01 BB 00 00 	ld	bc, 187
   91 D1:A954 CD 99 04 D2 	call	__idivs_ASM
   92 D1:A958 11 04 00 00 	ld	de, 4
   93 D1:A95C D5 -  -  -  	push	de
   94 D1:A95D E5 -  -  -  	push	hl
   95 D1:A95E CD 1A 03 D2 	call	_PrintUInt
   96 D1:A962 D1 -  -  -  	pop	de
   97 D1:A963 E1 -  -  -  	pop	hl
   98 D1:A964 -  -  -  -  
   99 D1:A964 2A 91 02 D2 	ld	hl, (TextXPos_SMC)
  100 D1:A968 11 08 00 00 	ld	de, 8
  101 D1:A96C 19 -  -  -  	add	hl, de
  102 D1:A96D 22 91 02 D2 	ld	(TextXPos_SMC), hl
  103 D1:A971 -  -  -  -  
  104 D1:A971 -  -  -  -  triangle_count=$+1
  105 D1:A971 21 00 00 00 	ld	hl, 0
  106 D1:A975 11 04 00 00 	ld	de, 4
  107 D1:A979 D5 -  -  -  	push	de
  108 D1:A97A E5 -  -  -  	push	hl
  109 D1:A97B CD 1A 03 D2 	call	_PrintUInt
  110 D1:A97F D1 -  -  -  	pop	de
  111 D1:A980 E1 -  -  -  	pop	hl
  112 D1:A981 -  -  -  -  
  113 D1:A981 CD B3 B3 D1 	call	vxFlushLCD
  114 D1:A985 -  -  -  -  
  115 D1:A985 -  -  -  -  KeyboardTest:
  116 D1:A985 21 00 00 F5 	ld hl,$F50000
  117 D1:A989 36 02 -  -  	ld (hl),2
  118 D1:A98B AF -  -  -  	xor a,a
  119 D1:A98C -  -  -  -  kwait:
  120 D1:A98C BE -  -  -  	cp a,(hl)
  121 D1:A98D 20 FD -  -  	jr nz,kwait
  122 D1:A98F -  -  -  -  
  123 D1:A98F 11 08 00 00 	ld	de, 8
  124 D1:A993 3A 1E 00 F5 	ld	a, ($F5001E)
  125 D1:A997 CB 4F -  -  	bit	1, a
  126 D1:A999 28 09 -  -  	jr	z, _kskip
  127 D1:A99B 2A 6D 0A D2 	ld	hl, (EulerAngle)
  128 D1:A99F 19 -  -  -  	add	hl, de
  129 D1:A9A0 22 6D 0A D2 	ld	(EulerAngle), hl
  130 D1:A9A4 -  -  -  -  _kskip:
  131 D1:A9A4 11 F8 FF FF 	ld	de, -8
  132 D1:A9A8 3A 1E 00 F5 	ld	a, ($F5001E)
  133 D1:A9AC CB 57 -  -  	bit	2, a
  134 D1:A9AE 28 09 -  -  	jr	z, _kskip2
  135 D1:A9B0 2A 6D 0A D2 	ld	hl, (EulerAngle)
  136 D1:A9B4 19 -  -  -  	add	hl, de
  137 D1:A9B5 22 6D 0A D2 	ld	(EulerAngle), hl
  138 D1:A9B9 -  -  -  -  _kskip2:
  139 D1:A9B9 3A 1E 00 F5 	ld	a, ($F5001E)
  140 D1:A9BD CB 47 -  -  	bit	0, a
  141 D1:A9BF 28 0D -  -  	jr	z, _kskip5
  142 D1:A9C1 2A 58 0A D2 	ld	hl, (WorldMatrix+12)
  143 D1:A9C5 11 00 10 00 	ld	de, DELTA
  144 D1:A9C9 19 -  -  -  	add	hl, de
  145 D1:A9CA 22 58 0A D2 	ld	(WorldMatrix+12), hl
  146 D1:A9CE -  -  -  -  _kskip5:
  147 D1:A9CE -  -  -  -  
  148 D1:A9CE 3A 1E 00 F5 	ld	a, ($F5001E)
  149 D1:A9D2 CB 5F -  -  	bit	3, a
  150 D1:A9D4 28 0D -  -  	jr	z, _kskip6
  151 D1:A9D6 2A 58 0A D2 	ld	hl, (WorldMatrix+12)
  152 D1:A9DA 11 00 F0 FF 	ld	de, -DELTA
  153 D1:A9DE 19 -  -  -  	add	hl, de
  154 D1:A9DF 22 58 0A D2 	ld	(WorldMatrix+12), hl
  155 D1:A9E3 -  -  -  -  _kskip6:
  156 D1:A9E3 -  -  -  -  
  157 D1:A9E3 2A 5B 0A D2 	ld	hl, (WorldMatrix+15)
  158 D1:A9E7 -  -  -  -  
  159 D1:A9E7 3A 12 00 F5 	ld	a, ($F50012)
  160 D1:A9EB CB 47 -  -  	bit	0,a
  161 D1:A9ED 28 05 -  -  	jr	z, _kskip3
  162 D1:A9EF 11 00 10 00 	ld	de, DELTA
  163 D1:A9F3 19 -  -  -  	add	hl, de
  164 D1:A9F4 -  -  -  -  _kskip3:
  165 D1:A9F4 -  -  -  -  
  166 D1:A9F4 CB 67 -  -  	bit	4,a
  167 D1:A9F6 28 05 -  -  	jr	z, _kskip4
  168 D1:A9F8 11 00 F0 FF 	ld	de, -DELTA
  169 D1:A9FC 19 -  -  -  	add	hl, de
  170 D1:A9FD -  -  -  -  _kskip4:
  171 D1:A9FD -  -  -  -  
  172 D1:A9FD 22 5B 0A D2 	ld	(WorldMatrix+15), hl
  173 D1:AA01 -  -  -  -  
  174 D1:AA01 3A 1C 00 F5 	ld a,($F5001C)
  175 D1:AA05 CB 77 -  -  	bit 6,a
  176 D1:AA07 -  -  -  -  
  177 D1:AA07 CA BB A8 D1 	jp	z, MainLoop
  178 D1:AA0B C9 -  -  -  	ret
  179 D1:AA0C -  -  -  -  
  180 D1:AA0C -  -  -  -  #include	"vxMain.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    1 D1:AA0C -  -  -  -  #include	"vxTimer.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxTimer.ez80"
    1 D1:AA0C -  -  -  -  #define	VX_TIMER_CTRL	$F20030
    2 D1:AA0C -  -  -  -  #define	VX_TIMER_COUNT	$F20000
    3 D1:AA0C -  -  -  -  
    4 D1:AA0C -  -  -  -  vxTimerStart:
    5 D1:AA0C -  -  -  -  ; now intialise and start the timer (1)
    6 D1:AA0C 21 30 00 F2 	ld	hl, VX_TIMER_CTRL
    7 D1:AA10 7E -  -  -  	ld	a, (hl)
    8 D1:AA11 -  -  -  -  ; CPU clock, not enable, count up
    9 D1:AA11 E6 F8 -  -  	and	%11111000
   10 D1:AA13 77 -  -  -  	ld	(hl), a
   11 D1:AA14 2C -  -  -  	inc	l
   12 D1:AA15 CB CE -  -  	set	1, (hl)
   13 D1:AA17 -  -  -  -  ; reset the value
   14 D1:AA17 AF -  -  -  	xor	a, a
   15 D1:AA18 21 00 00 F2 	ld	hl, VX_TIMER_COUNT
   16 D1:AA1C 77 -  -  -  	ld	(hl), a
   17 D1:AA1D 2C -  -  -  	inc	l
   18 D1:AA1E 77 -  -  -  	ld	(hl), a
   19 D1:AA1F 2C -  -  -  	inc	l
   20 D1:AA20 77 -  -  -  	ld	(hl), a
   21 D1:AA21 2C -  -  -  	inc	l
   22 D1:AA22 77 -  -  -  	ld	(hl), a
   23 D1:AA23 21 30 00 F2 	ld	hl, VX_TIMER_CTRL
   24 D1:AA27 -  -  -  -  ; start timer
   25 D1:AA27 CB C6 -  -  	set	0, (hl)
   26 D1:AA29 C9 -  -  -  	ret
   27 D1:AA2A -  -  -  -  vxTimerRead:
   28 D1:AA2A 21 30 00 F2 	ld	hl, VX_TIMER_CTRL
   29 D1:AA2E -  -  -  -  ; stop the timer
   30 D1:AA2E CB 86 -  -  	res	0, (hl)
   31 D1:AA30 -  -  -  -  ; read 24 bits value in the counter register
   32 D1:AA30 21 00 00 F2 	ld	hl, VX_TIMER_COUNT
   33 D1:AA34 ED 17 -  -  	ld	de, (hl)
   34 D1:AA36 23 23 23 -  	inc	hl \ inc hl \ inc hl
   35 D1:AA39 7E -  -  -  	ld	a, (hl)
   36 D1:AA3A -  -  -  -  ; full 32bits value is now ade
   37 D1:AA3A C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    2 D1:AA3B -  -  -  -  #include	"vxRaster.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxRaster.ez80"
    1 D1:AA3B -  -  -  -  
    2 D1:AA3B -  -  -  -  
    3 D1:AA3B -  -  -  -  vxRasterPixel:
    4 D1:AA3B 5E -  -  -  	ld	e, (hl)
    5 D1:AA3C 23 -  -  -  	inc	hl
    6 D1:AA3D ED 27 -  -  	ld	hl, (hl)
    7 D1:AA3F -  -  -  -  vxRasterPixelEntry:
    8 D1:AA3F -  -  -  -  ; input : hl :x , [d]e : y, c : color
    9 D1:AA3F -  -  -  -  ; output : none
   10 D1:AA3F -  -  -  -  ; destroyed : hl, de
   11 D1:AA3F 16 A0 -  -  	ld	d, 160	; [8]
   12 D1:AA41 ED 5C -  -  	mlt	de		; [12]
   13 D1:AA43 EB -  -  -  	ex	de, hl	; [4]
   14 D1:AA44 29 -  -  -  	add	hl, hl	; [4]
   15 D1:AA45 19 -  -  -  	add	hl, de	; [4]
   16 D1:AA46 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)	; [32]
   17 D1:AA4B 19 -  -  -  	add	hl, de	; [4]
   18 D1:AA4C 71 -  -  -  	ld	(hl), c	; [6]
   19 D1:AA4D C9 -  -  -  	ret			; [x]
   20 D1:AA4E -  -  -  -  
   21 D1:AA4E -  -  -  -  vxFlatPolygon:
   22 D1:AA4E D6 02 -  -  	sub	a, 2
   23 D1:AA50 47 -  -  -  	ld	b, a
   24 D1:AA51 FD 27 00 -  	ld	hl, (iy+0)
   25 D1:AA54 -  -  -  -  vxFlatCyclicLoop:
   26 D1:AA54 C5 -  -  -  	push	bc
   27 D1:AA55 FD 17 03 -  	ld	de, (iy+3)
   28 D1:AA58 FD 07 06 -  	ld	bc, (iy+6)
   29 D1:AA5B E5 -  -  -  	push	hl
   30 D1:AA5C FD E5 -  -  	push	iy
   31 D1:AA5E E5 -  -  -  	push	hl
   32 D1:AA5F C5 -  -  -  	push	bc
   33 D1:AA60 D5 -  -  -  	push	de
   34 D1:AA61 CD 37 BD D1 	call	vxNClip
   35 D1:AA65 D1 -  -  -  	pop	de
   36 D1:AA66 C1 -  -  -  	pop	bc
   37 D1:AA67 E1 -  -  -  	pop	hl
   38 D1:AA68 DC 8A AA D1 	call	c,vxFlatTriangleNoClip
   39 D1:AA6C FD E1 -  -  	pop	iy
   40 D1:AA6E ED 33 03 -  	lea	iy, iy+3
   41 D1:AA71 E1 -  -  -  	pop	hl
   42 D1:AA72 C1 -  -  -  	pop	bc
   43 D1:AA73 05 -  -  -  	dec	b
   44 D1:AA74 C2 54 AA D1 	jp	nz, vxFlatCyclicLoop
   45 D1:AA78 C9 -  -  -  	ret
   46 D1:AA79 -  -  -  -  
   47 D1:AA79 -  -  -  -  vxFlatTriangle:
   48 D1:AA79 32 F7 AB D1     ld	(IRasterRBG8), a
   49 D1:AA7D -  -  -  -  
   50 D1:AA7D 0A -  -  -  	ld	a, (bc)
   51 D1:AA7E B6 -  -  -  	or	(hl)
   52 D1:AA7F EB -  -  -  	ex	de, hl
   53 D1:AA80 B6 -  -  -  	or	(hl)
   54 D1:AA81 FD 21 4E AA 
              D1 -  -  -  	ld	iy, vxFlatPolygon
   55 D1:AA86 C2 CB B5 D1 	jp	nz, vxClipTriangle
   56 D1:AA8A -  -  -  -  vxFlatTriangleNoClip:
   57 D1:AA8A 23 13 03 -  	inc	hl \ inc de \ inc bc
   58 D1:AA8D -  -  -  -  	
   59 D1:AA8D 1A -  -  -      ld	a, (de)
   60 D1:AA8E 96 -  -  -      sub	a, (hl)
   61 D1:AA8F 38 01 -  -      jr	c, IRasterSwap0
   62 D1:AA91 EB -  -  -      ex	de, hl
   63 D1:AA92 -  -  -  -  IRasterSwap0:
   64 D1:AA92 0A -  -  -      ld	a, (bc)
   65 D1:AA93 96 -  -  -      sub	a, (hl)
   66 D1:AA94 30 06 -  -      jr	nc, IRasterSwap1
   67 D1:AA96 E5 -  -  -      push	hl
   68 D1:AA97 B7 -  -  -      or	a, a
   69 D1:AA98 ED 62 -  -      sbc	hl, hl
   70 D1:AA9A 09 -  -  -      add	hl, bc
   71 D1:AA9B C1 -  -  -      pop	bc
   72 D1:AA9C -  -  -  -  IRasterSwap1:
   73 D1:AA9C 1A -  -  -      ld	a, (de)
   74 D1:AA9D 96 -  -  -      sub	a, (hl)
   75 D1:AA9E 30 01 -  -      jr	nc, IRasterSwap2
   76 D1:AAA0 EB -  -  -      ex	de, hl
   77 D1:AAA1 -  -  -  -  IRasterSwap2:
   78 D1:AAA1 -  -  -  -  
   79 D1:AAA1 0A -  -  -      ld	a, (bc)
   80 D1:AAA2 96 -  -  -      sub	(hl)
   81 D1:AAA3 C8 -  -  -      ret	z
   82 D1:AAA4 -  -  -  -  
   83 D1:AAA4 DD 21 00 00 
              FF -  -  -      ld	ix, $FF0000
   84 D1:AAA9 FD 21 00 00 
              FF -  -  -      ld	iy, $FF0000
   85 D1:AAAE DD 6F -  -      ld	ixl, a
   86 D1:AAB0 ED 44 -  -      neg
   87 D1:AAB2 32 A7 AB D1     ld	(IDeltaY0), a
   88 D1:AAB6 -  -  -  -  ; x1-x0
   89 D1:AAB6 1A -  -  -      ld	a, (de)
   90 D1:AAB7 32 8E AB D1     ld	(IValueY1), a
   91 D1:AABB 96 -  -  -      sub	(hl)
   92 D1:AABC F5 -  -  -      push	af
   93 D1:AABD FD 6F -  -      ld	iyl, a
   94 D1:AABF ED 44 -  -      neg
   95 D1:AAC1 32 B8 AB D1     ld	(IDeltaY1), a
   96 D1:AAC5 -  -  -  -  
   97 D1:AAC5 7E -  -  -      ld	a, (hl)
   98 D1:AAC6 F5 -  -  -      push	af
   99 D1:AAC7 -  -  -  -  
  100 D1:AAC7 C5 -  -  -      push	bc
  101 D1:AAC8 23 -  -  -      inc	hl
  102 D1:AAC9 ED 07 -  -      ld	bc, (hl)
  103 D1:AACB EB -  -  -      ex	de, hl
  104 D1:AACC 23 -  -  -      inc	hl
  105 D1:AACD ED 27 -  -      ld	hl, (hl)
  106 D1:AACF 22 5F AB D1     ld	(IValueX1), hl
  107 D1:AAD3 28 29 -  -      jr	z, IRasterNoEdgeWrite
  108 D1:AAD5 3E 13 -  -      ld	a, $13
  109 D1:AAD7 B7 -  -  -      or	a, a
  110 D1:AAD8 ED 42 -  -      sbc	hl, bc
  111 D1:AADA 30 07 -  -      jr	nc, IRasterEdge1
  112 D1:AADC F6 08 -  -      or	a, $08
  113 D1:AADE EB -  -  -      ex	de, hl
  114 D1:AADF ED 62 -  -      sbc	hl, hl
  115 D1:AAE1 ED 52 -  -      sbc	hl, de
  116 D1:AAE3 -  -  -  -  IRasterEdge1:
  117 D1:AAE3 22 B0 AB D1     ld	(IDeltaX1), hl
  118 D1:AAE7 32 BB AB D1     ld	(ISMC_Code1), a
  119 D1:AAEB -  -  -  -  
  120 D1:AAEB ED 13 00 -      lea	de, iy+0
  121 D1:AAEE 19 -  -  -      add	hl, de
  122 D1:AAEF EB -  -  -      ex	de, hl
  123 D1:AAF0 ED 62 -  -      sbc	hl, hl
  124 D1:AAF2 3F -  -  -      ccf
  125 D1:AAF3 ED 52 -  -      sbc	hl, de
  126 D1:AAF5 CB 2C -  -      sra	h
  127 D1:AAF7 CB 1D -  -      rr	l
  128 D1:AAF9 EB -  -  -      ex	de, hl
  129 D1:AAFA FD 62 -  -      ld	iyh, d
  130 D1:AAFC FD 6B -  -      ld	iyl, e
  131 D1:AAFE -  -  -  -  
  132 D1:AAFE -  -  -  -  IRasterNoEdgeWrite:
  133 D1:AAFE E1 -  -  -      pop	hl
  134 D1:AAFF -  -  -  -  
  135 D1:AAFF -  -  -  -  ; x2-x0
  136 D1:AAFF 23 -  -  -      inc	hl
  137 D1:AB00 ED 27 -  -      ld	hl, (hl)
  138 D1:AB02 22 5B AB D1     ld	(IValueX2), hl
  139 D1:AB06 3E 23 -  -      ld	a, $23			; inc hl
  140 D1:AB08 B7 -  -  -      or	a, a
  141 D1:AB09 ED 42 -  -      sbc	hl, bc
  142 D1:AB0B -  -  -  -  ; if x0>x1, edge goes to left
  143 D1:AB0B 30 07 -  -      jr	nc, IRasterEdge0
  144 D1:AB0D F6 08 -  -      or	a, $08			; dec hl
  145 D1:AB0F -  -  -  -  ; edge goes to left
  146 D1:AB0F EB -  -  -      ex	de, hl
  147 D1:AB10 ED 62 -  -      sbc	hl, hl
  148 D1:AB12 ED 52 -  -      sbc	hl, de
  149 D1:AB14 -  -  -  -  IRasterEdge0:
  150 D1:AB14 22 9F AB D1     ld	(IDeltaX0), hl
  151 D1:AB18 32 AA AB D1     ld	(ISMC_Code0), a
  152 D1:AB1C -  -  -  -  
  153 D1:AB1C ED 12 00 -      lea	de, ix+0
  154 D1:AB1F 19 -  -  -      add	hl, de
  155 D1:AB20 EB -  -  -      ex	de, hl
  156 D1:AB21 ED 62 -  -      sbc	hl, hl
  157 D1:AB23 3F -  -  -      ccf
  158 D1:AB24 ED 52 -  -      sbc	hl, de
  159 D1:AB26 CB 2C -  -      sra	h
  160 D1:AB28 CB 1D -  -      rr	l
  161 D1:AB2A EB -  -  -      ex	de, hl
  162 D1:AB2B DD 62 -  -      ld	ixh, d
  163 D1:AB2D DD 6B -  -      ld	ixl, e
  164 D1:AB2F -  -  -  -  
  165 D1:AB2F E1 -  -  -  	pop	hl
  166 D1:AB30 2E A0 -  -  	ld	l, 160
  167 D1:AB32 ED 6C -  -  	mlt	hl
  168 D1:AB34 29 -  -  -  	add	hl, hl
  169 D1:AB35 09 -  -  -  	add	hl, bc
  170 D1:AB36 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
  171 D1:AB3B 19 -  -  -  	add	hl, de
  172 D1:AB3C EB -  -  -  	ex	de, hl
  173 D1:AB3D ED 62 -  -  	sbc	hl, hl
  174 D1:AB3F 19 -  -  -  	add	hl, de
  175 D1:AB40 -  -  -  -  
  176 D1:AB40 F1 -  -  -  	pop	af
  177 D1:AB41 C4 9E AB D1 	call	nz, IRasterTriangleInner
  178 D1:AB45 -  -  -  -  
  179 D1:AB45 3A A7 AB D1 	ld	a, (IDeltaY0) ; y2-y0
  180 D1:AB49 4F -  -  -  	ld	c, a
  181 D1:AB4A 3A B8 AB D1 	ld	a, (IDeltaY1)
  182 D1:AB4E 91 -  -  -  	sub	c
  183 D1:AB4F C8 -  -  -  	ret	z
  184 D1:AB50 F5 -  -  -  	push	af
  185 D1:AB51 FD 6F -  -  	ld	iyl, a
  186 D1:AB53 ED 44 -  -  	neg
  187 D1:AB55 32 B8 AB D1 	ld	(IDeltaY1), a
  188 D1:AB59 -  -  -  -  
  189 D1:AB59 E5 -  -  -  	push	hl
  190 D1:AB5A -  -  -  -  
  191 D1:AB5A -  -  -  -  IValueX2=$+1
  192 D1:AB5A 21 00 00 00 	ld	hl, $000000
  193 D1:AB5E -  -  -  -  IValueX1=$+1
  194 D1:AB5E 01 00 00 00 	ld	bc, $000000
  195 D1:AB62 B7 -  -  -  	or	a, a
  196 D1:AB63 ED 42 -  -  	sbc	hl, bc
  197 D1:AB65 3E 13 -  -  	ld	a, $13
  198 D1:AB67 -  -  -  -  ; if x0>x1, edge goes to left
  199 D1:AB67 30 07 -  -  	jr	nc, IRasterEdge2
  200 D1:AB69 F6 08 -  -  	or	a, $08
  201 D1:AB6B EB -  -  -  	ex	de, hl
  202 D1:AB6C ED 62 -  -  	sbc	hl, hl
  203 D1:AB6E ED 52 -  -  	sbc	hl, de
  204 D1:AB70 -  -  -  -  IRasterEdge2:
  205 D1:AB70 22 B0 AB D1 	ld	(IDeltaX1), hl
  206 D1:AB74 32 BB AB D1 	ld	(ISMC_Code1), a
  207 D1:AB78 -  -  -  -  
  208 D1:AB78 ED 13 00 -  	lea	de, iy+0
  209 D1:AB7B 16 00 -  -  	ld	d, $00 ;compensate due to previous looping
  210 D1:AB7D 19 -  -  -  	add	hl, de
  211 D1:AB7E EB -  -  -  	ex	de, hl
  212 D1:AB7F ED 62 -  -  	sbc	hl, hl
  213 D1:AB81 3F -  -  -  	ccf
  214 D1:AB82 ED 52 -  -  	sbc	hl, de
  215 D1:AB84 CB 2C -  -  	sra	h
  216 D1:AB86 CB 1D -  -  	rr	l
  217 D1:AB88 EB -  -  -  	ex	de, hl
  218 D1:AB89 FD 62 -  -  	ld	iyh, d
  219 D1:AB8B FD 6B -  -  	ld	iyl, e
  220 D1:AB8D -  -  -  -  
  221 D1:AB8D -  -  -  -  IValueY1=$+1
  222 D1:AB8D 2E 00 -  -  	ld	l, $00
  223 D1:AB8F 26 A0 -  -  	ld	h, 160
  224 D1:AB91 ED 6C -  -  	mlt	hl
  225 D1:AB93 29 -  -  -  	add	hl, hl
  226 D1:AB94 09 -  -  -  	add	hl, bc
  227 D1:AB95 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
  228 D1:AB9A 19 -  -  -  	add	hl, de
  229 D1:AB9B EB -  -  -  	ex	de, hl
  230 D1:AB9C E1 -  -  -  	pop	hl
  231 D1:AB9D -  -  -  -  
  232 D1:AB9D -  -  -  -  ;	ld	a, (IDeltaY1)
  233 D1:AB9D -  -  -  -  ;	neg
  234 D1:AB9D F1 -  -  -  	pop	af
  235 D1:AB9E -  -  -  -  IRasterTriangleInner:
  236 D1:AB9E -  -  -  -  IDeltaX0=$+1
  237 D1:AB9E 01 00 00 00 	ld	bc, $000000
  238 D1:ABA2 DD 09 -  -  	add	ix, bc
  239 D1:ABA4 30 09 -  -  	jr	nc, $+11
  240 D1:ABA6 -  -  -  -  IDeltaY0=$+1
  241 D1:ABA6 01 00 FF FF 	ld	bc, $FFFF00
  242 D1:ABAA -  -  -  -  ISMC_Code0=$
  243 D1:ABAA 00 -  -  -  	nop
  244 D1:ABAB DD 09 -  -  	add	ix, bc
  245 D1:ABAD 38 FB -  -  	jr	c, $-3
  246 D1:ABAF -  -  -  -  
  247 D1:ABAF -  -  -  -  IDeltaX1=$+1
  248 D1:ABAF 01 00 00 00 	ld	bc, $000000
  249 D1:ABB3 FD 09 -  -  	add	iy, bc
  250 D1:ABB5 30 0B -  -  	jr	nc, $+13
  251 D1:ABB7 -  -  -  -  IDeltaY1=$+1
  252 D1:ABB7 01 00 FF FF 	ld	bc, $FFFF00
  253 D1:ABBB -  -  -  -  ISMC_Code1=$
  254 D1:ABBB 00 -  -  -  	nop
  255 D1:ABBC FD 09 -  -  	add	iy, bc
  256 D1:ABBE 38 FB -  -  	jr	c, $-3
  257 D1:ABC0 52 03 -  -  	inc.s	bc ;reset bcu set by restoring ld bc,$FFxxxx
  258 D1:ABC2 -  -  -  -  
  259 D1:ABC2 -  -  -  -  ; hl = adress1, de = adress2
  260 D1:ABC2 ED 52 -  -  	sbc	hl, de
  261 D1:ABC4 38 2F -  -  	jr	c, IRasterInverted
  262 D1:ABC6 28 21 -  -  	jr	z, IRasterNoPixel
  263 D1:ABC8 44 -  -  -  	ld	b, h
  264 D1:ABC9 4D -  -  -  	ld	c, l
  265 D1:ABCA -  -  -  -  
  266 D1:ABCA 21 F7 AB D1 	ld	hl, IRasterRBG8
  267 D1:ABCE ED A0 -  -  	ldi
  268 D1:ABD0 E2 E6 AB D1 	jp	po, IRasterContinue
  269 D1:ABD4 37 -  -  -  	scf
  270 D1:ABD5 ED 62 -  -  	sbc	hl, hl
  271 D1:ABD7 19 -  -  -  	add	hl, de
  272 D1:ABD8 E5 -  -  -  	push	hl
  273 D1:ABD9 ED B0 -  -  	ldir
  274 D1:ABDB E1 -  -  -  	pop	hl
  275 D1:ABDC -  -  -  -  
  276 D1:ABDC 0E 40 -  -  	ld	c, 64
  277 D1:ABDE 04 -  -  -  	inc	b
  278 D1:ABDF 09 -  -  -  	add	hl, bc
  279 D1:ABE0 EB -  -  -  	ex	de, hl
  280 D1:ABE1 09 -  -  -  	add	hl, bc
  281 D1:ABE2 3D -  -  -  	dec	a
  282 D1:ABE3 20 B9 -  -  	jr	nz,IRasterTriangleInner
  283 D1:ABE5 C9 -  -  -  	ret
  284 D1:ABE6 -  -  -  -  IRasterContinue:
  285 D1:ABE6 37 -  -  -  	scf
  286 D1:ABE7 ED 62 -  -  	sbc	hl, hl
  287 D1:ABE9 -  -  -  -  IRasterNoPixel:
  288 D1:ABE9 19 -  -  -  	add	hl, de
  289 D1:ABEA 01 40 01 00 	ld	bc, 320
  290 D1:ABEE 09 -  -  -  	add	hl, bc
  291 D1:ABEF EB -  -  -  	ex	de, hl
  292 D1:ABF0 09 -  -  -  	add	hl, bc
  293 D1:ABF1 3D -  -  -  	dec	a
  294 D1:ABF2 20 AA -  -  	jr	nz,IRasterTriangleInner
  295 D1:ABF4 C9 -  -  -  	ret
  296 D1:ABF5 -  -  -  -  IRasterInverted:
  297 D1:ABF5 19 -  -  -  	add	hl, de
  298 D1:ABF6 -  -  -  -  ; hl --- de
  299 D1:ABF6 -  -  -  -  IRasterRBG8=$+1
  300 D1:ABF6 36 00 -  -  	ld	(hl), $00
  301 D1:ABF8 EB -  -  -  	ex	de, hl
  302 D1:ABF9 -  -  -  -  ; carry is set
  303 D1:ABF9 ED 52 -  -  	sbc	hl, de
  304 D1:ABFB 44 -  -  -  	ld	b, h
  305 D1:ABFC 4D -  -  -  	ld	c, l
  306 D1:ABFD 19 -  -  -  	add	hl, de
  307 D1:ABFE 28 08 -  -  	jr	z, IRasterSize1
  308 D1:AC00 D5 -  -  -  	push	de
  309 D1:AC01 ED 62 -  -  	sbc	hl, hl
  310 D1:AC03 19 -  -  -  	add	hl, de
  311 D1:AC04 13 -  -  -  	inc	de
  312 D1:AC05 ED B0 -  -  	ldir
  313 D1:AC07 D1 -  -  -  	pop	de
  314 D1:AC08 -  -  -  -  IRasterSize1:
  315 D1:AC08 23 -  -  -  	inc	hl
  316 D1:AC09 -  -  -  -  
  317 D1:AC09 0E 40 -  -  	ld	c, 64
  318 D1:AC0B 04 -  -  -  	inc	b
  319 D1:AC0C 09 -  -  -  	add	hl, bc
  320 D1:AC0D EB -  -  -  	ex	de, hl
  321 D1:AC0E 09 -  -  -  	add	hl, bc
  322 D1:AC0F 3D -  -  -  	dec	a
  323 D1:AC10 20 8C -  -  	jr	nz, IRasterTriangleInner
  324 D1:AC12 C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    3 D1:AC13 -  -  -  -  #include	"vxMatrix.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
    1 D1:AC13 -  -  -  -  #define	VX_MATRIX_SIZE	18
    2 D1:AC13 -  -  -  -  
    3 D1:AC13 -  -  -  -  vxIdentityMatrix:
    4 D1:AC13 40 00 00 -  .db	64,0,0
    5 D1:AC16 00 40 00 -  .db	0,64,0
    6 D1:AC19 00 00 40 -  .db	0,0,64
    7 D1:AC1C 00 00 00 00 
              00 00 00 00 
              00 -  -  -  .dl	0,0,0
    8 D1:AC25 -  -  -  -  
    9 D1:AC25 -  -  -  -  vxMatrixLoadIdentity:
   10 D1:AC25 -  -  -  -  ; input : hl matrix
   11 D1:AC25 EB -  -  -  	ex	de, hl
   12 D1:AC26 21 13 AC D1 	ld	hl, vxIdentityMatrix
   13 D1:AC2A 01 12 00 00 	ld	bc, VX_MATRIX_SIZE
   14 D1:AC2E ED B0 -  -  	ldir
   15 D1:AC30 EB -  -  -  	ex	de, hl
   16 D1:AC31 01 EE FF FF 	ld	bc, -VX_MATRIX_SIZE
   17 D1:AC35 09 -  -  -  	add	hl, bc
   18 D1:AC36 C9 -  -  -  	ret
   19 D1:AC37 -  -  -  -  vxMatrixRotationX:
   20 D1:AC37 -  -  -  -  #comment
   21 D1:AC37             	ld	a, l
   22 D1:AC37             	ld	hl, ISIN_TABLE
   23 D1:AC37             	ld	l, a
   24 D1:AC37             	ld	a, (hl)
   25 D1:AC37             	ld	(ix+7), a
   26 D1:AC37             	neg
   27 D1:AC37             	ld	(ix+5), a
   28 D1:AC37             	ld	a, l
   29 D1:AC37             	add	a, 64
   30 D1:AC37             	ld	l, a
   31 D1:AC37             	ld	c, (hl)
   32 D1:AC37             	ld	(ix+4), c
   33 D1:AC37             	ld	(ix+8), c
   34 D1:AC37             	ld	a, 64
   35 D1:AC37             	ld	(ix+0), a
   36 D1:AC37             	xor	a, a
   37 D1:AC37             	ld	(ix+1), a
   38 D1:AC37             	ld	(ix+2), a
   39 D1:AC37             	ld	(ix+3), a
   40 D1:AC37             	ld	(ix+6), a
   41 D1:AC37             #endcomment
   42 D1:AC37 E5 -  -  -  	push	hl
   43 D1:AC38 CD A0 B1 D1 	call	vxSin
   44 D1:AC3C 7C -  -  -  	ld	a, h
   45 D1:AC3D DD 77 07 -  	ld	(ix+7), a
   46 D1:AC40 ED 44 -  -  	neg
   47 D1:AC42 DD 77 05 -  	ld	(ix+5), a
   48 D1:AC45 E1 -  -  -  	pop	hl
   49 D1:AC46 CD 9F B1 D1 	call	vxCos
   50 D1:AC4A DD 74 04 -  	ld	(ix+4), h
   51 D1:AC4D DD 74 08 -  	ld	(ix+8), h
   52 D1:AC50 3E 40 -  -  	ld	a, 64
   53 D1:AC52 DD 77 00 -  	ld	(ix+0), a
   54 D1:AC55 AF -  -  -  	xor	a, a
   55 D1:AC56 DD 77 01 -  	ld	(ix+1), a
   56 D1:AC59 DD 77 02 -  	ld	(ix+2), a
   57 D1:AC5C DD 77 03 -  	ld	(ix+3), a
   58 D1:AC5F DD 77 06 -  	ld	(ix+6), a
   59 D1:AC62 C9 -  -  -  	ret
   60 D1:AC63 -  -  -  -  vxMatrixRotationZ:
   61 D1:AC63 -  -  -  -  #comment
   62 D1:AC63             	ld	a, l
   63 D1:AC63             	ld	hl, ISIN_TABLE
   64 D1:AC63             	ld	l, a
   65 D1:AC63             	ld	a, (hl)
   66 D1:AC63             	ld	(ix+3), a
   67 D1:AC63             	neg
   68 D1:AC63             	ld	(ix+1), a
   69 D1:AC63             	ld	a, l
   70 D1:AC63             	add	a, 64
   71 D1:AC63             	ld	l, a
   72 D1:AC63             	ld	c, (hl)
   73 D1:AC63             	ld	(ix+0), c
   74 D1:AC63             	ld	(ix+4), c
   75 D1:AC63             	ld	a, 64
   76 D1:AC63             	ld	(ix+8), a
   77 D1:AC63             	xor	a, a
   78 D1:AC63             	ld	(ix+2), a
   79 D1:AC63             	ld	(ix+6), a
   80 D1:AC63             	ld	(ix+7), a
   81 D1:AC63             	ld	(ix+5), a
   82 D1:AC63             #endcomment
   83 D1:AC63 E5 -  -  -  	push	hl
   84 D1:AC64 CD A0 B1 D1 	call	vxSin
   85 D1:AC68 7C -  -  -  	ld	a, h
   86 D1:AC69 DD 77 03 -  	ld	(ix+3), a
   87 D1:AC6C ED 44 -  -  	neg
   88 D1:AC6E DD 77 01 -  	ld	(ix+1), a
   89 D1:AC71 E1 -  -  -  	pop	hl
   90 D1:AC72 CD 9F B1 D1 	call	vxCos
   91 D1:AC76 DD 74 00 -  	ld	(ix+0), h
   92 D1:AC79 DD 74 04 -  	ld	(ix+4), h
   93 D1:AC7C 3E 40 -  -  	ld	a, 64
   94 D1:AC7E DD 77 08 -  	ld	(ix+8), a
   95 D1:AC81 AF -  -  -  	xor	a, a
   96 D1:AC82 DD 77 02 -  	ld	(ix+2), a
   97 D1:AC85 DD 77 06 -  	ld	(ix+6), a
   98 D1:AC88 DD 77 07 -  	ld	(ix+7), a
   99 D1:AC8B DD 77 05 -  	ld	(ix+5), a
  100 D1:AC8E C9 -  -  -  	ret
  101 D1:AC8F -  -  -  -  vxMatrixRotationY:
  102 D1:AC8F E5 -  -  -  	push	hl
  103 D1:AC90 CD A0 B1 D1 	call	vxSin
  104 D1:AC94 7C -  -  -  	ld	a, h
  105 D1:AC95 DD 77 02 -  	ld	(ix+2), a
  106 D1:AC98 ED 44 -  -  	neg
  107 D1:AC9A DD 77 06 -  	ld	(ix+6), a
  108 D1:AC9D E1 -  -  -  	pop	hl
  109 D1:AC9E CD 9F B1 D1 	call	vxCos
  110 D1:ACA2 DD 74 00 -  	ld	(ix+0), h
  111 D1:ACA5 DD 74 08 -  	ld	(ix+8), h
  112 D1:ACA8 3E 40 -  -  	ld	a, 64
  113 D1:ACAA DD 77 04 -  	ld	(ix+4), a
  114 D1:ACAD AF -  -  -  	xor	a, a
  115 D1:ACAE DD 77 01 -  	ld	(ix+1), a
  116 D1:ACB1 DD 77 03 -  	ld	(ix+3), a
  117 D1:ACB4 DD 77 05 -  	ld	(ix+5), a
  118 D1:ACB7 DD 77 07 -  	ld	(ix+7), a
  119 D1:ACBA C9 -  -  -  	ret
  120 D1:ACBB -  -  -  -  vxMatrixMlt:
  121 D1:ACBB -  -  -  -  ; (hl) = (iy) * (ix)
  122 D1:ACBB -  -  -  -  ; 116 bytes, ~3800 TStates
  123 D1:ACBB EB -  -  -  	ex	de, hl
  124 D1:ACBC 01 00 03 00 	ld	bc, 768
  125 D1:ACC0 -  -  -  -  vxMatrixColLoop:
  126 D1:ACC0 C5 -  -  -  	push	bc
  127 D1:ACC1 06 03 -  -  	ld	b, 3
  128 D1:ACC3 -  -  -  -  vxMatrixRowLoop:
  129 D1:ACC3 C5 -  -  -  	push	bc
  130 D1:ACC4 DD 66 00 -  	ld	h, (ix+0)
  131 D1:ACC7 FD 6E 00 -  	ld	l, (iy+0)
  132 D1:ACCA AF -  -  -  	xor	a, a
  133 D1:ACCB CB 7C 28 01 
              95 -  -  -  	bit	7, h \ jr z, $+3 \ sub a, l
  134 D1:ACD0 CB 7D 28 01 
              94 -  -  -  	bit	7, l \ jr z, $+3 \ sub a, h
  135 D1:ACD5 ED 6C -  -  	mlt	hl
  136 D1:ACD7 DD 46 01 -  	ld	b, (ix+1)
  137 D1:ACDA FD 4E 03 -  	ld	c, (iy+3)
  138 D1:ACDD CB 78 28 01 
              91 -  -  -  	bit	7, b \ jr z, $+3 \ sub a, c
  139 D1:ACE2 CB 79 28 01 
              90 -  -  -  	bit	7, c \ jr z, $+3 \ sub a, b
  140 D1:ACE7 ED 4C -  -  	mlt	bc
  141 D1:ACE9 09 -  -  -  	add	hl, bc
  142 D1:ACEA DD 46 02 -  	ld	b, (ix+2)
  143 D1:ACED FD 4E 06 -  	ld	c, (iy+6)
  144 D1:ACF0 CB 78 28 01 
              91 -  -  -  	bit	7, b \ jr z, $+3 \ sub a, c
  145 D1:ACF5 CB 79 28 01 
              90 -  -  -  	bit	7, c \ jr z, $+3 \ sub a, b
  146 D1:ACFA ED 4C -  -  	mlt	bc
  147 D1:ACFC 09 -  -  -  	add	hl, bc
  148 D1:ACFD 47 -  -  -  	ld	b, a
  149 D1:ACFE AF -  -  -  	xor	a, a
  150 D1:ACFF 4F -  -  -  	ld	c, a
  151 D1:AD00 09 -  -  -  	add	hl, bc
  152 D1:AD01 29 -  -  -  	add	hl, hl
  153 D1:AD02 29 -  -  -  	add	hl, hl
  154 D1:AD03 7C -  -  -  	ld	a, h
  155 D1:AD04 12 -  -  -  	ld	(de), a
  156 D1:AD05 13 -  -  -  	inc	de
  157 D1:AD06 FD 23 -  -  	inc	iy
  158 D1:AD08 C1 -  -  -  	pop	bc
  159 D1:AD09 10 B8 -  -  	djnz	vxMatrixRowLoop
  160 D1:AD0B ED 32 03 -  	lea	ix, ix+3
  161 D1:AD0E ED 33 FD -  	lea	iy, iy-3
  162 D1:AD11 C1 -  -  -  	pop	bc
  163 D1:AD12 10 AC -  -  	djnz	vxMatrixColLoop
  164 D1:AD14 ED 32 F7 -  	lea	ix, ix-9
  165 D1:AD17 EB -  -  -  	ex	de, hl
  166 D1:AD18 01 F7 FF FF 	ld	bc, -9
  167 D1:AD1C 09 -  -  -  	add	hl, bc
  168 D1:AD1D C9 -  -  -  	ret
  169 D1:AD1E -  -  -  -  vxMatrixTransform:
  170 D1:AD1E -  -  -  -  ; (hl) = (iy)*(ix) with translation
  171 D1:AD1E -  -  -  -  ; iy is a animation matrix, ix is a world matrix, hl is world matrix
  172 D1:AD1E E5 -  -  -  	push	hl
  173 D1:AD1F ED 33 09 -  	lea	iy, iy+9	; load up the translation of matrix 0
  174 D1:AD22 CD C3 AD D1 	call	vxfTransform
  175 D1:AD26 ED 33 F7 -  	lea	iy, iy-9
  176 D1:AD29 E1 -  -  -  	pop	hl
  177 D1:AD2A CD BB AC D1 	call	vxMatrixMlt
  178 D1:AD2E -  -  -  -  ; copy translation data to result (hl)
  179 D1:AD2E 01 09 00 00 	ld	bc, 9
  180 D1:AD32 09 -  -  -  	add	hl, bc
  181 D1:AD33 11 06 34 D0 	ld	de, vxPosition
  182 D1:AD37 EB -  -  -  	ex	de, hl
  183 D1:AD38 ED B0 -  -  	ldir
  184 D1:AD3A 01 EE FF FF 	ld	bc, -VX_MATRIX_SIZE
  185 D1:AD3E EB -  -  -  	ex	de, hl
  186 D1:AD3F 09 -  -  -  	add	hl, bc
  187 D1:AD40 C9 -  -  -  	ret
  188 D1:AD41 -  -  -  -  vxMatrixTranspose:
  189 D1:AD41 -  -  -  -  ; 192 TStates + translation
  190 D1:AD41 DD 4E 03 -  	ld	c, (ix+3)
  191 D1:AD44 DD 7E 01 -  	ld	a, (ix+1)
  192 D1:AD47 DD 77 03 -  	ld	(ix+3), a
  193 D1:AD4A DD 71 01 -  	ld	(ix+1), c
  194 D1:AD4D DD 4E 06 -  	ld	c, (ix+6)
  195 D1:AD50 DD 7E 02 -  	ld	a, (ix+2)
  196 D1:AD53 DD 77 06 -  	ld	(ix+6), a
  197 D1:AD56 DD 71 02 -  	ld	(ix+2), c
  198 D1:AD59 DD 4E 07 -  	ld	c, (ix+7)
  199 D1:AD5C DD 7E 05 -  	ld	a, (ix+5)
  200 D1:AD5F DD 77 07 -  	ld	(ix+7), a
  201 D1:AD62 DD 71 05 -  	ld	(ix+5), c	
  202 D1:AD65 -  -  -  -  #comment
  203 D1:AD65             	ld	de, (ix+9)
  204 D1:AD65             	or	a, a
  205 D1:AD65             	sbc	hl, hl
  206 D1:AD65             	sbc	hl, de
  207 D1:AD65             	ld	(ix+9), hl
  208 D1:AD65             	ld	de, (ix+12)
  209 D1:AD65             	or	a, a
  210 D1:AD65             	sbc	hl, hl
  211 D1:AD65             	sbc	hl, de
  212 D1:AD65             	ld	(ix+12), hl
  213 D1:AD65             	ld	de, (ix+15)
  214 D1:AD65             	or	a, a
  215 D1:AD65             	sbc	hl, hl
  216 D1:AD65             	sbc	hl, de
  217 D1:AD65             	ld	(ix+15), hl
  218 D1:AD65             #endcomment
  219 D1:AD65 C9 -  -  -  	ret
  220 D1:AD66 -  -  -  -  vxMatrixLightning:
  221 D1:AD66 EB -  -  -  	ex	de, hl
  222 D1:AD67 06 03 -  -  	ld	b, 3
  223 D1:AD69 -  -  -  -  vxMatrixLightLoop:
  224 D1:AD69 C5 -  -  -  	push	bc
  225 D1:AD6A D5 -  -  -  	push	de
  226 D1:AD6B CD D3 B2 D1 	call	vxDotProduct
  227 D1:AD6F D1 -  -  -  	pop	de
  228 D1:AD70 29 -  -  -  	add	hl, hl
  229 D1:AD71 29 -  -  -  	add	hl, hl
  230 D1:AD72 7C -  -  -  	ld	a, h
  231 D1:AD73 12 -  -  -  	ld	(de), a
  232 D1:AD74 13 -  -  -  	inc	de
  233 D1:AD75 ED 32 03 -  	lea	ix, ix+3
  234 D1:AD78 C1 -  -  -  	pop	bc
  235 D1:AD79 10 EE -  -  	djnz	vxMatrixLightLoop
  236 D1:AD7B ED 32 F7 -  	lea	ix, ix-9
  237 D1:AD7E D5 -  -  -  	push	de
  238 D1:AD7F FD 27 04 -  	ld	hl, (iy+VX_LIGHT_POSITION)
  239 D1:AD82 FD 17 07 -  	ld	de, (iy+VX_LIGHT_POSITION+3)
  240 D1:AD85 B7 -  -  -  	or	a, a
  241 D1:AD86 ED 52 -  -  	sbc	hl, de
  242 D1:AD88 E1 -  -  -  	pop	hl
  243 D1:AD89 28 30 -  -  	jr	z, vxMatrixLightEarlyOut
  244 D1:AD8B 2B 2B 2B -  	dec	hl \ dec hl \ dec hl
  245 D1:AD8E E5 -  -  -  	push	hl
  246 D1:AD8F -  -  -  -  ; transform lightning position
  247 D1:AD8F CD C3 AD D1 	call	vxfTransform
  248 D1:AD93 -  -  -  -  ; fetch value and divide them
  249 D1:AD93 -  -  -  -  ; value should be copied to (hl)	
  250 D1:AD93 E1 -  -  -  	pop	hl
  251 D1:AD94 01 07 00 00 	ld	bc, VX_LIGHT_POSITION+3
  252 D1:AD98 09 -  -  -  	add	hl, bc
  253 D1:AD99 EB -  -  -  	ex	de, hl
  254 D1:AD9A -  -  -  -  ; de = adress of position.
  255 D1:AD9A 2A 0C 34 D0 	ld	hl, (vxPosition+6)
  256 D1:AD9E 29 -  -  -  	add	hl, hl
  257 D1:AD9F 29 -  -  -  	add	hl, hl
  258 D1:ADA0 -  -  -  -  ; copy hlu, h to (de)
  259 D1:ADA0 EB -  -  -  	ex	de, hl
  260 D1:ADA1 ED 1F -  -  	ld	(hl), de
  261 D1:ADA3 2B -  -  -  	dec	hl
  262 D1:ADA4 2B -  -  -  	dec	hl	
  263 D1:ADA5 EB -  -  -  	ex	de, hl
  264 D1:ADA6 2A 09 34 D0 	ld	hl, (vxPosition+3)
  265 D1:ADAA 29 -  -  -  	add	hl, hl
  266 D1:ADAB 29 -  -  -  	add	hl, hl
  267 D1:ADAC EB -  -  -  	ex	de, hl
  268 D1:ADAD ED 1F -  -  	ld	(hl), de
  269 D1:ADAF 2B -  -  -  	dec	hl
  270 D1:ADB0 2B -  -  -  	dec	hl
  271 D1:ADB1 EB -  -  -  	ex	de, hl
  272 D1:ADB2 2A 06 34 D0 	ld	hl, (vxPosition)
  273 D1:ADB6 29 -  -  -  	add	hl, hl
  274 D1:ADB7 29 -  -  -  	add	hl, hl
  275 D1:ADB8 EB -  -  -  	ex	de, hl
  276 D1:ADB9 ED 1F -  -  	ld	(hl), de
  277 D1:ADBB -  -  -  -  ; AMBIANT_VALUE was writed with bad value.
  278 D1:ADBB -  -  -  -  vxMatrixLightEarlyOut:
  279 D1:ADBB FD 7E 03 -  	ld	a, (iy+VX_LIGHT_AMBIANT)
  280 D1:ADBE 77 -  -  -  	ld	(hl), a
  281 D1:ADBF 2B 2B 2B -  	dec	hl \ dec hl \ dec hl
  282 D1:ADC2 C9 -  -  -  	ret
  283 D1:ADC3 -  -  -  -  vxfTransform:
  284 D1:ADC3 -  -  -  -  ; input : iy vector, ix matrix
  285 D1:ADC3 -  -  -  -  ; [ix+0]*[iy]+[ix+1]*[iy+2]+[ix+2]*[iy+4]+[ix+9]=x
  286 D1:ADC3 -  -  -  -  ; [ix+3]*[iy]+[ix+4]*[iy+2]+{ix+5]*[iy+4]+[ix+12]=y
  287 D1:ADC3 -  -  -  -  ; [ix+6]*[iy]+[ix+7]*[iy+2]+[ix+8]*[iy+4]+[ix+15]=z
  288 D1:ADC3 -  -  -  -  ; From 1566+x? TStates to 1654 TStates, 333 bytes
  289 D1:ADC3 -  -  -  -  ; X coordinate
  290 D1:ADC3 FD 07 00 -  	ld	bc, (iy+0)
  291 D1:ADC6 DD 27 09 -  	ld	hl, (ix+9)
  292 D1:ADC9 DD 7E 00 -  	ld	a, (ix+0)
  293 D1:ADCC EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  294 D1:ADEB DD 7E 01 -  	ld	a, (ix+1)
  295 D1:ADEE FD 07 02 -  	ld	bc, (iy+2)
  296 D1:ADF1 EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  297 D1:AE10 DD 7E 02 -  	ld	a, (ix+2)
  298 D1:AE13 FD 07 04 -  	ld	bc, (iy+4)
  299 D1:AE16 51 5F ED 5C 
              19 EB 60 6F 
              ED 6C FE 80 
              38 02 ED 42 
              CB 78 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 19 	madd.f
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  300 D1:AE36 22 06 34 D0 	ld	(vxPosition), hl
  301 D1:AE3A -  -  -  -  ; Y coordinate
  302 D1:AE3A DD 27 0C -  	ld	hl, (ix+12)
  303 D1:AE3D DD 7E 05 -  	ld	a, (ix+5)
  304 D1:AE40 EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  305 D1:AE5F DD 7E 04 -  	ld	a, (ix+4)
  306 D1:AE62 FD 07 02 -  	ld	bc, (iy+2)
  307 D1:AE65 EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  308 D1:AE84 DD 7E 03 -  	ld	a, (ix+3)
  309 D1:AE87 FD 07 00 -  	ld	bc, (iy+0)
  310 D1:AE8A 51 5F ED 5C 
              19 EB 60 6F 
              ED 6C FE 80 
              38 02 ED 42 
              CB 78 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 19 	madd.f
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  311 D1:AEAA 22 09 34 D0 	ld	(vxPosition+3), hl
  312 D1:AEAE -  -  -  -  ; Z coordinate
  313 D1:AEAE DD 27 0F -  	ld	hl, (ix+15)
  314 D1:AEB1 DD 7E 06 -  	ld	a, (ix+6)
  315 D1:AEB4 EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  316 D1:AED3 DD 7E 07 -  	ld	a, (ix+7)
  317 D1:AED6 FD 07 02 -  	ld	bc, (iy+2)
  318 D1:AED9 EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  319 D1:AEF8 DD 7E 08 -  	ld	a, (ix+8)
  320 D1:AEFB FD 07 04 -  	ld	bc, (iy+4)
  321 D1:AEFE EB 60 6F ED 
              6C FE 80 38 
              02 ED 42 CB 
              78 47 28 03 
              2F 8C 67 29 
              29 29 29 29 
              29 29 29 ED 
              4C 09 19 -  	madd
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMatrix.ez80"
  322 D1:AF1D 22 0C 34 D0 	ld	(vxPosition+6), hl
  323 D1:AF21 C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    4 D1:AF22 -  -  -  -  #include	"vxQuaternion.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxQuaternion.ez80"
    1 D1:AF22 -  -  -  -  ; Quaternions utility functions
    2 D1:AF22 -  -  -  -  
    3 D1:AF22 -  -  -  -  #define VX_QUATERNION_SIZE    $0C
    4 D1:AF22 -  -  -  -  #define VX_QW                 $0
    5 D1:AF22 -  -  -  -  #define VX_QX                 $3
    6 D1:AF22 -  -  -  -  #define VX_QY                 $6
    7 D1:AF22 -  -  -  -  #define VX_QZ                 $9
    8 D1:AF22 -  -  -  -  
    9 D1:AF22 -  -  -  -  vxIdentityQuaternion:
   10 D1:AF22 00 40 00 -  .dl	$004000
   11 D1:AF25 00 00 00 -  .dl	$000000
   12 D1:AF28 00 00 00 -  .dl	$000000
   13 D1:AF2B 00 00 00 -  .dl	$000000
   14 D1:AF2E -  -  -  -  
   15 D1:AF2E -  -  -  -  vxQuaternionLoadIdentity:
   16 D1:AF2E EB -  -  -  	ex	de, hl
   17 D1:AF2F 21 22 AF D1 	ld	hl, vxIdentityQuaternion
   18 D1:AF33 01 0C 00 00 	ld	bc, VX_QUATERNION_SIZE
   19 D1:AF37 ED B0 -  -  	ldir
   20 D1:AF39 EB -  -  -  	ex	de, hl
   21 D1:AF3A 01 F4 FF FF 	ld	bc, -VX_QUATERNION_SIZE
   22 D1:AF3E 09 -  -  -  	add	hl, bc
   23 D1:AF3F C9 -  -  -  	ret
   24 D1:AF40 -  -  -  -  vxQuaternionLoadRotation:
   25 D1:AF40 C9 -  -  -  	ret
   26 D1:AF41 -  -  -  -  vxQuaternionMlt:
   27 D1:AF41 -  -  -  -  ; untested
   28 D1:AF41 DD 27 09 -  	ld	hl, (ix+VX_QZ)
   29 D1:AF44 FD 17 09 -  	ld	de, (iy+VX_QZ)
   30 D1:AF47 CD 7C B1 D1 	call	vxQuatMlt
   31 D1:AF4B E5 -  -  -  	push	hl
   32 D1:AF4C DD 27 03 -  	ld	hl, (ix+VX_QX)
   33 D1:AF4F FD 17 03 -  	ld	de, (iy+VX_QX)
   34 D1:AF52 CD 7C B1 D1 	call	vxQuatMlt
   35 D1:AF56 E5 -  -  -  	push	hl
   36 D1:AF57 DD 27 06 -  	ld	hl, (ix+VX_QY)
   37 D1:AF5A FD 17 06 -  	ld	de, (iy+VX_QY)
   38 D1:AF5D CD 7C B1 D1 	call	vxQuatMlt
   39 D1:AF61 E5 -  -  -  	push	hl
   40 D1:AF62 DD 27 00 -  	ld	hl, (ix+VX_QW)
   41 D1:AF65 FD 17 00 -  	ld	de, (iy+VX_QW)
   42 D1:AF68 CD 7C B1 D1 	call	vxQuatMlt
   43 D1:AF6C D1 -  -  -  	pop	de
   44 D1:AF6D B7 -  -  -  	or	a, a
   45 D1:AF6E ED 52 -  -  	sbc	hl, de
   46 D1:AF70 D1 -  -  -  	pop	de
   47 D1:AF71 B7 -  -  -  	or	a, a
   48 D1:AF72 ED 52 -  -  	sbc	hl, de
   49 D1:AF74 D1 -  -  -  	pop	de
   50 D1:AF75 B7 -  -  -  	or	a, a
   51 D1:AF76 ED 52 -  -  	sbc	hl, de
   52 D1:AF78 -  -  -  -  ; got VX_QW
   53 D1:AF78 E5 -  -  -  	push	hl
   54 D1:AF79 DD 27 00 -  	ld	hl, (ix+VX_QW)
   55 D1:AF7C FD 17 03 -  	ld	de, (iy+VX_QX)
   56 D1:AF7F CD 7C B1 D1 	call	vxQuatMlt
   57 D1:AF83 E5 -  -  -  	push	hl
   58 D1:AF84 DD 27 03 -  	ld	hl, (ix+VX_QX)
   59 D1:AF87 FD 17 00 -  	ld	de, (iy+VX_QW)
   60 D1:AF8A CD 7C B1 D1 	call	vxQuatMlt
   61 D1:AF8E E5 -  -  -  	push	hl
   62 D1:AF8F DD 27 09 -  	ld	hl, (ix+VX_QZ)
   63 D1:AF92 FD 17 06 -  	ld	de, (iy+VX_QY)
   64 D1:AF95 CD 7C B1 D1 	call	vxQuatMlt
   65 D1:AF99 E5 -  -  -  	push	hl
   66 D1:AF9A DD 27 06 -  	ld	hl, (ix+VX_QY)
   67 D1:AF9D FD 17 09 -  	ld	de, (iy+VX_QZ)
   68 D1:AFA0 CD 7C B1 D1 	call	vxQuatMlt
   69 D1:AFA4 D1 -  -  -  	pop	de
   70 D1:AFA5 B7 -  -  -  	or	a, a
   71 D1:AFA6 ED 52 -  -  	sbc	hl, de
   72 D1:AFA8 D1 -  -  -  	pop	de
   73 D1:AFA9 19 -  -  -  	add	hl, de
   74 D1:AFAA D1 -  -  -  	pop	de
   75 D1:AFAB 19 -  -  -  	add	hl, de
   76 D1:AFAC -  -  -  -  ; got VX_QX
   77 D1:AFAC E5 -  -  -  	push	hl
   78 D1:AFAD DD 27 00 -  	ld	hl, (ix+VX_QW)
   79 D1:AFB0 FD 17 06 -  	ld	de, (iy+VX_QY)
   80 D1:AFB3 CD 7C B1 D1 	call	vxQuatMlt
   81 D1:AFB7 E5 -  -  -  	push	hl
   82 D1:AFB8 DD 27 03 -  	ld	hl, (ix+VX_QX)
   83 D1:AFBB FD 17 09 -  	ld	de, (iy+VX_QZ)
   84 D1:AFBE CD 7C B1 D1 	call	vxQuatMlt
   85 D1:AFC2 E5 -  -  -  	push	hl
   86 D1:AFC3 DD 27 06 -  	ld	hl, (ix+VX_QY)
   87 D1:AFC6 FD 17 00 -  	ld	de, (iy+VX_QW)
   88 D1:AFC9 CD 7C B1 D1 	call	vxQuatMlt
   89 D1:AFCD E5 -  -  -  	push	hl
   90 D1:AFCE DD 27 09 -  	ld	hl, (ix+VX_QZ)
   91 D1:AFD1 FD 17 03 -  	ld	de, (iy+VX_QX)
   92 D1:AFD4 CD 7C B1 D1 	call	vxQuatMlt
   93 D1:AFD8 D1 -  -  -  	pop	de
   94 D1:AFD9 19 -  -  -  	add	hl, de
   95 D1:AFDA D1 -  -  -  	pop	de
   96 D1:AFDB B7 -  -  -  	or	a, a
   97 D1:AFDC ED 52 -  -  	sbc	hl, de
   98 D1:AFDE D1 -  -  -  	pop	de
   99 D1:AFDF 19 -  -  -  	add	hl, de
  100 D1:AFE0 -  -  -  -  ; got VX_QY
  101 D1:AFE0 E5 -  -  -  	push	hl
  102 D1:AFE1 DD 27 00 -  	ld	hl, (ix+VX_QW)
  103 D1:AFE4 FD 17 09 -  	ld	de, (iy+VX_QZ)
  104 D1:AFE7 CD 7C B1 D1 	call	vxQuatMlt
  105 D1:AFEB E5 -  -  -  	push	hl
  106 D1:AFEC DD 27 03 -  	ld	hl, (ix+VX_QX)
  107 D1:AFEF FD 17 06 -  	ld	de, (iy+VX_QY)
  108 D1:AFF2 CD 7C B1 D1 	call	vxQuatMlt
  109 D1:AFF6 E5 -  -  -  	push	hl
  110 D1:AFF7 DD 27 06 -  	ld	hl, (ix+VX_QY)
  111 D1:AFFA FD 17 03 -  	ld	de, (iy+VX_QX)
  112 D1:AFFD CD 7C B1 D1 	call	vxQuatMlt
  113 D1:B001 E5 -  -  -  	push	hl
  114 D1:B002 DD 27 09 -  	ld	hl, (ix+VX_QZ)
  115 D1:B005 FD 17 00 -  	ld	de, (iy+VX_QW)
  116 D1:B008 CD 7C B1 D1 	call	vxQuatMlt
  117 D1:B00C D1 -  -  -  	pop	de
  118 D1:B00D B7 -  -  -  	or	a, a
  119 D1:B00E ED 52 -  -  	sbc	hl, de
  120 D1:B010 D1 -  -  -  	pop	de
  121 D1:B011 19 -  -  -  	add	hl, de
  122 D1:B012 D1 -  -  -  	pop	de
  123 D1:B013 19 -  -  -  	add	hl, de
  124 D1:B014 -  -  -  -  ; got VX_QZ
  125 D1:B014 DD 2F 09 -  	ld	(ix+VX_QZ), hl
  126 D1:B017 E1 -  -  -  	pop	hl
  127 D1:B018 DD 2F 06 -  	ld	(ix+VX_QY), hl
  128 D1:B01B E1 -  -  -  	pop	hl
  129 D1:B01C DD 2F 03 -  	ld	(ix+VX_QX), hl
  130 D1:B01F E1 -  -  -  	pop	hl
  131 D1:B020 DD 2F 00 -  	ld	(ix+VX_QW), hl
  132 D1:B023 C9 -  -  -  	ret
  133 D1:B024 -  -  -  -  
  134 D1:B024 -  -  -  -  vxQuaternionMagnitude:
  135 D1:B024 DD 27 00 -  	ld	hl, (ix+VX_QW)
  136 D1:B027 CD 8D B1 D1 	call	vxQuatSquare
  137 D1:B02B E5 -  -  -  	push	hl
  138 D1:B02C DD 27 03 -  	ld	hl, (ix+VX_QX)
  139 D1:B02F CD 8D B1 D1 	call	vxQuatSquare
  140 D1:B033 E5 -  -  -  	push	hl
  141 D1:B034 DD 27 06 -  	ld	hl, (ix+VX_QY)
  142 D1:B037 CD 8D B1 D1 	call	vxQuatSquare
  143 D1:B03B E5 -  -  -  	push	hl
  144 D1:B03C DD 27 09 -  	ld	hl, (ix+VX_QZ)
  145 D1:B03F CD 8D B1 D1 	call	vxQuatSquare
  146 D1:B043 D1 -  -  -  	pop	de
  147 D1:B044 19 -  -  -  	add	hl, de
  148 D1:B045 D1 -  -  -  	pop	de
  149 D1:B046 19 -  -  -  	add	hl, de
  150 D1:B047 D1 -  -  -  	pop	de
  151 D1:B048 19 -  -  -  	add	hl, de
  152 D1:B049 C9 -  -  -  	ret
  153 D1:B04A -  -  -  -  vxQuaternionConjugate:
  154 D1:B04A DD 17 03 -  	ld	de, (ix+3)
  155 D1:B04D B7 -  -  -  	or	a, a
  156 D1:B04E ED 62 -  -  	sbc	hl, hl
  157 D1:B050 ED 52 -  -  	sbc	hl, de
  158 D1:B052 DD 2F 03 -  	ld	(ix+3), hl
  159 D1:B055 DD 17 06 -  	ld	de, (ix+6)
  160 D1:B058 B7 -  -  -  	or	a, a
  161 D1:B059 ED 62 -  -  	sbc	hl, hl
  162 D1:B05B ED 52 -  -  	sbc	hl, de
  163 D1:B05D DD 2F 06 -  	ld	(ix+6), hl
  164 D1:B060 DD 17 09 -  	ld	de, (ix+9)
  165 D1:B063 B7 -  -  -  	or	a, a
  166 D1:B064 ED 62 -  -  	sbc	hl, hl
  167 D1:B066 ED 52 -  -  	sbc	hl, de
  168 D1:B068 DD 2F 09 -  	ld	(ix+9), hl
  169 D1:B06B C9 -  -  -  	ret
  170 D1:B06C -  -  -  -  vxQuaternionNormalize:
  171 D1:B06C C9 -  -  -  	ret
  172 D1:B06D -  -  -  -  vxQuatDivide:
  173 D1:B06D -  -  -  -  ; do HL*16384/DE
  174 D1:B06D C9 -  -  -  	ret
  175 D1:B06E -  -  -  -  vxQuaternionGetMatrix:
  176 D1:B06E -  -  -  -  ; iy quaternion, ix matrix
  177 D1:B06E -  -  -  -  ; (qw, qx, qy, qz)
  178 D1:B06E -  -  -  -  ; 1 - 2*qy - 2*qz 	2*qx*qy - 2*qz*qw 	2*qx*qz + 2*qy*qw
  179 D1:B06E -  -  -  -  ; 2*qx*qy + 2*qz*qw 	1 - 2*qx - 2*qz 	2*qy*qz - 2*qx*qw
  180 D1:B06E -  -  -  -  ; 2*qx*qz - 2*qy*qw 	2*qy*qz + 2*qx*qw 	1 - 2*qx - 2*qy
  181 D1:B06E FD 27 09 -  	ld	hl, (iy+VX_QZ)
  182 D1:B071 FD 17 00 -  	ld	de, (iy+VX_QW)
  183 D1:B074 CD 7C B1 D1 	call	vxQuatMlt
  184 D1:B078 29 -  -  -  	add	hl, hl
  185 D1:B079 -  -  -  -  ; 2*qz*qw
  186 D1:B079 E5 -  -  -  	push	hl
  187 D1:B07A FD 27 03 -  	ld	hl, (iy+VX_QX)
  188 D1:B07D FD 17 06 -  	ld	de, (iy+VX_QY)
  189 D1:B080 CD 7C B1 D1 	call	vxQuatMlt
  190 D1:B084 29 -  -  -  	add	hl, hl
  191 D1:B085 -  -  -  -  ; 2*qx*qy
  192 D1:B085 D1 -  -  -  	pop	de
  193 D1:B086 B7 -  -  -  	or	a, a
  194 D1:B087 ED 52 -  -  	sbc	hl, de
  195 D1:B089 DD 74 01 -  	ld	(ix+1), h
  196 D1:B08C 19 -  -  -  	add	hl, de
  197 D1:B08D 19 -  -  -  	add	hl, de
  198 D1:B08E DD 74 03 -  	ld	(ix+3), h
  199 D1:B091 -  -  -  -  ; next
  200 D1:B091 FD 27 06 -  	ld	hl, (iy+VX_QY)
  201 D1:B094 FD 17 00 -  	ld	de, (iy+VX_QW)
  202 D1:B097 CD 7C B1 D1 	call	vxQuatMlt
  203 D1:B09B 29 -  -  -  	add	hl, hl
  204 D1:B09C -  -  -  -  ; 2*qw*qy
  205 D1:B09C E5 -  -  -  	push	hl
  206 D1:B09D FD 27 03 -  	ld	hl, (iy+VX_QX)
  207 D1:B0A0 FD 17 09 -  	ld	de, (iy+VX_QZ)
  208 D1:B0A3 CD 7C B1 D1 	call	vxQuatMlt
  209 D1:B0A7 29 -  -  -  	add	hl, hl
  210 D1:B0A8 -  -  -  -  ; 2*qx*qz
  211 D1:B0A8 D1 -  -  -  	pop	de
  212 D1:B0A9 B7 -  -  -  	or	a, a
  213 D1:B0AA ED 52 -  -  	sbc	hl, de
  214 D1:B0AC DD 74 06 -  	ld	(ix+6), h
  215 D1:B0AF 19 -  -  -  	add	hl, de
  216 D1:B0B0 19 -  -  -  	add	hl, de
  217 D1:B0B1 DD 74 02 -  	ld	(ix+2), h
  218 D1:B0B4 -  -  -  -  ; next
  219 D1:B0B4 FD 27 03 -  	ld	hl, (iy+VX_QX)
  220 D1:B0B7 FD 17 00 -  	ld	de, (iy+VX_QW)
  221 D1:B0BA CD 7C B1 D1 	call	vxQuatMlt
  222 D1:B0BE 29 -  -  -  	add	hl, hl
  223 D1:B0BF -  -  -  -  ; 2*qx*qw
  224 D1:B0BF E5 -  -  -  	push	hl
  225 D1:B0C0 FD 27 06 -  	ld	hl, (iy+VX_QY)
  226 D1:B0C3 FD 17 09 -  	ld	de, (iy+VX_QZ)
  227 D1:B0C6 CD 7C B1 D1 	call	vxQuatMlt
  228 D1:B0CA 29 -  -  -  	add	hl, hl
  229 D1:B0CB -  -  -  -  ; 2*qy*qz
  230 D1:B0CB D1 -  -  -  	pop	de
  231 D1:B0CC B7 -  -  -  	or	a, a
  232 D1:B0CD ED 52 -  -  	sbc	hl, de
  233 D1:B0CF DD 74 05 -  	ld	(ix+5), h
  234 D1:B0D2 19 -  -  -  	add	hl, de
  235 D1:B0D3 19 -  -  -  	add	hl, de
  236 D1:B0D4 DD 74 07 -  	ld	(ix+7), h
  237 D1:B0D7 -  -  -  -  ; 1-2*qy-2qz
  238 D1:B0D7 FD 27 06 -  	ld	hl, (iy+VX_QY)
  239 D1:B0DA CD 8D B1 D1 	call	vxQuatSquare
  240 D1:B0DE E5 -  -  -  	push	hl
  241 D1:B0DF E5 -  -  -  	push	hl
  242 D1:B0E0 FD 27 09 -  	ld	hl, (iy+VX_QZ)
  243 D1:B0E3 CD 8D B1 D1 	call	vxQuatSquare
  244 D1:B0E7 EB -  -  -  	ex	de, hl
  245 D1:B0E8 C1 -  -  -  	pop	bc
  246 D1:B0E9 21 00 40 00 	ld	hl, $004000
  247 D1:B0ED B7 -  -  -  	or	a, a
  248 D1:B0EE ED 42 -  -  	sbc	hl, bc
  249 D1:B0F0 B7 -  -  -  	or	a, a
  250 D1:B0F1 ED 52 -  -  	sbc	hl, de
  251 D1:B0F3 DD 74 00 -  	ld	(ix+0), h
  252 D1:B0F6 -  -  -  -  ; 1-2*qz-2qx	
  253 D1:B0F6 D5 -  -  -  	push	de
  254 D1:B0F7 FD 27 03 -  	ld	hl, (iy+VX_QX)
  255 D1:B0FA CD 8D B1 D1 	call	vxQuatSquare
  256 D1:B0FE EB -  -  -  	ex	de, hl
  257 D1:B0FF C1 -  -  -  	pop	bc
  258 D1:B100 21 00 40 00 	ld	hl, $004000
  259 D1:B104 B7 -  -  -  	or	a, a
  260 D1:B105 ED 42 -  -  	sbc	hl, bc
  261 D1:B107 B7 -  -  -  	or	a, a
  262 D1:B108 ED 52 -  -  	sbc	hl, de
  263 D1:B10A DD 74 04 -  	ld	(ix+4), h
  264 D1:B10D -  -  -  -  ; 1-2qx-2qy
  265 D1:B10D C1 -  -  -  	pop	bc
  266 D1:B10E 21 00 40 00 	ld	hl, $004000
  267 D1:B112 B7 -  -  -  	or	a, a
  268 D1:B113 ED 42 -  -  	sbc	hl, bc
  269 D1:B115 B7 -  -  -  	or	a, a
  270 D1:B116 ED 52 -  -  	sbc	hl, de
  271 D1:B118 DD 74 08 -  	ld	(ix+8), h
  272 D1:B11B C9 -  -  -  	ret
  273 D1:B11C -  -  -  -  vxQuaternionRotationAxis:
  274 D1:B11C -  -  -  -  ; iy adress of quaternion to write
  275 D1:B11C -  -  -  -  ; ix unit vector
  276 D1:B11C -  -  -  -  ; a angle
  277 D1:B11C -  -  -  -  ; qw = cos(angle/2)
  278 D1:B11C -  -  -  -  ; qx = axis.x*sin(angle/2)
  279 D1:B11C -  -  -  -  ; qy = axis.y*sin(angle/2)
  280 D1:B11C -  -  -  -  ; qz = axis.z*sin(angle/2)
  281 D1:B11C E5 -  -  -  	push	hl
  282 D1:B11D CD A0 B1 D1 	call	vxSin
  283 D1:B121 -  -  -  -  ; hl = sin
  284 D1:B121 EB -  -  -  	ex	de, hl
  285 D1:B122 -  -  -  -  ; DE is never destroyed by the macro's
  286 D1:B122 DD 27 00 -  	ld	hl, (ix+0)
  287 D1:B125 CD 7C B1 D1 	call	vxQuatMlt
  288 D1:B129 FD 2F 03 -  	ld	(iy+VX_QX), hl
  289 D1:B12C DD 27 03 -  	ld	hl, (ix+3)
  290 D1:B12F CD 7C B1 D1 	call	vxQuatMlt
  291 D1:B133 FD 2F 06 -  	ld	(iy+VX_QY), hl
  292 D1:B136 DD 27 06 -  	ld	hl, (ix+6)
  293 D1:B139 CD 7C B1 D1 	call	vxQuatMlt
  294 D1:B13D FD 2F 09 -  	ld	(iy+VX_QZ), hl
  295 D1:B140 E1 -  -  -  	pop	hl
  296 D1:B141 CD 9F B1 D1 	call	vxCos
  297 D1:B145 FD 2F 00 -  	ld	(iy+VX_QW), hl
  298 D1:B148 C9 -  -  -  	ret
  299 D1:B149 -  -  -  -  IQuaternionDot:
  300 D1:B149 DD 27 00 -  	ld	hl, (ix+VX_QW)
  301 D1:B14C FD 17 00 -  	ld	de, (iy+VX_QW)
  302 D1:B14F CD 7C B1 D1 	call	vxQuatMlt
  303 D1:B153 E5 -  -  -  	push	hl
  304 D1:B154 DD 27 03 -  	ld	hl, (ix+VX_QX)
  305 D1:B157 FD 17 03 -  	ld	de, (iy+VX_QX)
  306 D1:B15A CD 7C B1 D1 	call	vxQuatMlt
  307 D1:B15E E5 -  -  -  	push	hl
  308 D1:B15F DD 27 06 -  	ld	hl, (ix+VX_QY)
  309 D1:B162 FD 17 06 -  	ld	de, (iy+VX_QY)
  310 D1:B165 CD 7C B1 D1 	call	vxQuatMlt
  311 D1:B169 E5 -  -  -  	push	hl
  312 D1:B16A DD 27 09 -  	ld	hl, (ix+VX_QZ)
  313 D1:B16D FD 17 09 -  	ld	de, (iy+VX_QZ)
  314 D1:B170 CD 7C B1 D1 	call	vxQuatMlt
  315 D1:B174 D1 -  -  -  	pop	de
  316 D1:B175 19 -  -  -  	add	hl, de
  317 D1:B176 D1 -  -  -  	pop	de
  318 D1:B177 19 -  -  -  	add	hl, de
  319 D1:B178 D1 -  -  -  	pop	de
  320 D1:B179 19 -  -  -  	add	hl, de
  321 D1:B17A C9 -  -  -  	ret
  322 D1:B17B -  -  -  -  vxQuaternionSlerp:
  323 D1:B17B C9 -  -  -  	ret
  324 D1:B17C -  -  -  -  
  325 D1:B17C -  -  -  -  ; always included functions to works with quaternions, called by the majority of the routines.
  326 D1:B17C -  -  -  -  
  327 D1:B17C -  -  -  -  vxQuatMlt:
  328 D1:B17C -  -  -  -  ; hl *de, de is not destroyed
  329 D1:B17C CD FA B1 D1 	call	vxMltFP8
  330 D1:B180 -  -  -  -  ; and now divide by 64
  331 D1:B180 29 -  -  -  	add	hl, hl
  332 D1:B181 29 -  -  -  	add	hl, hl
  333 D1:B182 E5 33 F1 3B 	ld	a, hlu
  334 D1:B186 4C -  -  -  	ld	c, h
  335 D1:B187 29 -  -  -  	add	hl, hl
  336 D1:B188 ED 62 -  -  	sbc	hl, hl
  337 D1:B18A 67 -  -  -  	ld	h, a
  338 D1:B18B 69 -  -  -  	ld	l, c	
  339 D1:B18C C9 -  -  -  	ret
  340 D1:B18D -  -  -  -  vxQuatSquare:
  341 D1:B18D -  -  -  -  ; bc is kept intact
  342 D1:B18D CD D5 B1 D1 	call	vxSquareFP8
  343 D1:B191 -  -  -  -  ; divide by 32
  344 D1:B191 29 -  -  -  	add	hl, hl
  345 D1:B192 29 -  -  -  	add	hl, hl
  346 D1:B193 29 -  -  -  	add	hl, hl
  347 D1:B194 E5 33 F1 3B 	ld	a, hlu
  348 D1:B198 5C -  -  -  	ld	e, h
  349 D1:B199 B7 -  -  -  	or	a, a
  350 D1:B19A ED 62 -  -  	sbc	hl, hl
  351 D1:B19C 67 -  -  -  	ld	h, a
  352 D1:B19D 6B -  -  -  	ld	l, e
  353 D1:B19E C9 -  -  -  	ret
  354 D1:B19F -  -  -  -  vxCos:
  355 D1:B19F 24 -  -  -  	inc	h
  356 D1:B1A0 -  -  -  -  vxSin:
  357 D1:B1A0 CB 44 -  -  	bit	0, h
  358 D1:B1A2 7D -  -  -  	ld	a, l
  359 D1:B1A3 28 04 -  -  	jr	z, vxSinSkp1
  360 D1:B1A5 ED 44 -  -  	neg
  361 D1:B1A7 28 1E -  -  	jr	z, vxQuatIndexZero
  362 D1:B1A9 -  -  -  -  vxSinSkp1:
  363 D1:B1A9 CB 4C -  -  	bit	1, h
  364 D1:B1AB 21 00 20 D0 	ld	hl, VX_SIN_TABLE
  365 D1:B1AF 20 0A -  -  	jr	nz, vxSinNegate
  366 D1:B1B1 6F -  -  -  	ld	l, a
  367 D1:B1B2 4E -  -  -  	ld	c, (hl)
  368 D1:B1B3 24 -  -  -  	inc	h
  369 D1:B1B4 46 -  -  -  	ld	b, (hl)
  370 D1:B1B5 B7 -  -  -  	or	a, a
  371 D1:B1B6 ED 62 -  -  	sbc	hl, hl
  372 D1:B1B8 60 -  -  -  	ld	h, b
  373 D1:B1B9 69 -  -  -  	ld	l, c
  374 D1:B1BA C9 -  -  -  	ret
  375 D1:B1BB -  -  -  -  vxSinNegate:
  376 D1:B1BB 52 03 -  -  	inc.s	bc
  377 D1:B1BD 6F -  -  -  	ld	l, a
  378 D1:B1BE 4E -  -  -  	ld	c, (hl)
  379 D1:B1BF 24 -  -  -  	inc	h
  380 D1:B1C0 46 -  -  -  	ld	b, (hl)
  381 D1:B1C1 B7 -  -  -  	or	a, a
  382 D1:B1C2 ED 62 -  -  	sbc	hl, hl
  383 D1:B1C4 ED 42 -  -  	sbc	hl, bc
  384 D1:B1C6 C9 -  -  -  	ret
  385 D1:B1C7 -  -  -  -  vxQuatIndexZero:
  386 D1:B1C7 CB 4C -  -  	bit	1, h
  387 D1:B1C9 20 05 -  -  	jr	nz, vxQuatNegResultCst
  388 D1:B1CB 21 00 40 00 	ld	hl, $004000
  389 D1:B1CF C9 -  -  -  	ret
  390 D1:B1D0 -  -  -  -  vxQuatNegResultCst:
  391 D1:B1D0 21 00 C0 FF 	ld	hl, $FFC000
  392 D1:B1D4 C9 -  -  -  	ret
  393 D1:B1D5 -  -  -  -  
  394 D1:B1D5 -  -  -  -  vxSquareFP8:
  395 D1:B1D5 -  -  -  -  ; HL/256
  396 D1:B1D5 -  -  -  -  ; Destroy DE,A [16bits]
  397 D1:B1D5 -  -  -  -  ; (HxH*256+LxH*2+LxL/256)
  398 D1:B1D5 CB 7C -  -  	bit	7, h
  399 D1:B1D7 28 06 -  -  	jr	z, vxSqAbsSkp
  400 D1:B1D9 EB -  -  -  	ex	de, hl
  401 D1:B1DA B7 -  -  -  	or	a, a
  402 D1:B1DB ED 62 -  -  	sbc	hl, hl
  403 D1:B1DD ED 52 -  -  	sbc	hl, de
  404 D1:B1DF -  -  -  -  vxSqAbsSkp:
  405 D1:B1DF 54 -  -  -  	ld	d, h
  406 D1:B1E0 5D -  -  -  	ld	e, l
  407 D1:B1E1 6C -  -  -  	ld	l, h
  408 D1:B1E2 ED 6C -  -  	mlt	hl
  409 D1:B1E4 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxQuaternion.ez80"
  410 D1:B1EC 7B -  -  -  	ld	a, e
  411 D1:B1ED ED 5C -  -  	mlt	de
  412 D1:B1EF 19 -  -  -  	add	hl, de
  413 D1:B1F0 19 -  -  -  	add	hl, de
  414 D1:B1F1 5F -  -  -  	ld	e, a
  415 D1:B1F2 57 -  -  -  	ld	d, a
  416 D1:B1F3 ED 5C -  -  	mlt	de
  417 D1:B1F5 5A -  -  -  	ld	e, d
  418 D1:B1F6 16 00 -  -  	ld	d, 0
  419 D1:B1F8 19 -  -  -  	add	hl, de
  420 D1:B1F9 C9 -  -  -  	ret
  421 D1:B1FA -  -  -  -  vxMltFP8:
  422 D1:B1FA -  -  -  -  ; HLxDE/256 [16bits]
  423 D1:B1FA -  -  -  -  ; (HxD*256+LxD+ExH+LxE/256)
  424 D1:B1FA 44 -  -  -  	ld	b, h
  425 D1:B1FB 4D -  -  -  	ld	c, l
  426 D1:B1FC 6A -  -  -  	ld	l, d
  427 D1:B1FD ED 6C -  -  	mlt	hl
  428 D1:B1FF CB 78 -  -  	bit	7, b
  429 D1:B201 28 03 -  -  	jr	z, $+5
  430 D1:B203 B7 -  -  -  	or	a, a
  431 D1:B204 ED 52 -  -  	sbc	hl, de
  432 D1:B206 CB 7A -  -  	bit	7, d
  433 D1:B208 28 03 -  -  	jr	z, $+5
  434 D1:B20A B7 -  -  -  	or	a, a
  435 D1:B20B ED 42 -  -  	sbc	hl, bc
  436 D1:B20D 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxQuaternion.ez80"
  437 D1:B215 -  -  -  -  ; now need to do (CxD+BxE+ExC/256)
  438 D1:B215 79 -  -  -  	ld	a, c
  439 D1:B216 4B -  -  -  	ld	c, e
  440 D1:B217 ED 4C -  -  	mlt	bc
  441 D1:B219 09 -  -  -  	add	hl, bc
  442 D1:B21A 4F -  -  -  	ld	c, a
  443 D1:B21B 42 -  -  -  	ld	b, d
  444 D1:B21C ED 4C -  -  	mlt	bc
  445 D1:B21E 09 -  -  -  	add	hl, bc
  446 D1:B21F 4F -  -  -  	ld	c, a
  447 D1:B220 43 -  -  -  	ld	b, e
  448 D1:B221 ED 4C -  -  	mlt	bc
  449 D1:B223 48 -  -  -  	ld	c, b
  450 D1:B224 06 00 -  -  	ld	b, 0
  451 D1:B226 09 -  -  -  	add	hl, bc
  452 D1:B227 C9 -  -  -  	ret
  453 D1:B228 -  -  -  -  
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    5 D1:B228 -  -  -  -  #include	"vxVector.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxVector.ez80"
    1 D1:B228 -  -  -  -  ; code start - vector utility fonctions
    2 D1:B228 -  -  -  -  
    3 D1:B228 -  -  -  -  #define	xpd	call vxCrossProduct
    4 D1:B228 -  -  -  -  vxCrossProduct:
    5 D1:B228 -  -  -  -  ; (hl) = (ix) cross (iy)
    6 D1:B228 -  -  -  -  ; 774 TStates, 177 Bytes
    7 D1:B228 -  -  -  -  ; v1.y*v2.z-v1.z*v2.y
    8 D1:B228 -  -  -  -  ; v1.z*v2.x-v1.x*v2.z
    9 D1:B228 -  -  -  -  ; v1.x*v2.y-v1.y*v2.x
   10 D1:B228 EB -  -  -  	ex	de, hl
   11 D1:B229 -  -  -  -  ; v1.y
   12 D1:B229 DD 46 01 -  	ld	b, (ix+1)
   13 D1:B22C -  -  -  -  ; v2.z
   14 D1:B22C FD 4E 02 -  	ld	c, (iy+2)
   15 D1:B22F AF -  -  -  	xor	a, a
   16 D1:B230 ED 62 -  -  	sbc	hl, hl
   17 D1:B232 CB 78 -  -  	bit	7, b
   18 D1:B234 28 01 -  -  	jr	z, $+3
   19 D1:B236 81 -  -  -  	add	a, c
   20 D1:B237 CB 79 -  -  	bit	7, c
   21 D1:B239 28 01 -  -  	jr	z, $+3
   22 D1:B23B 80 -  -  -  	add	a, b
   23 D1:B23C ED 4C -  -  	mlt	bc
   24 D1:B23E 09 -  -  -  	add	hl, bc
   25 D1:B23F 47 -  -  -  	ld	b, a
   26 D1:B240 AF -  -  -  	xor	a, a
   27 D1:B241 4F -  -  -  	ld	c, a
   28 D1:B242 ED 42 -  -  	sbc	hl, bc
   29 D1:B244 -  -  -  -  ; v1.z
   30 D1:B244 DD 46 02 -  	ld	b, (ix+2)
   31 D1:B247 -  -  -  -  ; v2.y
   32 D1:B247 FD 4E 01 -  	ld	c, (iy+1)
   33 D1:B24A AF -  -  -  	xor	a, a
   34 D1:B24B CB 78 -  -  	bit	7, b
   35 D1:B24D 28 01 -  -  	jr	z, $+3
   36 D1:B24F 81 -  -  -  	add	a, c
   37 D1:B250 CB 79 -  -  	bit	7, c
   38 D1:B252 28 01 -  -  	jr	z, $+3
   39 D1:B254 80 -  -  -  	add	a, b
   40 D1:B255 ED 4C -  -  	mlt	bc
   41 D1:B257 B7 -  -  -  	or	a, a
   42 D1:B258 ED 42 -  -  	sbc	hl, bc
   43 D1:B25A 47 -  -  -  	ld	b, a
   44 D1:B25B AF -  -  -  	xor	a, a
   45 D1:B25C 4F -  -  -  	ld	c, a
   46 D1:B25D 09 -  -  -  	add	hl, bc
   47 D1:B25E 29 -  -  -  	add	hl, hl
   48 D1:B25F 29 -  -  -  	add	hl, hl
   49 D1:B260 7C -  -  -  	ld	a, h
   50 D1:B261 12 -  -  -  	ld	(de), a
   51 D1:B262 13 -  -  -  	inc	de
   52 D1:B263 -  -  -  -  ; v1.z
   53 D1:B263 DD 66 02 -  	ld	h, (ix+2)
   54 D1:B266 -  -  -  -  ; v2.x
   55 D1:B266 FD 6E 00 -  	ld	l, (iy+0)
   56 D1:B269 AF -  -  -  	xor	a, a
   57 D1:B26A CB 7C -  -  	bit	7, h
   58 D1:B26C 28 01 -  -  	jr	z, $+3
   59 D1:B26E 85 -  -  -  	add	a, l
   60 D1:B26F CB 7D -  -  	bit	7, l
   61 D1:B271 28 01 -  -  	jr	z, $+3
   62 D1:B273 84 -  -  -  	add	a, h
   63 D1:B274 ED 6C -  -  	mlt	hl
   64 D1:B276 47 -  -  -  	ld	b, a
   65 D1:B277 AF -  -  -  	xor	a, a
   66 D1:B278 4F -  -  -  	ld	c, a
   67 D1:B279 ED 42 -  -  	sbc	hl, bc
   68 D1:B27B -  -  -  -  ; v1.x
   69 D1:B27B DD 46 00 -  	ld	b, (ix+0)
   70 D1:B27E -  -  -  -  ; v2.z
   71 D1:B27E FD 4E 02 -  	ld	c, (iy+2)
   72 D1:B281 AF -  -  -  	xor	a, a
   73 D1:B282 CB 78 -  -  	bit	7, b
   74 D1:B284 28 01 -  -  	jr	z, $+3
   75 D1:B286 81 -  -  -  	add	a, c
   76 D1:B287 CB 79 -  -  	bit	7, c
   77 D1:B289 28 01 -  -  	jr	z, $+3
   78 D1:B28B 80 -  -  -  	add	a, b
   79 D1:B28C ED 4C -  -  	mlt	bc
   80 D1:B28E B7 -  -  -  	or	a, a
   81 D1:B28F ED 42 -  -  	sbc	hl, bc
   82 D1:B291 47 -  -  -  	ld	b, a
   83 D1:B292 AF -  -  -  	xor	a, a
   84 D1:B293 4F -  -  -  	ld	c, a
   85 D1:B294 09 -  -  -  	add	hl, bc
   86 D1:B295 29 -  -  -  	add	hl, hl
   87 D1:B296 29 -  -  -  	add	hl, hl
   88 D1:B297 7C -  -  -  	ld	a, h
   89 D1:B298 12 -  -  -  	ld	(de), a
   90 D1:B299 13 -  -  -  	inc	de
   91 D1:B29A -  -  -  -  ; v1.x
   92 D1:B29A DD 66 00 -  	ld	h, (ix+0)
   93 D1:B29D -  -  -  -  ; v2.y
   94 D1:B29D FD 6E 01 -  	ld	l, (iy+1)
   95 D1:B2A0 AF -  -  -  	xor	a, a
   96 D1:B2A1 CB 7C -  -  	bit	7, h
   97 D1:B2A3 28 01 -  -  	jr	z, $+3
   98 D1:B2A5 85 -  -  -  	add	a, l
   99 D1:B2A6 CB 7D -  -  	bit	7, l
  100 D1:B2A8 28 01 -  -  	jr	z, $+3
  101 D1:B2AA 84 -  -  -  	add	a, h
  102 D1:B2AB ED 6C -  -  	mlt	hl
  103 D1:B2AD 47 -  -  -  	ld	b, a
  104 D1:B2AE AF -  -  -  	xor	a, a
  105 D1:B2AF 4F -  -  -  	ld	c, a
  106 D1:B2B0 ED 42 -  -  	sbc	hl, bc
  107 D1:B2B2 -  -  -  -  ; v1.y
  108 D1:B2B2 DD 46 01 -  	ld	b, (ix+1)
  109 D1:B2B5 -  -  -  -  ; v2.x
  110 D1:B2B5 FD 4E 00 -  	ld	c, (iy+0)
  111 D1:B2B8 AF -  -  -  	xor	a, a
  112 D1:B2B9 CB 78 -  -  	bit	7, b
  113 D1:B2BB 28 01 -  -  	jr	z, $+3
  114 D1:B2BD 81 -  -  -  	add	a, c
  115 D1:B2BE CB 79 -  -  	bit	7, c
  116 D1:B2C0 28 01 -  -  	jr	z, $+3
  117 D1:B2C2 80 -  -  -  	add	a, b
  118 D1:B2C3 ED 4C -  -  	mlt	bc
  119 D1:B2C5 B7 -  -  -  	or	a, a
  120 D1:B2C6 ED 42 -  -  	sbc	hl, bc
  121 D1:B2C8 47 -  -  -  	ld	b, a
  122 D1:B2C9 AF -  -  -  	xor	a, a
  123 D1:B2CA 4F -  -  -  	ld	c, a
  124 D1:B2CB 09 -  -  -  	add	hl, bc
  125 D1:B2CC 29 -  -  -  	add	hl, hl
  126 D1:B2CD 29 -  -  -  	add	hl, hl
  127 D1:B2CE EB -  -  -  	ex	de, hl
  128 D1:B2CF 72 -  -  -  	ld	(hl), d
  129 D1:B2D0 2B -  -  -  	dec	hl
  130 D1:B2D1 2B -  -  -  	dec	hl
  131 D1:B2D2 C9 -  -  -  	ret
  132 D1:B2D3 -  -  -  -  #define	dp3	call vxDotProduct
  133 D1:B2D3 -  -  -  -  vxDotProduct:
  134 D1:B2D3 -  -  -  -  ; hl = (ix) dot (iy)
  135 D1:B2D3 DD 66 00 -  	ld	h, (ix+0)
  136 D1:B2D6 FD 6E 00 -  	ld	l, (iy+0)
  137 D1:B2D9 7C -  -  -  	ld	a, h
  138 D1:B2DA 17 -  -  -  	rla
  139 D1:B2DB 9F -  -  -  	sbc	a, a
  140 D1:B2DC A5 -  -  -  	and	l
  141 D1:B2DD 5F -  -  -  	ld	e, a
  142 D1:B2DE 7D -  -  -  	ld	a, l
  143 D1:B2DF 17 -  -  -  	rla
  144 D1:B2E0 9F -  -  -  	sbc	a, a
  145 D1:B2E1 A4 -  -  -  	and	h
  146 D1:B2E2 83 -  -  -  	add	a, e
  147 D1:B2E3 ED 6C -  -  	mlt	hl
  148 D1:B2E5 5F -  -  -  	ld	e, a
  149 D1:B2E6 DD 46 01 -  	ld	b, (ix+1)
  150 D1:B2E9 FD 4E 01 -  	ld	c, (iy+1)
  151 D1:B2EC 78 -  -  -  	ld	a, b
  152 D1:B2ED 17 -  -  -  	rla
  153 D1:B2EE 9F -  -  -  	sbc	a, a
  154 D1:B2EF A1 -  -  -  	and	c
  155 D1:B2F0 57 -  -  -  	ld	d, a
  156 D1:B2F1 79 -  -  -  	ld	a, c
  157 D1:B2F2 17 -  -  -  	rla
  158 D1:B2F3 9F -  -  -  	sbc	a, a
  159 D1:B2F4 A0 -  -  -  	and	b
  160 D1:B2F5 82 -  -  -  	add	a, d
  161 D1:B2F6 ED 4C -  -  	mlt	bc
  162 D1:B2F8 09 -  -  -  	add	hl, bc
  163 D1:B2F9 57 -  -  -  	ld	d, a
  164 D1:B2FA DD 46 02 -  	ld	b, (ix+2)
  165 D1:B2FD FD 4E 02 -  	ld	c, (iy+2)
  166 D1:B300 AF -  -  -  	xor	a, a
  167 D1:B301 CB 78 -  -  	bit	7, b
  168 D1:B303 28 01 -  -  	jr	z, $+3
  169 D1:B305 81 -  -  -  	add	a, c
  170 D1:B306 CB 79 -  -  	bit	7, c
  171 D1:B308 28 01 -  -  	jr	z, $+3
  172 D1:B30A 80 -  -  -  	add	a, b
  173 D1:B30B ED 4C -  -  	mlt	bc
  174 D1:B30D 09 -  -  -  	add	hl, bc
  175 D1:B30E 47 -  -  -  	ld	b, a
  176 D1:B30F AF -  -  -  	xor	a, a
  177 D1:B310 4F -  -  -  	ld	c, a
  178 D1:B311 ED 42 -  -  	sbc	hl, bc
  179 D1:B313 43 -  -  -  	ld	b, e
  180 D1:B314 ED 42 -  -  	sbc	hl, bc
  181 D1:B316 42 -  -  -  	ld	b, d
  182 D1:B317 ED 42 -  -  	sbc	hl, bc
  183 D1:B319 C9 -  -  -  	ret
  184 D1:B31A -  -  -  -  vxNormalize:
  185 D1:B31A C9 -  -  -  	ret
  186 D1:B31B -  -  -  -  vxLength:
  187 D1:B31B C9 -  -  -  	ret
  188 D1:B31C -  -  -  -  #define	rfl	call	vxReflect
  189 D1:B31C -  -  -  -  vxReflect:
  190 D1:B31C -  -  -  -  ; I = ix, N = iy, hl = result
  191 D1:B31C -  -  -  -  ; reflection direction I-2*dot(N,I)*N
  192 D1:B31C E5 -  -  -  	push	hl
  193 D1:B31D CD D3 B2 D1 	call	vxDotProduct
  194 D1:B321 29 -  -  -  	add	hl, hl
  195 D1:B322 29 -  -  -  	add	hl, hl
  196 D1:B323 29 -  -  -  	add	hl, hl
  197 D1:B324 -  -  -  -  ; scale N vector
  198 D1:B324 44 -  -  -  	ld	b, h
  199 D1:B325 D1 -  -  -  	pop	de
  200 D1:B326 FD 6E 00 -  	ld	l, (iy+0)
  201 D1:B329 7C -  -  -  	ld	a, h
  202 D1:B32A 17 -  -  -  	rla
  203 D1:B32B 9F -  -  -  	sbc	a, a
  204 D1:B32C A5 -  -  -  	and	l
  205 D1:B32D 4F -  -  -  	ld	c, a
  206 D1:B32E 7D -  -  -  	ld	a, l
  207 D1:B32F 17 -  -  -  	rla
  208 D1:B330 9F -  -  -  	sbc	a, a
  209 D1:B331 A4 -  -  -  	and	h
  210 D1:B332 81 -  -  -  	add	a, c
  211 D1:B333 4F -  -  -  	ld	c, a
  212 D1:B334 ED 6C -  -  	mlt	hl
  213 D1:B336 7C -  -  -  	ld	a, h
  214 D1:B337 91 -  -  -  	sub	c
  215 D1:B338 67 -  -  -  	ld	h, a
  216 D1:B339 29 -  -  -  	add	hl, hl
  217 D1:B33A 29 -  -  -  	add	hl, hl
  218 D1:B33B 4C -  -  -  	ld	c, h
  219 D1:B33C DD 7E 00 -  	ld	a, (ix+0)
  220 D1:B33F 91 -  -  -  	sub	a, c
  221 D1:B340 12 -  -  -  	ld	(de), a
  222 D1:B341 13 -  -  -  	inc	de
  223 D1:B342 -  -  -  -  
  224 D1:B342 60 -  -  -  	ld	h, b
  225 D1:B343 FD 6E 01 -  	ld	l, (iy+1)
  226 D1:B346 7C -  -  -  	ld	a, h
  227 D1:B347 17 -  -  -  	rla
  228 D1:B348 9F -  -  -  	sbc	a, a
  229 D1:B349 A5 -  -  -  	and	l
  230 D1:B34A 4F -  -  -  	ld	c, a
  231 D1:B34B 7D -  -  -  	ld	a, l
  232 D1:B34C 17 -  -  -  	rla
  233 D1:B34D 9F -  -  -  	sbc	a, a
  234 D1:B34E A4 -  -  -  	and	h
  235 D1:B34F 81 -  -  -  	add	a, c
  236 D1:B350 4F -  -  -  	ld	c, a
  237 D1:B351 ED 6C -  -  	mlt	hl
  238 D1:B353 7C -  -  -  	ld	a, h
  239 D1:B354 91 -  -  -  	sub	c
  240 D1:B355 67 -  -  -  	ld	h, a
  241 D1:B356 29 -  -  -  	add	hl, hl
  242 D1:B357 29 -  -  -  	add	hl, hl
  243 D1:B358 4C -  -  -  	ld	c, h
  244 D1:B359 DD 7E 01 -  	ld	a, (ix+1)
  245 D1:B35C 91 -  -  -  	sub	a, c
  246 D1:B35D 12 -  -  -  	ld	(de), a
  247 D1:B35E 13 -  -  -  	inc	de
  248 D1:B35F -  -  -  -  
  249 D1:B35F 60 -  -  -  	ld	h, b
  250 D1:B360 FD 6E 02 -  	ld	l, (iy+2)
  251 D1:B363 7C -  -  -  	ld	a, h
  252 D1:B364 17 -  -  -  	rla
  253 D1:B365 9F -  -  -  	sbc	a, a
  254 D1:B366 A5 -  -  -  	and	l
  255 D1:B367 4F -  -  -  	ld	c, a
  256 D1:B368 7D -  -  -  	ld	a, l
  257 D1:B369 17 -  -  -  	rla
  258 D1:B36A 9F -  -  -  	sbc	a, a
  259 D1:B36B A4 -  -  -  	and	h
  260 D1:B36C 81 -  -  -  	add	a, c
  261 D1:B36D 4F -  -  -  	ld	c, a
  262 D1:B36E ED 6C -  -  	mlt	hl
  263 D1:B370 7C -  -  -  	ld	a, h
  264 D1:B371 91 -  -  -  	sub	c
  265 D1:B372 67 -  -  -  	ld	h, a
  266 D1:B373 29 -  -  -  	add	hl, hl
  267 D1:B374 29 -  -  -  	add	hl, hl
  268 D1:B375 4C -  -  -  	ld	c, h
  269 D1:B376 DD 7E 02 -  	ld	a, (ix+2)
  270 D1:B379 91 -  -  -  	sub	a, c
  271 D1:B37A 12 -  -  -  	ld	(de), a
  272 D1:B37B C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    6 D1:B37C -  -  -  -  #include	"vxFramebuffer.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxFramebuffer.ez80"
    1 D1:B37C -  -  -  -  ; code start - framebuffer functions
    2 D1:B37C -  -  -  -  
    3 D1:B37C -  -  -  -  #define VX_FRAMEBUFFER_AUX0 $D40000	; first VRAM buffer
    4 D1:B37C -  -  -  -  #define VX_FRAMEBUFFER_AUX1 $D52C00	; second VRAM buffer
    5 D1:B37C -  -  -  -  #define VX_FRAMEBUFFER_SIZE $12C00
    6 D1:B37C -  -  -  -  #define VX_VRAM             $E30800
    7 D1:B37C -  -  -  -  #define VX_BPP8             lcdBpp8   ; LCD 8 bpp mode bits
    8 D1:B37C -  -  -  -  #define VX_BPP16            lcdBpp16	; LCD 16 bpp mode bits
    9 D1:B37C -  -  -  -  #define VX_LCD_CTRL         mpLcdCtrl	; LCD control port
   10 D1:B37C -  -  -  -  #define VX_LCD_IMSC         $E3001C	; LCD Interrupt Mask Register
   11 D1:B37C -  -  -  -  #define VX_LCD_ICR          $E30028	; LCD Interrupt Clear/Set Register
   12 D1:B37C -  -  -  -  #define VX_LCD_ISR          $E30020	; LCD Interrupt Status Register
   13 D1:B37C -  -  -  -  #define VX_LCD_BUFFER       $E30010	; base adress of LCD
   14 D1:B37C -  -  -  -  #define VX_LCD_PALETTE      mpLcdPalette ; palette (r3g3b2)
   15 D1:B37C -  -  -  -  #define VX_LCD_TIMING2      $E30008
   16 D1:B37C -  -  -  -  
   17 D1:B37C -  -  -  -  #define VX_GREEN_BITS	      %00000111
   18 D1:B37C -  -  -  -  #define VX_RED_BITS         %11100000
   19 D1:B37C -  -  -  -  #define VX_BLUE_BITS        %00011000
   20 D1:B37C -  -  -  -  #define VX_COLOR_LOW_BIT    %00101001
   21 D1:B37C -  -  -  -  
   22 D1:B37C -  -  -  -  #define vxFramebuffer       $E30014
   23 D1:B37C -  -  -  -  
   24 D1:B37C -  -  -  -  vxResetPalette:
   25 D1:B37C -  -  -  -  ; load palette :
   26 D1:B37C -  -  -  -  ; color is 3-3-2 format, RGB
   27 D1:B37C -  -  -  -  ; calculate 1555 format color
   28 D1:B37C 21 00 02 E3 	ld	hl,VX_LCD_PALETTE  ; palette mem
   29 D1:B380 06 00 -  -  	ld	b,0
   30 D1:B382 -  -  -  -  vxLoadPaletteLoop:      ; this loop is from wikiti
   31 D1:B382 50 -  -  -  	ld	d,b
   32 D1:B383 78 -  -  -  	ld	a,b
   33 D1:B384 E6 C0 -  -  	and	%11000000
   34 D1:B386 CB 3A -  -  	srl	d
   35 D1:B388 1F -  -  -  	rra
   36 D1:B389 5F -  -  -  	ld	e,a
   37 D1:B38A 3E 1F -  -  	ld	a,%00011111
   38 D1:B38C A0 -  -  -  	and	b
   39 D1:B38D B3 -  -  -  	or	e
   40 D1:B38E 77 -  -  -  	ld	(hl),a
   41 D1:B38F 23 -  -  -  	inc	hl
   42 D1:B390 72 -  -  -  	ld	(hl),d
   43 D1:B391 23 -  -  -  	inc	hl
   44 D1:B392 04 -  -  -  	inc	b
   45 D1:B393 20 ED -  -  	jr nz,vxLoadPaletteLoop
   46 D1:B395 C9 -  -  -  	ret
   47 D1:B396 -  -  -  -  vxSetPalette:
   48 D1:B396 -  -  -  -  ; set the framebuffer palette
   49 D1:B396 -  -  -  -  ; input : hl
   50 D1:B396 11 00 02 E3 	ld	de, VX_LCD_PALETTE
   51 D1:B39A 01 00 02 00 	ld	bc, 512
   52 D1:B39E ED B0 -  -  	ldir
   53 D1:B3A0 C9 -  -  -  	ret
   54 D1:B3A1 -  -  -  -  vxClearBuffer:
   55 D1:B3A1 -  -  -  -  ; reset framebuffer with color
   56 D1:B3A1 -  -  -  -  ; input : c
   57 D1:B3A1 -  -  -  -  ; output : none
   58 D1:B3A1 -  -  -  -  ; destroyed : all except ix,iy
   59 D1:B3A1 2A 14 00 E3 	ld	hl, (vxFramebuffer)
   60 D1:B3A5 71 -  -  -  	ld	(hl), c
   61 D1:B3A6 EB -  -  -  	ex	de, hl
   62 D1:B3A7 B7 -  -  -  	or	a, a
   63 D1:B3A8 ED 62 -  -  	sbc	hl, hl
   64 D1:B3AA 19 -  -  -  	add	hl, de
   65 D1:B3AB 13 -  -  -  	inc	de
   66 D1:B3AC 01 FF 2B 01 	ld	bc, 76799
   67 D1:B3B0 ED B0 -  -  	ldir
   68 D1:B3B2 C9 -  -  -  	ret
   69 D1:B3B3 -  -  -  -  vxFlushLCD:
   70 D1:B3B3 -  -  -  -  ; swap the framebuffer and synchronize with LCD
   71 D1:B3B3 2A 10 00 E3 	ld	hl, (VX_LCD_BUFFER) 
   72 D1:B3B7 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
   73 D1:B3BC 22 14 00 E3 	ld	(vxFramebuffer), hl
   74 D1:B3C0 ED 53 10 00 
              E3 -  -  -  	ld	(VX_LCD_BUFFER), de
   75 D1:B3C5 -  -  -  -  vxWaitLCD:
   76 D1:B3C5 -  -  -  -  ; wait until the LCD finish displaying the frame
   77 D1:B3C5 21 28 00 E3 	ld	hl, VX_LCD_ICR
   78 D1:B3C9 CB D6 -  -  	set	2, (hl)
   79 D1:B3CB 2E 20 -  -  	ld	l, VX_LCD_ISR&$FF
   80 D1:B3CD -  -  -  -  vxWaitLoop:
   81 D1:B3CD CB 56 -  -  	bit	2, (hl)
   82 D1:B3CF 28 FC -  -  	jr	z, vxWaitLoop
   83 D1:B3D1 C9 -  -  -  	ret
   84 D1:B3D2 -  -  -  -  vxSwapLCD:
   85 D1:B3D2 -  -  -  -  ; swap buffer without LCD acknowledge
   86 D1:B3D2 2A 10 00 E3 	ld	hl, (VX_LCD_BUFFER) 
   87 D1:B3D6 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
   88 D1:B3DB 22 14 00 E3 	ld	(vxFramebuffer), hl
   89 D1:B3DF ED 53 10 00 
              E3 -  -  -  	ld	(VX_LCD_BUFFER), de
   90 D1:B3E4 C9 -  -  -  	ret
   91 D1:B3E5 -  -  -  -  vxBlendRBG:
   92 D1:B3E5 -  -  -  -  ; blend color c and a
   93 D1:B3E5 -  -  -  -  ; destroy d and e
   94 D1:B3E5 57 -  -  -  	ld	d, a
   95 D1:B3E6 A1 -  -  -  	and	c
   96 D1:B3E7 E6 29 -  -  	and	VX_COLOR_LOW_BIT
   97 D1:B3E9 5F -  -  -  	ld	e, a
   98 D1:B3EA 7A -  -  -  	ld	a, d
   99 D1:B3EB E6 D6 -  -  	and	~VX_COLOR_LOW_BIT
  100 D1:B3ED 57 -  -  -  	ld	d, a
  101 D1:B3EE 79 -  -  -  	ld	a, c
  102 D1:B3EF E6 D6 -  -  	and	~VX_COLOR_LOW_BIT
  103 D1:B3F1 82 -  -  -  	add	a, d
  104 D1:B3F2 1F -  -  -  	rra
  105 D1:B3F3 83 -  -  -  	add	a, e
  106 D1:B3F4 C9 -  -  -  	ret
  107 D1:B3F5 -  -  -  -  vxLitRBG:
  108 D1:B3F5 -  -  -  -  ; lit a color (c) by factor (a) (0-63::255)
  109 D1:B3F5 -  -  -  -  ; destroy bc, hl
  110 D1:B3F5 47 -  -  -  	ld	b, a
  111 D1:B3F6 79 -  -  -  	ld	a, c
  112 D1:B3F7 E6 07 -  -  	and	VX_GREEN_BITS
  113 D1:B3F9 6F -  -  -  	ld	l, a
  114 D1:B3FA 60 -  -  -  	ld	h, b
  115 D1:B3FB ED 6C -  -  	mlt	hl
  116 D1:B3FD 29 -  -  -  	add	hl, hl
  117 D1:B3FE 29 -  -  -  	add	hl, hl
  118 D1:B3FF 7C -  -  -  	ld	a, h
  119 D1:B400 ED 64 F8 -  	tst	a, %11111000
  120 D1:B403 28 02 -  -  	jr	z, $+4
  121 D1:B405 26 07 -  -  	ld	h, VX_GREEN_BITS
  122 D1:B407 79 -  -  -  	ld	a, c
  123 D1:B408 E6 18 -  -  	and	VX_BLUE_BITS
  124 D1:B40A 6F -  -  -  	ld	l, a
  125 D1:B40B 7C -  -  -  	ld	a, h
  126 D1:B40C 60 -  -  -  	ld	h, b
  127 D1:B40D ED 6C -  -  	mlt	hl
  128 D1:B40F 29 -  -  -  	add	hl, hl
  129 D1:B410 29 -  -  -  	add	hl, hl
  130 D1:B411 6F -  -  -  	ld	l, a
  131 D1:B412 7C -  -  -  	ld	a, h
  132 D1:B413 ED 64 E0 -  	tst	a, %11100000
  133 D1:B416 28 02 -  -  	jr	z, $+4
  134 D1:B418 3E 18 -  -  	ld	a, VX_BLUE_BITS
  135 D1:B41A E6 18 -  -  	and	VX_BLUE_BITS
  136 D1:B41C B5 -  -  -  	or	l
  137 D1:B41D 60 -  -  -  	ld	h, b
  138 D1:B41E 47 -  -  -  	ld	b, a
  139 D1:B41F 79 -  -  -  	ld	a, c
  140 D1:B420 E6 E0 -  -  	and	VX_RED_BITS
  141 D1:B422 6F -  -  -  	ld	l, a
  142 D1:B423 ED 6C -  -  	mlt	hl
  143 D1:B425 7C -  -  -  	ld	a, h
  144 D1:B426 ED 64 C0 -  	tst	a, %11000000
  145 D1:B429 28 02 -  -  	jr	z, $+4
  146 D1:B42B 26 38 -  -  	ld	h, VX_RED_BITS>>2
  147 D1:B42D 29 -  -  -  	add	hl, hl
  148 D1:B42E 29 -  -  -  	add	hl, hl
  149 D1:B42F 7C -  -  -  	ld	a, h
  150 D1:B430 E6 E0 -  -  	and	VX_RED_BITS
  151 D1:B432 B0 -  -  -  	or	b
  152 D1:B433 C9 -  -  -  	ret
  153 D1:B434 -  -  -  -  vxLerpRBG:
  154 D1:B434 -  -  -  -  ; 452 TStates
  155 D1:B434 E5 -  -  -  	push	hl
  156 D1:B435 46 -  -  -  	ld	b, (hl)
  157 D1:B436 -  -  -  -  ; b,c,e
  158 D1:B436 5F -  -  -  	ld	e, a
  159 D1:B437 78 -  -  -  	ld	a, b
  160 D1:B438 E6 07 -  -  	and	VX_GREEN_BITS	
  161 D1:B43A 67 -  -  -  	ld	h, a
  162 D1:B43B 79 -  -  -  	ld	a, c
  163 D1:B43C E6 07 -  -  	and	VX_GREEN_BITS
  164 D1:B43E 94 -  -  -  	sub	h
  165 D1:B43F 30 02 -  -  	jr	nc, $+4
  166 D1:B441 2F -  -  -  	cpl
  167 D1:B442 3C -  -  -  	inc	a
  168 D1:B443 67 -  -  -  	ld	h, a
  169 D1:B444 6B -  -  -  	ld	l, e
  170 D1:B445 -  -  -  -  ; convert flag
  171 D1:B445 9F -  -  -  	sbc	a, a
  172 D1:B446 B7 -  -  -  	or	a, a
  173 D1:B447 -  -  -  -  ; c=nz, nc=z
  174 D1:B447 ED 6C -  -  	mlt	hl
  175 D1:B449 29 -  -  -  	add	hl, hl
  176 D1:B44A 29 -  -  -  	add	hl, hl
  177 D1:B44B 7C -  -  -  	ld	a, h
  178 D1:B44C 28 02 -  -  	jr	z, $+4
  179 D1:B44E ED 44 -  -  	neg	
  180 D1:B450 67 -  -  -  	ld	h, a
  181 D1:B451 78 -  -  -  	ld	a, b
  182 D1:B452 E6 07 -  -  	and	VX_GREEN_BITS
  183 D1:B454 84 -  -  -  	add	a, h
  184 D1:B455 57 -  -  -  	ld	d, a
  185 D1:B456 -  -  -  -  ; 138
  186 D1:B456 78 -  -  -  	ld	a, b
  187 D1:B457 E6 18 -  -  	and	VX_BLUE_BITS
  188 D1:B459 67 -  -  -  	ld	h, a
  189 D1:B45A 79 -  -  -  	ld	a, c
  190 D1:B45B E6 18 -  -  	and	VX_BLUE_BITS
  191 D1:B45D 94 -  -  -  	sub	h
  192 D1:B45E 30 02 -  -  	jr	nc, $+4
  193 D1:B460 2F -  -  -  	cpl
  194 D1:B461 3C -  -  -  	inc	a
  195 D1:B462 67 -  -  -  	ld	h, a
  196 D1:B463 6B -  -  -  	ld	l, e
  197 D1:B464 ED 6C -  -  	mlt	hl
  198 D1:B466 CB 14 -  -  	rl	h	; push down carry flag	
  199 D1:B468 29 -  -  -  	add	hl, hl
  200 D1:B469 7C -  -  -  	ld	a, h
  201 D1:B46A E6 18 -  -  	and	VX_BLUE_BITS
  202 D1:B46C CB 4C -  -  	bit	1, h
  203 D1:B46E 28 02 -  -  	jr	z, $+4
  204 D1:B470 ED 44 -  -  	neg
  205 D1:B472 67 -  -  -  	ld	h, a
  206 D1:B473 78 -  -  -  	ld	a, b
  207 D1:B474 E6 18 -  -  	and	VX_BLUE_BITS
  208 D1:B476 84 -  -  -  	add	a, h
  209 D1:B477 B2 -  -  -  	or	d
  210 D1:B478 57 -  -  -  	ld	d, a
  211 D1:B479 -  -  -  -  ; 280
  212 D1:B479 78 -  -  -  	ld	a, b
  213 D1:B47A E6 E0 -  -  	and	VX_RED_BITS
  214 D1:B47C 67 -  -  -  	ld	h, a
  215 D1:B47D 79 -  -  -  	ld	a, c
  216 D1:B47E E6 E0 -  -  	and	VX_RED_BITS
  217 D1:B480 94 -  -  -  	sub	h
  218 D1:B481 30 02 -  -  	jr	nc, $+4
  219 D1:B483 2F -  -  -  	cpl
  220 D1:B484 3C -  -  -  	inc	a ; neg, put different flag output
  221 D1:B485 67 -  -  -  	ld	h, a
  222 D1:B486 6B -  -  -  	ld	l, e
  223 D1:B487 ED 6C -  -  	mlt	hl
  224 D1:B489 CB 14 -  -  	rl	h ; push down carry flag
  225 D1:B48B 7C -  -  -  	ld	a, h
  226 D1:B48C E6 70 -  -  	and	VX_RED_BITS>>1
  227 D1:B48E CB 44 -  -  	bit	0, h
  228 D1:B490 28 02 -  -  	jr	z, $+4
  229 D1:B492 ED 44 -  -  	neg
  230 D1:B494 67 -  -  -  	ld	h, a
  231 D1:B495 78 -  -  -  	ld	a, b
  232 D1:B496 1F -  -  -  	rra
  233 D1:B497 E6 70 -  -  	and	VX_RED_BITS>>1
  234 D1:B499 84 -  -  -  	add	a, h
  235 D1:B49A CB 27 -  -  	sla	a
  236 D1:B49C B2 -  -  -  	or	d
  237 D1:B49D E1 -  -  -  	pop	hl
  238 D1:B49E C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    7 D1:B49F -  -  -  -  #include	"vxClipping.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxClipping.ez80"
    1 D1:B49F -  -  -  -  #define  vxPlaneBit0             %10000000
    2 D1:B49F -  -  -  -  #define  vxPlaneBit1             %01000000
    3 D1:B49F -  -  -  -  #define  vxPlaneBit2             %00100000
    4 D1:B49F -  -  -  -  #define  vxPlaneBit3             %00010000
    5 D1:B49F -  -  -  -  #define  vxPlaneBit4             %00001000
    6 D1:B49F -  -  -  -  #define  vxVertexDirty           %11111111
    7 D1:B49F -  -  -  -  ;;#define  VX_CLIP_EPSILON        	32
    8 D1:B49F -  -  -  -  #define  VX_MAX_TMP_VERTEX       8
    9 D1:B49F -  -  -  -  #define  VX_MAX_PATCH_SIZE       16
   10 D1:B49F -  -  -  -  #define  VX_SCREEN_WIDTH         320
   11 D1:B49F -  -  -  -  #define  VX_SCREEN_HEIGHT        240
   12 D1:B49F -  -  -  -  #define  VX_SCREEN_WCENTER       160
   13 D1:B49F -  -  -  -  #define  VX_SCREEN_HCENTER       120
   14 D1:B49F -  -  -  -  
   15 D1:B49F -  -  -  -  VX_PATCH_INPUT:
   16 D1:B49F 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.fill	64
   17 D1:B4DF -  -  -  -  VX_PATCH_OUTPUT:
   18 D1:B4DF 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.fill	64
   19 D1:B51F -  -  -  -  VX_VERTEX_POOL:
   20 D1:B51F 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.fill	128
   21 D1:B59F -  -  -  -  vxNewSize:
   22 D1:B59F 00 -  -  -  	.db	0
   23 D1:B5A0 -  -  -  -  vxVertexAdress:
   24 D1:B5A0 00 00 00 -  	.dl	0
   25 D1:B5A3 -  -  -  -  VX_CLIP_VERTEX0:
   26 D1:B5A3 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 -  -  	.dl	0,0,0,0,0,0
   27 D1:B5B5 -  -  -  -  VX_CLIP_VERTEX1:
   28 D1:B5B5 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 -  -  	.dl	0,0,0,0,0,0
   29 D1:B5C7 -  -  -  -  vxMixWrite:
   30 D1:B5C7 00 00 00 00 	.db	0,0,0,0
   31 D1:B5CB -  -  -  -  
   32 D1:B5CB -  -  -  -  vxClipTriangle:
   33 D1:B5CB FD 22 54 B6 
              D1 -  -  -  	ld	(vxClipDraw), iy
   34 D1:B5D0 FD 21 DF B4 
              D1 -  -  -  	ld	iy, VX_PATCH_OUTPUT
   35 D1:B5D5 FD 1F 00 -  	ld	(iy+0), de
   36 D1:B5D8 FD 2F 03 -  	ld	(iy+3), hl
   37 D1:B5DB FD 0F 06 -  	ld	(iy+6), bc
   38 D1:B5DE FD 1F 09 -  	ld	(iy+9), de
   39 D1:B5E1 21 1F B5 D1 	ld	hl, VX_VERTEX_POOL
   40 D1:B5E5 22 A0 B5 D1 	ld	(vxVertexAdress), hl
   41 D1:B5E9 -  -  -  -  
   42 D1:B5E9 06 03 -  -  	ld	b, 3
   43 D1:B5EB -  -  -  -  
   44 D1:B5EB ED 64 80 -  	tst	a, %10000000
   45 D1:B5EE 28 0D -  -  	jr	z, vxNextPlane0
   46 D1:B5F0 F5 -  -  -  	push	af
   47 D1:B5F1 3E 80 -  -  	ld	a, %10000000
   48 D1:B5F3 DD 21 D5 B7 
              D1 -  -  -  	ld	ix, vxRightDistance
   49 D1:B5F8 CD 5B B6 D1 	call	vxClipPlanePolygon
   50 D1:B5FC F1 -  -  -  	pop	af
   51 D1:B5FD -  -  -  -  vxNextPlane0:
   52 D1:B5FD ED 64 40 -  	tst	a, %01000000
   53 D1:B600 28 0D -  -  	jr	z, vxNextPlane1
   54 D1:B602 F5 -  -  -  	push	af
   55 D1:B603 3E 40 -  -  	ld	a, %01000000
   56 D1:B605 DD 21 E8 B7 
              D1 -  -  -  	ld	ix, vxLeftDistance
   57 D1:B60A CD 5B B6 D1 	call	vxClipPlanePolygon
   58 D1:B60E F1 -  -  -  	pop	af
   59 D1:B60F -  -  -  -  vxNextPlane1:
   60 D1:B60F ED 64 20 -  	tst	a, %00100000
   61 D1:B612 28 0D -  -  	jr	z, vxNextPlane2
   62 D1:B614 F5 -  -  -  	push	af
   63 D1:B615 3E 20 -  -  	ld	a, %00100000
   64 D1:B617 DD 21 F9 B7 
              D1 -  -  -  	ld	ix, vxDownDistance
   65 D1:B61C CD 5B B6 D1 	call	vxClipPlanePolygon
   66 D1:B620 F1 -  -  -  	pop	af
   67 D1:B621 -  -  -  -  vxNextPlane2:
   68 D1:B621 ED 64 10 -  	tst	a, %00010000
   69 D1:B624 28 0D -  -  	jr	z, vxClipEnd
   70 D1:B626 F5 -  -  -  	push	af
   71 D1:B627 3E 10 -  -  	ld	a, %00010000
   72 D1:B629 DD 21 09 B8 
              D1 -  -  -  	ld	ix, vxUpDistance
   73 D1:B62E CD 5B B6 D1 	call	vxClipPlanePolygon
   74 D1:B632 F1 -  -  -  	pop	af
   75 D1:B633 -  -  -  -  vxClipEnd:
   76 D1:B633 -  -  -  -  
   77 D1:B633 78 -  -  -  	ld	a, b
   78 D1:B634 FE 03 -  -  	cp	a, 3
   79 D1:B636 D8 -  -  -  	ret	c	; preventive quit
   80 D1:B637 F5 -  -  -  	push	af
   81 D1:B638 FD E5 -  -  	push	iy
   82 D1:B63A ED 54 00 -  	lea	ix, iy+0
   83 D1:B63D -  -  -  -  vxClipLoop:
   84 D1:B63D C5 -  -  -  	push	bc
   85 D1:B63E DD 31 00 -  	ld	iy, (ix+0)
   86 D1:B641 FD 7E 00 -  	ld	a, (iy+0)
   87 D1:B644 E6 01 -  -  	and	$01
   88 D1:B646 C4 F4 B8 D1 	call	nz, vxClipDivide
   89 D1:B64A C1 -  -  -  	pop	bc
   90 D1:B64B ED 32 03 -  	lea	ix, ix+3
   91 D1:B64E 10 ED -  -  	djnz	vxClipLoop
   92 D1:B650 FD E1 -  -  	pop	iy
   93 D1:B652 F1 -  -  -  	pop	af
   94 D1:B653 -  -  -  -  vxClipDraw=$+1
   95 D1:B653 C3 00 00 00 	jp	$000000
   96 D1:B657 -  -  -  -  vxClipDistance:
   97 D1:B657 -  -  -  -  CALL=$+1
   98 D1:B657 C3 00 00 00 	jp	$000000
   99 D1:B65B -  -  -  -  vxClipPlanePolygon:
  100 D1:B65B -  -  -  -  ; don't destroy bc
  101 D1:B65B -  -  -  -  ; input : iy list, b:size,ix:dcall, a:mask
  102 D1:B65B -  -  -  -  ; ouput : iy newlist, b:newsize
  103 D1:B65B 32 97 B6 D1 	ld	(vxMM0), a
  104 D1:B65F 32 9F B6 D1 	ld	(vxMM1), a
  105 D1:B663 32 C2 B6 D1 	ld	(vxMM2), a
  106 D1:B667 AF -  -  -  	xor	a
  107 D1:B668 32 9F B5 D1 	ld	(vxNewSize), a
  108 D1:B66C 78 -  -  -  	ld	a, b
  109 D1:B66D B7 -  -  -  	or	a, a
  110 D1:B66E C8 -  -  -  	ret	z
  111 D1:B66F DD 22 58 B6 
              D1 -  -  -  	ld	(CALL), ix
  112 D1:B674 -  -  -  -  
  113 D1:B674 04 -  -  -  	inc	b
  114 D1:B675 0E 03 -  -  	ld	c, 3
  115 D1:B677 ED 4C -  -  	mlt	bc	; size of copy
  116 D1:B679 ED 23 00 -  	lea	hl, iy
  117 D1:B67C 11 9F B4 D1 	ld	de, VX_PATCH_INPUT
  118 D1:B680 ED B0 -  -  	ldir
  119 D1:B682 -  -  -  -  ; parse through VX_PATCH_INPUT, output is VX_PATCH_OUTPUT
  120 D1:B682 47 -  -  -  	ld	b, a
  121 D1:B683 FD 21 9F B4 
              D1 -  -  -  	ld	iy, VX_PATCH_INPUT
  122 D1:B688 DD 21 DF B4 
              D1 -  -  -  	ld	ix, VX_PATCH_OUTPUT
  123 D1:B68D -  -  -  -  vxClipSutherHodgmanLoop:
  124 D1:B68D C5 -  -  -  	push	bc
  125 D1:B68E FD 27 00 -  	ld	hl, (iy+0)
  126 D1:B691 FD 17 03 -  	ld	de, (iy+3)
  127 D1:B694 1A -  -  -  	ld	a, (de)
  128 D1:B695 A6 -  -  -  	and	(hl)
  129 D1:B696 -  -  -  -  vxMM0=$+1
  130 D1:B696 E6 00 -  -  	and	0
  131 D1:B698 C2 B2 B7 D1 	jp	nz, vxClipContinueX
  132 D1:B69C 1A -  -  -  	ld	a, (de)
  133 D1:B69D B6 -  -  -  	or	(hl)
  134 D1:B69E -  -  -  -  vxMM1=$+1
  135 D1:B69E E6 00 -  -  	and	0
  136 D1:B6A0 20 13 -  -  	jr	nz, vxClipCheck0
  137 D1:B6A2 DD 2F 00 -  	ld	(ix+0), hl		; both point out, copy v0
  138 D1:B6A5 ED 32 03 -  	lea	ix, ix+3
  139 D1:B6A8 3A 9F B5 D1 	ld	a, (vxNewSize)
  140 D1:B6AC 3C -  -  -  	inc	a
  141 D1:B6AD 32 9F B5 D1 	ld	(vxNewSize), a
  142 D1:B6B1 C3 B2 B7 D1 	jp	vxClipContinueX
  143 D1:B6B5 -  -  -  -  vxClipCheck0:
  144 D1:B6B5 7E -  -  -  	ld	a, (hl)
  145 D1:B6B6 DD E5 -  -  	push	ix
  146 D1:B6B8 CD 57 B6 D1 	call	vxClipDistance
  147 D1:B6BC EB -  -  -  	ex	de, hl	; distance 0
  148 D1:B6BD CD 57 B6 D1 	call	vxClipDistance
  149 D1:B6C1 -  -  -  -  vxMM2=$+1
  150 D1:B6C1 E6 00 -  -  	and	0
  151 D1:B6C3 F5 -  -  -  	push	af	; is edge leaving
  152 D1:B6C4 -  -  -  -  
  153 D1:B6C4 E5 -  -  -  	push	hl
  154 D1:B6C5 B7 -  -  -  	or	a, a
  155 D1:B6C6 ED 52 -  -  	sbc	hl, de	; d0/(d0-d1)
  156 D1:B6C8 D1 -  -  -  	pop	de
  157 D1:B6C9 EB -  -  -  	ex	de, hl
  158 D1:B6CA CD 6E B8 D1 	call	vxClipFactor
  159 D1:B6CE -  -  -  -  
  160 D1:B6CE FD 31 03 -  	ld	ix, (iy+3)
  161 D1:B6D1 DD 17 0D -  	ld	de, (ix+VX_VERTEX_RZ)
  162 D1:B6D4 FD 31 00 -  	ld	ix, (iy+0)
  163 D1:B6D7 DD 27 0D -  	ld	hl, (ix+VX_VERTEX_RZ)
  164 D1:B6DA CD 27 B8 D1 	call	vxClipMixWord
  165 D1:B6DE 22 B0 B5 D1 	ld	(VX_CLIP_VERTEX0+VX_VERTEX_RZ), hl
  166 D1:B6E2 -  -  -  -  
  167 D1:B6E2 FD 31 03 -  	ld	ix, (iy+3)
  168 D1:B6E5 DD 17 07 -  	ld	de, (ix+VX_VERTEX_RX)
  169 D1:B6E8 FD 31 00 -  	ld	ix, (iy+0)
  170 D1:B6EB DD 27 07 -  	ld	hl, (ix+VX_VERTEX_RX)
  171 D1:B6EE CD 27 B8 D1 	call	vxClipMixWord
  172 D1:B6F2 22 AA B5 D1 	ld	(VX_CLIP_VERTEX0+VX_VERTEX_RX), hl
  173 D1:B6F6 -  -  -  -  
  174 D1:B6F6 FD 31 03 -  	ld	ix, (iy+3)
  175 D1:B6F9 DD 17 0A -  	ld	de, (ix+VX_VERTEX_RY)
  176 D1:B6FC FD 31 00 -  	ld	ix, (iy+0)
  177 D1:B6FF DD 27 0A -  	ld	hl, (ix+VX_VERTEX_RY)
  178 D1:B702 CD 27 B8 D1 	call	vxClipMixWord
  179 D1:B706 22 AD B5 D1 	ld	(VX_CLIP_VERTEX0+VX_VERTEX_RY), hl
  180 D1:B70A -  -  -  -  
  181 D1:B70A 11 00 00 00 	ld	de, 0
  182 D1:B70E FD 31 03 -  	ld	ix, (iy+3)
  183 D1:B711 DD 5E 04 -  	ld	e, (ix+VX_VERTEX_GPR0)
  184 D1:B714 FD 31 00 -  	ld	ix, (iy+0)
  185 D1:B717 DD 56 04 -  	ld	d, (ix+VX_VERTEX_GPR0)
  186 D1:B71A -  -  -  -  	;;call	vxClipMixByte
  187 D1:B71A 7A -  -  -  	ld	a, d
  188 D1:B71B 93 -  -  -  	sub	e
  189 D1:B71C 6F -  -  -  	ld	l, a
  190 D1:B71D 60 -  -  -  	ld	h, b
  191 D1:B71E ED 6C -  -  	mlt	hl
  192 D1:B720 30 03 -  -  	jr	nc, $+5
  193 D1:B722 7C -  -  -  	ld	a, h
  194 D1:B723 90 -  -  -  	sub	b
  195 D1:B724 67 -  -  -  	ld	h, a
  196 D1:B725 53 -  -  -  	ld	d, e
  197 D1:B726 1E 00 -  -  	ld	e, 0
  198 D1:B728 19 -  -  -  	add	hl, de
  199 D1:B729 7C -  -  -  	ld	a, h
  200 D1:B72A -  -  -  -  
  201 D1:B72A 32 A7 B5 D1 	ld	(VX_CLIP_VERTEX0+VX_VERTEX_GPR0), a
  202 D1:B72E -  -  -  -  
  203 D1:B72E FD 31 03 -  	ld	ix, (iy+3)
  204 D1:B731 DD 5E 05 -  	ld	e, (ix+VX_VERTEX_GPR1)
  205 D1:B734 FD 31 00 -  	ld	ix, (iy+0)
  206 D1:B737 DD 56 05 -  	ld	d, (ix+VX_VERTEX_GPR1)
  207 D1:B73A -  -  -  -  	;call	vxClipMixByte
  208 D1:B73A -  -  -  -  
  209 D1:B73A 7A -  -  -  	ld	a, d
  210 D1:B73B 93 -  -  -  	sub	e
  211 D1:B73C 6F -  -  -  	ld	l, a
  212 D1:B73D 60 -  -  -  	ld	h, b
  213 D1:B73E ED 6C -  -  	mlt	hl
  214 D1:B740 30 03 -  -  	jr	nc, $+5
  215 D1:B742 7C -  -  -  	ld	a, h
  216 D1:B743 90 -  -  -  	sub	b
  217 D1:B744 67 -  -  -  	ld	h, a
  218 D1:B745 53 -  -  -  	ld	d, e
  219 D1:B746 1E 00 -  -  	ld	e, 0
  220 D1:B748 19 -  -  -  	add	hl, de
  221 D1:B749 7C -  -  -  	ld	a, h
  222 D1:B74A -  -  -  -  
  223 D1:B74A 32 A8 B5 D1 	ld	(VX_CLIP_VERTEX0+VX_VERTEX_GPR1), a
  224 D1:B74E -  -  -  -  
  225 D1:B74E DD 21 A3 B5 
              D1 -  -  -  	ld	ix, VX_CLIP_VERTEX0+0
  226 D1:B753 CD D4 B9 D1 	call	vxClipFrustrumCode
  227 D1:B757 F6 01 -  -  	or	a, $01
  228 D1:B759 DD 77 00 -  	ld	(ix+0), a
  229 D1:B75C -  -  -  -  
  230 D1:B75C -  -  -  -  ; do specific edge shift here
  231 D1:B75C F1 -  -  -  	pop	af
  232 D1:B75D DD E1 -  -  	pop	ix
  233 D1:B75F -  -  -  -  
  234 D1:B75F C2 8F B7 D1 	jp	nz, vxEdgeRentring
  235 D1:B763 -  -  -  -  ; edge leaving
  236 D1:B763 -  -  -  -  ; copy clip vertex, output both v0 and intersection
  237 D1:B763 FD 27 00 -  	ld	hl, (iy+0)
  238 D1:B766 DD 2F 00 -  	ld	(ix+0), hl
  239 D1:B769 21 A3 B5 D1 	ld	hl, VX_CLIP_VERTEX0
  240 D1:B76D ED 5B A0 B5 
              D1 -  -  -  	ld	de, (vxVertexAdress)
  241 D1:B772 DD 1F 03 -  	ld	(ix+3), de
  242 D1:B775 01 10 00 00 	ld	bc, 16
  243 D1:B779 ED B0 -  -  	ldir
  244 D1:B77B ED 53 A0 B5 
              D1 -  -  -  	ld	(vxVertexAdress), de
  245 D1:B780 ED 32 06 -  	lea	ix, ix+6
  246 D1:B783 3A 9F B5 D1 	ld	a, (vxNewSize)
  247 D1:B787 C6 02 -  -  	add	a, 2
  248 D1:B789 32 9F B5 D1 	ld	(vxNewSize), a
  249 D1:B78D 18 23 -  -  	jr	vxClipContinueX
  250 D1:B78F -  -  -  -  vxEdgeRentring:
  251 D1:B78F -  -  -  -  ; copy clip vertex, output intersection
  252 D1:B78F 21 A3 B5 D1 	ld	hl, VX_CLIP_VERTEX0
  253 D1:B793 ED 5B A0 B5 
              D1 -  -  -  	ld	de, (vxVertexAdress)
  254 D1:B798 DD 1F 00 -  	ld	(ix+0), de
  255 D1:B79B 01 10 00 00 	ld	bc, 16
  256 D1:B79F ED B0 -  -  	ldir
  257 D1:B7A1 ED 53 A0 B5 
              D1 -  -  -  	ld	(vxVertexAdress), de
  258 D1:B7A6 ED 32 03 -  	lea	ix, ix+3
  259 D1:B7A9 3A 9F B5 D1 	ld	a, (vxNewSize)
  260 D1:B7AD 3C -  -  -  	inc	a
  261 D1:B7AE 32 9F B5 D1 	ld	(vxNewSize), a
  262 D1:B7B2 -  -  -  -  vxClipContinueX:
  263 D1:B7B2 ED 33 03 -  	lea	iy, iy+3
  264 D1:B7B5 C1 -  -  -  	pop	bc
  265 D1:B7B6 05 -  -  -  	dec	b
  266 D1:B7B7 C2 8D B6 D1 	jp	nz, vxClipSutherHodgmanLoop
  267 D1:B7BB 3A 9F B5 D1 	ld	a, (vxNewSize)
  268 D1:B7BF 47 -  -  -  	ld	b, a
  269 D1:B7C0 FD 21 DF B4 
              D1 -  -  -  	ld	iy, VX_PATCH_OUTPUT
  270 D1:B7C5 -  -  -  -  ; make output cyclic
  271 D1:B7C5 FD 27 00 -  	ld	hl, (iy+0)
  272 D1:B7C8 DD 2F 00 -  	ld	(ix+0), hl
  273 D1:B7CB -  -  -  -  ; important is iy = new patch
  274 D1:B7CB C9 -  -  -  	ret
  275 D1:B7CC -  -  -  -  vxZDistance:
  276 D1:B7CC 01 0D 00 00 	ld	bc, VX_VERTEX_RZ
  277 D1:B7D0 09 -  -  -  	add	hl, bc
  278 D1:B7D1 ED 27 -  -  	ld	hl, (hl)
  279 D1:B7D3 2B -  -  -  	dec	hl
  280 D1:B7D4 C9 -  -  -  	ret
  281 D1:B7D5 -  -  -  -  vxRightDistance:
  282 D1:B7D5 -  -  -  -  tRT:
  283 D1:B7D5 -  -  -  -  ;1000
  284 D1:B7D5 -  -  -  -  ; input hl, test for X>Z
  285 D1:B7D5 01 07 00 00 	ld	bc, VX_VERTEX_RX
  286 D1:B7D9 09 -  -  -  	add	hl, bc
  287 D1:B7DA ED 07 -  -  	ld	bc, (hl)
  288 D1:B7DC 23 23 23 -  	inc	hl \ inc hl \ inc hl
  289 D1:B7DF 23 23 23 -  	inc	hl \ inc hl \ inc hl
  290 D1:B7E2 ED 27 -  -  	ld	hl, (hl)
  291 D1:B7E4 B7 -  -  -  	or	a, a
  292 D1:B7E5 ED 42 -  -  	sbc	hl, bc	;Z-X, if > ; R<0
  293 D1:B7E7 C9 -  -  -  	ret
  294 D1:B7E8 -  -  -  -  vxLeftDistance:
  295 D1:B7E8 -  -  -  -  ttLT:
  296 D1:B7E8 -  -  -  -  ; 0100
  297 D1:B7E8 01 07 00 00 	ld	bc, VX_VERTEX_RX
  298 D1:B7EC 09 -  -  -  	add	hl, bc
  299 D1:B7ED ED 07 -  -  	ld	bc, (hl)
  300 D1:B7EF 23 23 23 -  	inc	hl \ inc hl \ inc hl
  301 D1:B7F2 23 23 23 -  	inc	hl \ inc hl \ inc hl
  302 D1:B7F5 ED 27 -  -  	ld	hl, (hl)
  303 D1:B7F7 09 -  -  -  	add	hl, bc
  304 D1:B7F8 C9 -  -  -  	ret
  305 D1:B7F9 -  -  -  -  vxDownDistance:
  306 D1:B7F9 -  -  -  -  tDWP:
  307 D1:B7F9 01 0A 00 00 	ld	bc, VX_VERTEX_RY
  308 D1:B7FD 09 -  -  -  	add	hl, bc
  309 D1:B7FE ED 07 -  -  	ld	bc, (hl)
  310 D1:B800 23 23 23 -  	inc	hl \ inc hl \ inc hl
  311 D1:B803 ED 27 -  -  	ld	hl, (hl)
  312 D1:B805 B7 -  -  -  	or	a, a
  313 D1:B806 ED 42 -  -  	sbc	hl, bc
  314 D1:B808 C9 -  -  -  	ret
  315 D1:B809 -  -  -  -  vxUpDistance:
  316 D1:B809 -  -  -  -  tUPP:
  317 D1:B809 01 0A 00 00 	ld	bc, VX_VERTEX_RY
  318 D1:B80D 09 -  -  -  	add	hl, bc
  319 D1:B80E ED 07 -  -  	ld	bc, (hl)
  320 D1:B810 23 23 23 -  	inc	hl \ inc hl \ inc hl
  321 D1:B813 ED 27 -  -  	ld	hl, (hl)
  322 D1:B815 09 -  -  -  	add	hl, bc
  323 D1:B816 C9 -  -  -  	ret
  324 D1:B817 -  -  -  -  
  325 D1:B817 -  -  -  -  vxClipMixByte:
  326 D1:B817 -  -  -  -  ; a = (d-e)*bc/65536+e
  327 D1:B817 7A -  -  -  	ld	a, d
  328 D1:B818 93 -  -  -  	sub	e
  329 D1:B819 6F -  -  -  	ld	l, a
  330 D1:B81A 60 -  -  -  	ld	h, b
  331 D1:B81B ED 6C -  -  	mlt	hl
  332 D1:B81D 30 03 -  -  	jr	nc, $+5
  333 D1:B81F B7 -  -  -  	or	a, a
  334 D1:B820 ED 42 -  -  	sbc	hl, bc
  335 D1:B822 53 -  -  -  	ld	d, e
  336 D1:B823 1E 00 -  -  	ld	e, 0
  337 D1:B825 19 -  -  -  	add	hl, de
  338 D1:B826 C9 -  -  -  	ret
  339 D1:B827 -  -  -  -  
  340 D1:B827 -  -  -  -  vxClipMixWord:
  341 D1:B827 -  -  -  -  ; (hl-de)*bc/65536+de
  342 D1:B827 D5 -  -  -  	push	de
  343 D1:B828 B7 -  -  -  	or	a, a
  344 D1:B829 ED 52 -  -  	sbc	hl, de
  345 D1:B82B 22 C7 B5 D1 	ld	(vxMixWrite), hl
  346 D1:B82F DD 21 C7 B5 
              D1 -  -  -  	ld	ix, vxMixWrite
  347 D1:B834 -  -  -  -  
  348 D1:B834 DD 66 02 -  	ld	h, (ix+2)
  349 D1:B837 CB 7C -  -  	bit	7, h
  350 D1:B839 68 -  -  -  	ld	l, b
  351 D1:B83A ED 6C -  -  	mlt	hl
  352 D1:B83C 28 03 -  -  	jr	z, $+5
  353 D1:B83E B7 -  -  -  	or	a, a
  354 D1:B83F ED 42 -  -  	sbc	hl, bc
  355 D1:B841 -  -  -  -  
  356 D1:B841 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxClipping.ez80"
  357 D1:B849 -  -  -  -  
  358 D1:B849 DD 56 01 -  	ld	d, (ix+1)
  359 D1:B84C 58 -  -  -  	ld	e, b
  360 D1:B84D ED 5C -  -  	mlt	de
  361 D1:B84F 19 -  -  -  	add	hl, de
  362 D1:B850 -  -  -  -  
  363 D1:B850 DD 56 00 -  	ld	d, (ix+0)
  364 D1:B853 58 -  -  -  	ld	e, b
  365 D1:B854 ED 5C -  -  	mlt	de
  366 D1:B856 5A -  -  -  	ld	e, d
  367 D1:B857 16 00 -  -  	ld	d, 0
  368 D1:B859 19 -  -  -  	add	hl, de
  369 D1:B85A -  -  -  -  
  370 D1:B85A DD 56 02 -  	ld	d, (ix+2)
  371 D1:B85D 59 -  -  -  	ld	e, c
  372 D1:B85E ED 5C -  -  	mlt	de
  373 D1:B860 19 -  -  -  	add	hl, de
  374 D1:B861 -  -  -  -  
  375 D1:B861 DD 56 01 -  	ld	d, (ix+1)
  376 D1:B864 59 -  -  -  	ld	e, c
  377 D1:B865 ED 5C -  -  	mlt	de
  378 D1:B867 5A -  -  -  	ld	e, d
  379 D1:B868 16 00 -  -  	ld	d, 0
  380 D1:B86A 19 -  -  -  	add	hl, de
  381 D1:B86B -  -  -  -  
  382 D1:B86B D1 -  -  -  	pop	de
  383 D1:B86C 19 -  -  -  	add	hl, de
  384 D1:B86D -  -  -  -  
  385 D1:B86D C9 -  -  -  	ret
  386 D1:B86E -  -  -  -  
  387 D1:B86E -  -  -  -  vxClipFactor:
  388 D1:B86E -  -  -  -  ; hl*65536/de, nz = do 65536-bc, z = bc
  389 D1:B86E -  -  -  -  ; 467 TStates
  390 D1:B86E 52 03 -  -     inc.s bc
  391 D1:B870 29 -  -  -     add   hl,hl
  392 D1:B871 30 10 -  -  	jr	nc, vxx
  393 D1:B873 D5 -  -  -  	push	de
  394 D1:B874 EB -  -  -  	ex	de, hl
  395 D1:B875 B7 -  -  -  	or	a, a
  396 D1:B876 ED 62 -  -  	sbc	hl, hl
  397 D1:B878 ED 52 -  -  	sbc	hl, de
  398 D1:B87A D1 -  -  -  	pop	de
  399 D1:B87B -  -  -  -  
  400 D1:B87B E5 -  -  -  	push	hl
  401 D1:B87C B7 -  -  -  	or	a, a
  402 D1:B87D ED 62 -  -  	sbc	hl, hl
  403 D1:B87F ED 52 -  -  	sbc	hl, de
  404 D1:B881 EB -  -  -  	ex	de, hl
  405 D1:B882 E1 -  -  -  	pop	hl
  406 D1:B883 -  -  -  -  
  407 D1:B883 -  -  -  -  vxx:
  408 D1:B883 ED 52 30 01 
              19 8F -  -  	sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  409 D1:B889 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  410 D1:B890 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  411 D1:B897 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  412 D1:B89E 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  413 D1:B8A5 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  414 D1:B8AC 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  415 D1:B8B3 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  416 D1:B8BA 2F -  -  -     cpl
  417 D1:B8BB 47 -  -  -     ld   b, a
  418 D1:B8BC 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  419 D1:B8C3 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  420 D1:B8CA 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  421 D1:B8D1 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  422 D1:B8D8 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  423 D1:B8DF 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  424 D1:B8E6 29 ED 52 30 
              01 19 8F -     add   hl,hl \ sbc hl,de \ jr nc,$+3 \ add hl,de \ adc a,a
  425 D1:B8ED 29 ED 52 8F    add   hl,hl \ sbc hl,de \ adc a,a
  426 D1:B8F1 2F -  -  -     cpl
  427 D1:B8F2 4F -  -  -     ld   c, a
  428 D1:B8F3 C9 -  -  -  	ret
  429 D1:B8F4 -  -  -  -  
  430 D1:B8F4 -  -  -  -  vxClipDivide:
  431 D1:B8F4 FD 07 0D -  	ld	bc, (iy+VX_VERTEX_RZ)
  432 D1:B8F7 FD CB 0F 7E 	bit	7, (iy+VX_VERTEX_RZ+2)
  433 D1:B8FB 28 04 -  -  	jr	z, vxClampZ
  434 D1:B8FD 01 02 00 00 	ld	bc, 2
  435 D1:B901 -  -  -  -  vxClampZ:
  436 D1:B901 FD 27 0A -  	ld	hl, (iy+VX_VERTEX_RY)
  437 D1:B904 AF -  -  -  	xor	a, a
  438 D1:B905 29 -  -  -  	add	hl, hl
  439 D1:B906 30 06 -  -  	jr	nc, $+8
  440 D1:B908 17 -  -  -  	rla
  441 D1:B909 EB -  -  -  	ex   de, hl
  442 D1:B90A ED 62 -  -  	sbc   hl, hl
  443 D1:B90C ED 52 -  -  	sbc   hl, de
  444 D1:B90E -  -  -  -  
  445 D1:B90E ED 42 FA 25 
              B9 D1 -  -  	sbc	hl, bc \ jp m, vxClipNextY
  446 D1:B914 B7 -  -  -  	or	a, a
  447 D1:B915 -  -  -  -  ; potential clipping issue
  448 D1:B915 ED 42 -  -  	sbc	hl, bc
  449 D1:B917 FA 24 B9 D1 	jp	m, vxClipNextYCarry
  450 D1:B91B 1F -  -  -  	rra
  451 D1:B91C 3E 00 -  -  	ld	a, VX_SCREEN_HCENTER-(VX_SCREEN_HEIGHT/2)
  452 D1:B91E 30 3B -  -  	jr	nc, vxClipWriteY
  453 D1:B920 3E F0 -  -  	ld	a, VX_SCREEN_HCENTER+(VX_SCREEN_HEIGHT/2)
  454 D1:B922 18 37 -  -  	jr	vxClipWriteY
  455 D1:B924 -  -  -  -  vxClipNextYCarry:
  456 D1:B924 B7 -  -  -  	or	a, a
  457 D1:B925 -  -  -  -  vxClipNextY:
  458 D1:B925 8F 09 -  -     adc a,a \ add hl,bc
  459 D1:B927 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  460 D1:B92E 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  461 D1:B935 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  462 D1:B93C 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  463 D1:B943 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  464 D1:B94A 29 ED 42 8F    add hl,hl \ sbc hl,bc \ adc a,a
  465 D1:B94E 2F -  -  -     cpl
  466 D1:B94F -  -  -  -  
  467 D1:B94F 87 -  -  -     add   a, a
  468 D1:B950 2E 79 -  -     ld   l, VX_SCREEN_HEIGHT/2+1 ;precision stuffs
  469 D1:B952 67 -  -  -     ld   h, a
  470 D1:B953 ED 6C -  -     mlt   hl
  471 D1:B955 7C -  -  -     ld   a, h
  472 D1:B956 30 01 -  -     jr   nc, $+3
  473 D1:B958 2F -  -  -     cpl
  474 D1:B959 CE 78 -  -     adc   a, VX_SCREEN_HCENTER
  475 D1:B95B -  -  -  -  vxClipWriteY:
  476 D1:B95B FD 77 01 -  	ld	(iy+VX_VERTEX_SY), a
  477 D1:B95E -  -  -  -  
  478 D1:B95E FD 27 07 -  	ld	hl, (iy+VX_VERTEX_RX)
  479 D1:B961 AF -  -  -  	xor	a, a
  480 D1:B962 29 -  -  -  	add	hl, hl
  481 D1:B963 30 06 -  -  	jr	nc, $+8
  482 D1:B965 17 -  -  -  	rla
  483 D1:B966 EB -  -  -  	ex   de, hl
  484 D1:B967 ED 62 -  -  	sbc   hl, hl
  485 D1:B969 ED 52 -  -  	sbc   hl, de
  486 D1:B96B -  -  -  -  
  487 D1:B96B ED 42 FA 86 
              B9 D1 -  -  	sbc	hl, bc \ jp m, vxClipNextX
  488 D1:B971 B7 -  -  -  	or	a, a
  489 D1:B972 -  -  -  -  ; potential clipping issue
  490 D1:B972 ED 42 -  -  	sbc	hl, bc
  491 D1:B974 FA 85 B9 D1 	jp	m, vxClipNextXCarry
  492 D1:B978 1F -  -  -  	rra
  493 D1:B979 21 00 00 00 	ld	hl, VX_SCREEN_WCENTER-(VX_SCREEN_WIDTH/2)
  494 D1:B97D 38 4A -  -  	jr	c, vxClipWriteX
  495 D1:B97F 21 40 01 00 	ld	hl, VX_SCREEN_WCENTER+(VX_SCREEN_WIDTH/2)
  496 D1:B983 18 44 -  -  	jr	vxClipWriteX
  497 D1:B985 -  -  -  -  vxClipNextXCarry:
  498 D1:B985 B7 -  -  -  	or	a, a
  499 D1:B986 -  -  -  -  vxClipNextX:
  500 D1:B986 8F 09 -  -     adc a,a \ add hl,bc
  501 D1:B988 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  502 D1:B98F 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  503 D1:B996 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  504 D1:B99D 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  505 D1:B9A4 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  506 D1:B9AB 29 ED 42 30 
              01 09 8F -     add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  507 D1:B9B2 29 ED 42 8F    add hl,hl \ sbc hl,bc \ adc a,a
  508 D1:B9B6 2F -  -  -     cpl
  509 D1:B9B7 5F -  -  -     ld   e, a
  510 D1:B9B8 16 A1 -  -     ld   d, VX_SCREEN_WIDTH/2+1
  511 D1:B9BA ED 5C -  -     mlt   de
  512 D1:B9BC 7A -  -  -     ld    a, d
  513 D1:B9BD ED 62 -  -     sbc   hl, hl
  514 D1:B9BF 30 01 -  -     jr   nc, $+3
  515 D1:B9C1 2F -  -  -     cpl
  516 D1:B9C2 6F -  -  -     ld   l, a
  517 D1:B9C3 11 A0 00 00    ld   de, VX_SCREEN_WCENTER
  518 D1:B9C7 ED 5A -  -     adc   hl, de
  519 D1:B9C9 -  -  -  -  vxClipWriteX:
  520 D1:B9C9 FD 75 02 -  	ld	(iy+VX_VERTEX_SX), l
  521 D1:B9CC FD 74 03 -  	ld	(iy+VX_VERTEX_SX+1), h
  522 D1:B9CF AF -  -  -  	xor	a, a
  523 D1:B9D0 FD 77 00 -  	ld	(iy+VX_VERTEX_CODE), a
  524 D1:B9D3 C9 -  -  -  	ret
  525 D1:B9D4 -  -  -  -  
  526 D1:B9D4 -  -  -  -  vxClipFrustrumCode:
  527 D1:B9D4 DD 27 0A -  	ld	hl, (ix+VX_VERTEX_RY)
  528 D1:B9D7 DD 17 07 -  	ld	de, (ix+VX_VERTEX_RX)
  529 D1:B9DA DD 07 0D -  	ld	bc, (ix+VX_VERTEX_RZ)
  530 D1:B9DD AF -  -  -  	xor	a, a
  531 D1:B9DE ED 42 -  -  	sbc	hl, bc
  532 D1:B9E0 FA E6 B9 D1 	jp	m, vxClipError0
  533 D1:B9E4 F6 20 -  -  	or	%00100000
  534 D1:B9E6 -  -  -  -  vxClipError0:
  535 D1:B9E6 09 -  -  -  	add	hl, bc
  536 D1:B9E7 B7 -  -  -  	or	a, a
  537 D1:B9E8 ED 4A -  -  	adc	hl, bc
  538 D1:B9EA F2 F0 B9 D1 	jp	p, vxClipError1
  539 D1:B9EE F6 10 -  -  	or	%00010000
  540 D1:B9F0 -  -  -  -  vxClipError1:
  541 D1:B9F0 -  -  -  -  ; y cliping was handled
  542 D1:B9F0 EB -  -  -  	ex	de, hl
  543 D1:B9F1 ED 42 -  -  	sbc	hl, bc
  544 D1:B9F3 FA F9 B9 D1 	jp	m, vxClipError2
  545 D1:B9F7 F6 80 -  -  	or	a, %10000000
  546 D1:B9F9 -  -  -  -  vxClipError2:
  547 D1:B9F9 09 -  -  -  	add	hl, bc
  548 D1:B9FA B7 -  -  -  	or	a, a
  549 D1:B9FB ED 4A -  -  	adc	hl, bc
  550 D1:B9FD F2 03 BA D1 	jp	p, vxClipError3
  551 D1:BA01 F6 40 -  -  	or	a, %01000000
  552 D1:BA03 -  -  -  -  vxClipError3:
  553 D1:BA03 -  -  -  -  ; x clipping handled
  554 D1:BA03 DD CB 0F 7E 	bit	7, (ix+VX_VERTEX_RZ+2)
  555 D1:BA07 C8 -  -  -  	ret	z
  556 D1:BA08 F6 08 -  -  	or	%00001000
  557 D1:BA0A C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    8 D1:BA0B -  -  -  -  #include	"vxPipeline.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
    1 D1:BA0B -  -  -  -  
    2 D1:BA0B -  -  -  -  #include	"vxVertexShader.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxVertexShader.inc"
    1 D1:BA0B -  -  -  -  ; cache data register (de) ;
    2 D1:BA0B -  -  -  -  
    3 D1:BA0B -  -  -  -  #define	VX_VERTEX_CODE		0
    4 D1:BA0B -  -  -  -  #define	VX_VERTEX_SY		1
    5 D1:BA0B -  -  -  -  #define	VX_VERTEX_SX		2
    6 D1:BA0B -  -  -  -  #define	VX_VERTEX_GPR0		4
    7 D1:BA0B -  -  -  -  #define	VX_VERTEX_GPR1		5
    8 D1:BA0B -  -  -  -  #define	VX_VERTEX_UNIFORM	6
    9 D1:BA0B -  -  -  -  #define	VX_VERTEX_RX		7
   10 D1:BA0B -  -  -  -  #define	VX_VERTEX_RY		10
   11 D1:BA0B -  -  -  -  #define	VX_VERTEX_RZ		13
   12 D1:BA0B -  -  -  -  
   13 D1:BA0B -  -  -  -  ; vertex input register (iy) ;
   14 D1:BA0B -  -  -  -  
   15 D1:BA0B -  -  -  -  #define	VX_VERTEX_POSITION	0
   16 D1:BA0B -  -  -  -  #define	VX_VERTEX_VX		0
   17 D1:BA0B -  -  -  -  #define	VX_VERTEX_VY		2
   18 D1:BA0B -  -  -  -  #define	VX_VERTEX_VZ		4
   19 D1:BA0B -  -  -  -  #define	VX_VERTEX_NORMAL	6
   20 D1:BA0B -  -  -  -  #define	VX_VERTEX_NX		6
   21 D1:BA0B -  -  -  -  #define	VX_VERTEX_NY		7
   22 D1:BA0B -  -  -  -  #define	VX_VERTEX_NZ		8
   23 D1:BA0B -  -  -  -  
   24 D1:BA0B -  -  -  -  ; global data input register (ix) ;
   25 D1:BA0B -  -  -  -  
   26 D1:BA0B -  -  -  -  #define	VX_MATRIX0			0
   27 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C0		0
   28 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C1		1
   29 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C2		2
   30 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C3		3
   31 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C4		4
   32 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C5		5
   33 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C6		6
   34 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C7		7
   35 D1:BA0B -  -  -  -  #define	VX_MATRIX0_C8		8
   36 D1:BA0B -  -  -  -  #define	VX_MATRIX0_TX		9
   37 D1:BA0B -  -  -  -  #define	VX_MATRIX0_TY		12
   38 D1:BA0B -  -  -  -  #define	VX_MATRIX0_TZ		15
   39 D1:BA0B -  -  -  -  
   40 D1:BA0B -  -  -  -  #define	VX_LIGHT0_VECTOR	18
   41 D1:BA0B -  -  -  -  #define	VX_LIGHT0_AMBIANT	21
   42 D1:BA0B -  -  -  -  #define	VX_LIGHT0_POSITION	22
   43 D1:BA0B -  -  -  -  
   44 D1:BA0B -  -  -  -  ; constant ;
   45 D1:BA0B -  -  -  -  
   46 D1:BA0B -  -  -  -  #define	VX_MATRIX_SIZE		18
   47 D1:BA0B -  -  -  -  #define	VX_MATRIX_C0		0
   48 D1:BA0B -  -  -  -  #define	VX_MATRIX_C1		1
   49 D1:BA0B -  -  -  -  #define	VX_MATRIX_C2		2
   50 D1:BA0B -  -  -  -  #define	VX_MATRIX_C3		3
   51 D1:BA0B -  -  -  -  #define	VX_MATRIX_C4		4
   52 D1:BA0B -  -  -  -  #define	VX_MATRIX_C5		5
   53 D1:BA0B -  -  -  -  #define	VX_MATRIX_C6		6
   54 D1:BA0B -  -  -  -  #define	VX_MATRIX_C7		7
   55 D1:BA0B -  -  -  -  #define	VX_MATRIX_C8		8
   56 D1:BA0B -  -  -  -  #define	VX_MATRIX_TX		9
   57 D1:BA0B -  -  -  -  #define	VX_MATRIX_TY		12
   58 D1:BA0B -  -  -  -  #define	VX_MATRIX_TZ		15
   59 D1:BA0B -  -  -  -  
   60 D1:BA0B -  -  -  -  #define	VX_LIGHT_SIZE		10
   61 D1:BA0B -  -  -  -  #define	VX_LIGHT_VECTOR		0
   62 D1:BA0B -  -  -  -  #define	VX_LIGHT_AMBIANT	3
   63 D1:BA0B -  -  -  -  #define	VX_LIGHT_POSITION	4
   64 D1:BA0B -  -  -  -  
   65 D1:BA0B -  -  -  -  #define	VX_SHADER_VERTEX_SIZE		16	; per vertex data in pipeline
   66 D1:BA0B -  -  -  -  #define	VX_DATA_VERTEX_SIZE	9	; this should be changed if you suppress vertex normal data
   67 D1:BA0B -  -  -  -  
   68 D1:BA0B -  -  -  -  #define	VX_VERTEX_SHADER_SIZE		1024	; allowed shader size
   69 D1:BA0B -  -  -  -  #define	VX_VERTEX_SHADER_DATA		$E30800
   70 D1:BA0B -  -  -  -  #define	VX_VERTEX_SHADER_CODE		$E30800
   71 D1:BA0B -  -  -  -  
   72 D1:BA0B -  -  -  -  ; return shader ;
   73 D1:BA0B -  -  -  -  
   74 D1:BA0B -  -  -  -  ; shader will copy 1024 bytes from global_data to VX_VRAM. This load occurs at begin of stream instruction, to ensure maximum vertex throughput. About 2200 cycles per vertex are needed.
   75 D1:BA0B -  -  -  -  
   76 D1:BA0B -  -  -  -  VX_VERTEX_SHADER_COPY:
   77 D1:BA0B -  -  -  -  
   78 D1:BA0B -  -  -  -  ; relocate the shader to fast VRAM ($E30800)
   79 D1:BA0B -  -  -  -  
   80 D1:BA0B -  -  -  -  .relocate VX_VERTEX_SHADER_CODE
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxVertexShader.inc"
   81 E3:0800 -  -  -  -  
   82 E3:0800 -  -  -  -  vxModelView:
   83 E3:0800 00 00 00 -  	.db	0,0,0
   84 E3:0803 00 00 00 -  	.db	0,0,0
   85 E3:0806 00 00 00 -  	.db	0,0,0
   86 E3:0809 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl	0,0,0
   87 E3:0812 -  -  -  -  vxLight0:
   88 E3:0812 00 00 C0 -  	.db	0,0,-64
   89 E3:0815 00 -  -  -  	.db	0
   90 E3:0816 00 00 00 00 
              00 00 -  -  	.dw	0,0,0
   91 E3:081C -  -  -  -  
   92 E3:081C -  -  -  -  ; global shader call
   93 E3:081C -  -  -  -  
   94 E3:081C -  -  -  -  vxVertexShader:
   95 E3:081C -  -  -  -  ; ix = global data register [MC[0-8],MTX,MTY,MTZ,LV[0-2],LA,LE]
   96 E3:081C -  -  -  -  ; iy = vertex data register [VX,VY,VZ,VN[0-2]]
   97 E3:081C -  -  -  -  ; de = output data register [RC,SY,SX,RI[0-1],RX,RY,RZ]
   98 E3:081C -  -  -  -  ; bc = x vertex coordinate [16bits]
   99 E3:081C -  -  -  -  ; OUT register
  100 E3:081C -  -  -  -  ; de = de + VX_SHADER_VERTEX_SIZE
  101 E3:081C -  -  -  -  ; iy = iy + VX_DATA_VERTEX_SIZE
  102 E3:081C -  -  -  -  ; data copied to memory
  103 E3:081C ED 66 09 -  	pea	iy+VX_DATA_VERTEX_SIZE
  104 E3:081F D5 -  -  -  	push	de
  105 E3:0820 -  -  -  -  ; X coordinate
  106 E3:0820 -  -  -  -  ;	ld	bc, (iy+0)
  107 E3:0820 DD 17 09 -  	ld	de, (ix+VX_MATRIX0_TX)
  108 E3:0823 DD 7E 00 -  	ld	a, (ix+VX_MATRIX0_C0)
  109 E3:0826 60 -  -  -  	ld	h, b
  110 E3:0827 6F -  -  -  	ld	l, a
  111 E3:0828 ED 6C -  -  	mlt	hl
  112 E3:082A FE 80 -  -  	cp	$80
  113 E3:082C 38 02 -  -  	jr	c, $+4
  114 E3:082E ED 42 -  -  	sbc	hl, bc
  115 E3:0830 CB 78 -  -  	bit	7, b
  116 E3:0832 47 -  -  -  	ld	b, a
  117 E3:0833 28 03 -  -  	jr	z, $+5
  118 E3:0835 2F -  -  -  	cpl
  119 E3:0836 8C -  -  -  	adc	a, h
  120 E3:0837 67 -  -  -  	ld	h, a
  121 E3:0838 29 -  -  -  	add	hl, hl
  122 E3:0839 29 -  -  -  	add	hl, hl
  123 E3:083A 29 -  -  -  	add	hl, hl
  124 E3:083B 29 -  -  -  	add	hl, hl
  125 E3:083C 29 -  -  -  	add	hl, hl
  126 E3:083D 29 -  -  -  	add	hl, hl
  127 E3:083E 29 -  -  -  	add	hl, hl
  128 E3:083F 29 -  -  -  	add	hl, hl
  129 E3:0840 ED 4C -  -  	mlt	bc
  130 E3:0842 09 -  -  -  	add	hl, bc
  131 E3:0843 19 -  -  -  	add	hl, de
  132 E3:0844 DD 7E 01 -  	ld	a, (ix+VX_MATRIX0_C1)
  133 E3:0847 B7 -  -  -  	or	a, a
  134 E3:0848 28 22 -  -  	jr	z, vxVertexSkip0
  135 E3:084A FD 07 02 -  	ld	bc, (iy+VX_VERTEX_VY)
  136 E3:084D EB -  -  -  	ex	de, hl
  137 E3:084E 60 -  -  -  	ld	h, b
  138 E3:084F 6F -  -  -  	ld	l, a
  139 E3:0850 ED 6C -  -  	mlt	hl
  140 E3:0852 FE 80 -  -  	cp	$80
  141 E3:0854 38 02 -  -  	jr	c, $+4
  142 E3:0856 ED 42 -  -  	sbc	hl, bc
  143 E3:0858 CB 78 -  -  	bit	7, b
  144 E3:085A 47 -  -  -  	ld	b, a
  145 E3:085B 28 03 -  -  	jr	z, $+5
  146 E3:085D 2F -  -  -  	cpl
  147 E3:085E 8C -  -  -  	adc	a, h
  148 E3:085F 67 -  -  -  	ld	h, a
  149 E3:0860 29 -  -  -  	add	hl, hl
  150 E3:0861 29 -  -  -  	add	hl, hl
  151 E3:0862 29 -  -  -  	add	hl, hl
  152 E3:0863 29 -  -  -  	add	hl, hl
  153 E3:0864 29 -  -  -  	add	hl, hl
  154 E3:0865 29 -  -  -  	add	hl, hl
  155 E3:0866 29 -  -  -  	add	hl, hl
  156 E3:0867 29 -  -  -  	add	hl, hl
  157 E3:0868 ED 4C -  -  	mlt	bc
  158 E3:086A 09 -  -  -  	add	hl, bc
  159 E3:086B 19 -  -  -  	add	hl, de
  160 E3:086C -  -  -  -  vxVertexSkip0:
  161 E3:086C DD 7E 02 -  	ld	a, (ix+VX_MATRIX0_C2)
  162 E3:086F FD 07 04 -  	ld	bc, (iy+VX_VERTEX_VZ)
  163 E3:0872 51 -  -  -  	ld	d, c
  164 E3:0873 5F -  -  -  	ld	e, a
  165 E3:0874 ED 5C -  -  	mlt	de
  166 E3:0876 19 -  -  -  	add	hl, de
  167 E3:0877 EB -  -  -  	ex	de, hl
  168 E3:0878 60 -  -  -  	ld	h, b
  169 E3:0879 6F -  -  -  	ld	l, a
  170 E3:087A ED 6C -  -  	mlt	hl
  171 E3:087C FE 80 -  -  	cp	$80
  172 E3:087E 38 02 -  -  	jr	c, $+4
  173 E3:0880 ED 42 -  -  	sbc	hl, bc
  174 E3:0882 CB 78 -  -  	bit	7, b
  175 E3:0884 28 03 -  -  	jr	z, $+5
  176 E3:0886 2F -  -  -  	cpl
  177 E3:0887 8C -  -  -  	adc	a, h
  178 E3:0888 67 -  -  -  	ld	h, a
  179 E3:0889 29 -  -  -  	add	hl, hl
  180 E3:088A 29 -  -  -  	add	hl, hl
  181 E3:088B 29 -  -  -  	add	hl, hl
  182 E3:088C 29 -  -  -  	add	hl, hl
  183 E3:088D 29 -  -  -  	add	hl, hl
  184 E3:088E 29 -  -  -  	add	hl, hl
  185 E3:088F 29 -  -  -  	add	hl, hl
  186 E3:0890 29 -  -  -  	add	hl, hl
  187 E3:0891 19 -  -  -  	add	hl, de
  188 E3:0892 E5 -  -  -  	push	hl
  189 E3:0893 -  -  -  -  ; Z coordinate
  190 E3:0893 DD 17 0F -  	ld	de, (ix+VX_MATRIX0_TZ)
  191 E3:0896 DD 7E 08 -  	ld	a, (ix+VX_MATRIX0_C8)
  192 E3:0899 60 -  -  -  	ld	h, b
  193 E3:089A 6F -  -  -  	ld	l, a
  194 E3:089B ED 6C -  -  	mlt	hl
  195 E3:089D FE 80 -  -  	cp	$80
  196 E3:089F 38 02 -  -  	jr	c, $+4
  197 E3:08A1 ED 42 -  -  	sbc	hl, bc
  198 E3:08A3 CB 78 -  -  	bit	7, b
  199 E3:08A5 47 -  -  -  	ld	b, a
  200 E3:08A6 28 03 -  -  	jr	z, $+5
  201 E3:08A8 2F -  -  -  	cpl
  202 E3:08A9 8C -  -  -  	adc	a, h
  203 E3:08AA 67 -  -  -  	ld	h, a
  204 E3:08AB 29 -  -  -  	add	hl, hl
  205 E3:08AC 29 -  -  -  	add	hl, hl
  206 E3:08AD 29 -  -  -  	add	hl, hl
  207 E3:08AE 29 -  -  -  	add	hl, hl
  208 E3:08AF 29 -  -  -  	add	hl, hl
  209 E3:08B0 29 -  -  -  	add	hl, hl
  210 E3:08B1 29 -  -  -  	add	hl, hl
  211 E3:08B2 29 -  -  -  	add	hl, hl
  212 E3:08B3 ED 4C -  -  	mlt	bc
  213 E3:08B5 09 -  -  -  	add	hl, bc
  214 E3:08B6 19 -  -  -  	add	hl, de
  215 E3:08B7 DD 7E 07 -  	ld	a, (ix+VX_MATRIX0_C7)
  216 E3:08BA FD 07 02 -  	ld	bc, (iy+VX_VERTEX_VY)
  217 E3:08BD EB -  -  -  	ex	de, hl
  218 E3:08BE 60 -  -  -  	ld	h, b
  219 E3:08BF 6F -  -  -  	ld	l, a
  220 E3:08C0 ED 6C -  -  	mlt	hl
  221 E3:08C2 FE 80 -  -  	cp	$80
  222 E3:08C4 38 02 -  -  	jr	c, $+4
  223 E3:08C6 ED 42 -  -  	sbc	hl, bc
  224 E3:08C8 CB 78 -  -  	bit	7, b
  225 E3:08CA 47 -  -  -  	ld	b, a
  226 E3:08CB 28 03 -  -  	jr	z, $+5
  227 E3:08CD 2F -  -  -  	cpl
  228 E3:08CE 8C -  -  -  	adc	a, h
  229 E3:08CF 67 -  -  -  	ld	h, a
  230 E3:08D0 29 -  -  -  	add	hl, hl
  231 E3:08D1 29 -  -  -  	add	hl, hl
  232 E3:08D2 29 -  -  -  	add	hl, hl
  233 E3:08D3 29 -  -  -  	add	hl, hl
  234 E3:08D4 29 -  -  -  	add	hl, hl
  235 E3:08D5 29 -  -  -  	add	hl, hl
  236 E3:08D6 29 -  -  -  	add	hl, hl
  237 E3:08D7 29 -  -  -  	add	hl, hl
  238 E3:08D8 ED 4C -  -  	mlt	bc
  239 E3:08DA 09 -  -  -  	add	hl, bc
  240 E3:08DB 19 -  -  -  	add	hl, de
  241 E3:08DC DD 7E 06 -  	ld	a, (ix+VX_MATRIX0_C6)
  242 E3:08DF FD 07 00 -  	ld	bc, (iy+VX_VERTEX_VX)
  243 E3:08E2 51 -  -  -  	ld	d, c
  244 E3:08E3 5F -  -  -  	ld	e, a
  245 E3:08E4 ED 5C -  -  	mlt	de
  246 E3:08E6 19 -  -  -  	add	hl, de
  247 E3:08E7 EB -  -  -  	ex	de, hl
  248 E3:08E8 60 -  -  -  	ld	h, b
  249 E3:08E9 6F -  -  -  	ld	l, a
  250 E3:08EA ED 6C -  -  	mlt	hl
  251 E3:08EC FE 80 -  -  	cp	$80
  252 E3:08EE 38 02 -  -  	jr	c, $+4
  253 E3:08F0 ED 42 -  -  	sbc	hl, bc
  254 E3:08F2 CB 78 -  -  	bit	7, b
  255 E3:08F4 28 03 -  -  	jr	z, $+5
  256 E3:08F6 2F -  -  -  	cpl
  257 E3:08F7 8C -  -  -  	adc	a, h
  258 E3:08F8 67 -  -  -  	ld	h, a
  259 E3:08F9 29 -  -  -  	add	hl, hl
  260 E3:08FA 29 -  -  -  	add	hl, hl
  261 E3:08FB 29 -  -  -  	add	hl, hl
  262 E3:08FC 29 -  -  -  	add	hl, hl
  263 E3:08FD 29 -  -  -  	add	hl, hl
  264 E3:08FE 29 -  -  -  	add	hl, hl
  265 E3:08FF 29 -  -  -  	add	hl, hl
  266 E3:0900 29 -  -  -  	add	hl, hl
  267 E3:0901 19 -  -  -  	add	hl, de
  268 E3:0902 E5 -  -  -  	push	hl
  269 E3:0903 -  -  -  -  ; Y coordinate
  270 E3:0903 DD 17 0C -  	ld	de, (ix+VX_MATRIX0_TY)
  271 E3:0906 DD 7E 03 -  	ld	a, (ix+VX_MATRIX0_C3)
  272 E3:0909 60 -  -  -  	ld	h, b
  273 E3:090A 6F -  -  -  	ld	l, a
  274 E3:090B ED 6C -  -  	mlt	hl
  275 E3:090D FE 80 -  -  	cp	$80
  276 E3:090F 38 02 -  -  	jr	c, $+4
  277 E3:0911 ED 42 -  -  	sbc	hl, bc
  278 E3:0913 CB 78 -  -  	bit	7, b
  279 E3:0915 47 -  -  -  	ld	b, a
  280 E3:0916 28 03 -  -  	jr	z, $+5
  281 E3:0918 2F -  -  -  	cpl
  282 E3:0919 8C -  -  -  	adc	a, h
  283 E3:091A 67 -  -  -  	ld	h, a
  284 E3:091B 29 -  -  -  	add	hl, hl
  285 E3:091C 29 -  -  -  	add	hl, hl
  286 E3:091D 29 -  -  -  	add	hl, hl
  287 E3:091E 29 -  -  -  	add	hl, hl
  288 E3:091F 29 -  -  -  	add	hl, hl
  289 E3:0920 29 -  -  -  	add	hl, hl
  290 E3:0921 29 -  -  -  	add	hl, hl
  291 E3:0922 29 -  -  -  	add	hl, hl
  292 E3:0923 ED 4C -  -  	mlt	bc
  293 E3:0925 09 -  -  -  	add	hl, bc
  294 E3:0926 19 -  -  -  	add	hl, de
  295 E3:0927 DD 7E 04 -  	ld	a, (ix+VX_MATRIX0_C4)
  296 E3:092A FD 07 02 -  	ld	bc, (iy+VX_VERTEX_VY)
  297 E3:092D EB -  -  -  	ex	de, hl
  298 E3:092E 60 -  -  -  	ld	h, b
  299 E3:092F 6F -  -  -  	ld	l, a
  300 E3:0930 ED 6C -  -  	mlt	hl
  301 E3:0932 FE 80 -  -  	cp	$80
  302 E3:0934 38 02 -  -  	jr	c, $+4
  303 E3:0936 ED 42 -  -  	sbc	hl, bc
  304 E3:0938 CB 78 -  -  	bit	7, b
  305 E3:093A 47 -  -  -  	ld	b, a
  306 E3:093B 28 03 -  -  	jr	z, $+5
  307 E3:093D 2F -  -  -  	cpl
  308 E3:093E 8C -  -  -  	adc	a, h
  309 E3:093F 67 -  -  -  	ld	h, a
  310 E3:0940 29 -  -  -  	add	hl, hl
  311 E3:0941 29 -  -  -  	add	hl, hl
  312 E3:0942 29 -  -  -  	add	hl, hl
  313 E3:0943 29 -  -  -  	add	hl, hl
  314 E3:0944 29 -  -  -  	add	hl, hl
  315 E3:0945 29 -  -  -  	add	hl, hl
  316 E3:0946 29 -  -  -  	add	hl, hl
  317 E3:0947 29 -  -  -  	add	hl, hl
  318 E3:0948 ED 4C -  -  	mlt	bc
  319 E3:094A 09 -  -  -  	add	hl, bc
  320 E3:094B 19 -  -  -  	add	hl, de
  321 E3:094C DD 7E 05 -  	ld	a, (ix+VX_MATRIX0_C5)
  322 E3:094F FD 07 04 -  	ld	bc, (iy+VX_VERTEX_VZ)
  323 E3:0952 EB -  -  -  	ex	de, hl
  324 E3:0953 60 -  -  -  	ld	h, b
  325 E3:0954 6F -  -  -  	ld	l, a
  326 E3:0955 ED 6C -  -  	mlt	hl
  327 E3:0957 FE 80 -  -  	cp	$80
  328 E3:0959 38 02 -  -  	jr	c, $+4
  329 E3:095B ED 42 -  -  	sbc	hl, bc
  330 E3:095D CB 78 -  -  	bit	7, b
  331 E3:095F 47 -  -  -  	ld	b, a
  332 E3:0960 28 03 -  -  	jr	z, $+5
  333 E3:0962 2F -  -  -  	cpl
  334 E3:0963 8C -  -  -  	adc	a, h
  335 E3:0964 67 -  -  -  	ld	h, a
  336 E3:0965 29 -  -  -  	add	hl, hl
  337 E3:0966 29 -  -  -  	add	hl, hl
  338 E3:0967 29 -  -  -  	add	hl, hl
  339 E3:0968 29 -  -  -  	add	hl, hl
  340 E3:0969 29 -  -  -  	add	hl, hl
  341 E3:096A 29 -  -  -  	add	hl, hl
  342 E3:096B 29 -  -  -  	add	hl, hl
  343 E3:096C 29 -  -  -  	add	hl, hl
  344 E3:096D ED 4C -  -  	mlt	bc
  345 E3:096F 09 -  -  -  	add	hl, bc
  346 E3:0970 19 -  -  -  	add	hl, de
  347 E3:0971 -  -  -  -  ; lightning model is here, infinite directionnal light, no pow
  348 E3:0971 AF -  -  -  	xor	a, a
  349 E3:0972 FD 4E 06 -  	ld	c, (iy+VX_VERTEX_NX)
  350 E3:0975 DD 46 12 -  	ld	b, (ix+VX_LIGHT0_VECTOR+0)
  351 E3:0978 CB 79 28 01 
              90 -  -  -  	bit	7, c \ jr z, $+3 \ sub a,b
  352 E3:097D CB 78 28 01 
              91 -  -  -  	bit	7, b \ jr z, $+3 \ sub a,c
  353 E3:0982 ED 4C -  -  	mlt	bc
  354 E3:0984 80 -  -  -  	add	a, b
  355 E3:0985 FD 4E 07 -  	ld	c, (iy+VX_VERTEX_NY)
  356 E3:0988 DD 46 13 -  	ld	b, (ix+VX_LIGHT0_VECTOR+1)
  357 E3:098B CB 79 28 01 
              90 -  -  -  	bit	7, c \ jr z, $+3 \ sub a,b
  358 E3:0990 CB 78 28 01 
              91 -  -  -  	bit	7, b \ jr z, $+3 \ sub a,c
  359 E3:0995 ED 4C -  -  	mlt	bc
  360 E3:0997 80 -  -  -  	add	a, b
  361 E3:0998 FD 4E 08 -  	ld	c, (iy+VX_VERTEX_NZ)
  362 E3:099B DD 46 14 -  	ld	b, (ix+VX_LIGHT0_VECTOR+2)
  363 E3:099E CB 79 28 01 
              90 -  -  -  	bit	7, c \ jr z, $+3 \ sub a,b
  364 E3:09A3 CB 78 28 01 
              91 -  -  -  	bit	7, b \ jr z, $+3 \ sub a,c
  365 E3:09A8 ED 4C -  -  	mlt	bc
  366 E3:09AA 80 -  -  -  	add	a, b
  367 E3:09AB -  -  -  -  ; max(a,0)
  368 E3:09AB F2 B0 09 E3 	jp	p, $+5
  369 E3:09AF AF -  -  -  	xor	a, a
  370 E3:09B0 -  -  -  -  ; ambiant lightning=12
  371 E3:09B0 C6 0C -  -  	add	a, 12
  372 E3:09B2 -  -  -  -  ; min(a,31)
  373 E3:09B2 FE 20 -  -  	cp	32
  374 E3:09B4 38 02 -  -  	jr	c, $+4
  375 E3:09B6 3E 1F -  -  	ld	a, 31
  376 E3:09B8 C1 -  -  -  	pop	bc
  377 E3:09B9 D1 -  -  -  	pop	de
  378 E3:09BA FD E1 -  -  	pop	iy
  379 E3:09BC FD 77 06 -  	ld	(iy+VX_VERTEX_UNIFORM), a
  380 E3:09BF FD 1F 07 -  	ld	(iy+VX_VERTEX_RX), de
  381 E3:09C2 FD 2F 0A -  	ld	(iy+VX_VERTEX_RY), hl
  382 E3:09C5 FD 0F 0D -  	ld	(iy+VX_VERTEX_RZ), bc
  383 E3:09C8 AF -  -  -  	xor	a, a
  384 E3:09C9 29 -  -  -  	add	hl, hl
  385 E3:09CA 30 09 -  -  	jr	nc, $+11
  386 E3:09CC 17 -  -  -  	rla
  387 E3:09CD D5 -  -  -  	push	de
  388 E3:09CE EB -  -  -  	ex   de, hl
  389 E3:09CF ED 62 -  -  	sbc   hl, hl
  390 E3:09D1 ED 52 -  -  	sbc   hl, de
  391 E3:09D3 D1 -  -  -  	pop	de
  392 E3:09D4 B7 -  -  -  	or	a, a
  393 E3:09D5 ED 42 -  -  	sbc	hl, bc
  394 E3:09D7 FA E3 09 E3 	jp	m, vxDivideNext0
  395 E3:09DB B7 -  -  -  	or	a, a
  396 E3:09DC -  -  -  -  ; potential clipping issue
  397 E3:09DC ED 42 -  -  	sbc	hl, bc
  398 E3:09DE F2 86 0A E3 	jp	p, vxPerspectiveClip0
  399 E3:09E2 B7 -  -  -  	or	a, a
  400 E3:09E3 -  -  -  -  vxDivideNext0:
  401 E3:09E3 8F 09 -  -  	adc	a,a \ add hl,bc
  402 E3:09E5 29 ED 42 30 
              01 09 8F -  	add	hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  403 E3:09EC 29 ED 42 30 
              01 09 8F -     	add	hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  404 E3:09F3 29 ED 42 30 
              01 09 8F -     	add	hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  405 E3:09FA 29 ED 42 30 
              01 09 8F -     	add	hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  406 E3:0A01 29 ED 42 30 
              01 09 8F -     	add	hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  407 E3:0A08 29 ED 42 8F   	add	hl,hl \ sbc hl,bc \ adc a,a
  408 E3:0A0C 2F -  -  -     	cpl
  409 E3:0A0D 87 -  -  -     	add	a, a
  410 E3:0A0E 2E 79 -  -     	ld   l, VX_SCREEN_HEIGHT/2+1 ;precision stuffs
  411 E3:0A10 67 -  -  -     	ld   h, a
  412 E3:0A11 ED 6C -  -     	mlt	hl
  413 E3:0A13 7C -  -  -     	ld   a, h
  414 E3:0A14 30 01 -  -     	jr   nc, $+3
  415 E3:0A16 2F -  -  -     	cpl
  416 E3:0A17 CE 78 -  -     	adc	a, VX_SCREEN_HCENTER
  417 E3:0A19 FD 77 01 -  	ld	(iy+VX_VERTEX_SY), a
  418 E3:0A1C EB -  -  -  	ex	de, hl
  419 E3:0A1D AF -  -  -  	xor	a, a
  420 E3:0A1E 29 -  -  -  	add	hl, hl
  421 E3:0A1F 30 07 -  -  	jr	nc, $+9
  422 E3:0A21 17 -  -  -  	rla
  423 E3:0A22 EB -  -  -  	ex   de, hl
  424 E3:0A23 ED 62 -  -  	sbc   hl, hl
  425 E3:0A25 ED 52 -  -  	sbc   hl, de
  426 E3:0A27 B7 -  -  -  	or	a, a
  427 E3:0A28 ED 42 -  -  	sbc	hl, bc
  428 E3:0A2A FA 36 0A E3 	jp	m, vxNext0
  429 E3:0A2E B7 -  -  -  	or	a, a
  430 E3:0A2F -  -  -  -  ; potential clipping issue
  431 E3:0A2F ED 42 -  -  	sbc	hl, bc
  432 E3:0A31 F2 9C 0A E3 	jp	p, vxPerspectiveClip2
  433 E3:0A35 B7 -  -  -  	or	a, a
  434 E3:0A36 -  -  -  -  vxNext0:
  435 E3:0A36 8F 09 -  -     	adc a,a \ add hl,bc
  436 E3:0A38 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  437 E3:0A3F 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  438 E3:0A46 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  439 E3:0A4D 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  440 E3:0A54 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  441 E3:0A5B 29 ED 42 30 
              01 09 8F -     	add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
  442 E3:0A62 29 ED 42 8F    	add hl,hl \ sbc hl,bc \ adc a,a
  443 E3:0A66 2F -  -  -     	cpl
  444 E3:0A67 5F -  -  -     	ld	e, a
  445 E3:0A68 16 A1 -  -     	ld	d, VX_SCREEN_WIDTH/2+1
  446 E3:0A6A ED 5C -  -     	mlt	de
  447 E3:0A6C 7A -  -  -     	ld	a, d
  448 E3:0A6D ED 62 -  -     	sbc	hl, hl
  449 E3:0A6F 30 01 -  -     	jr	nc, $+3
  450 E3:0A71 2F -  -  -     	cpl
  451 E3:0A72 6F -  -  -     	ld   l, a
  452 E3:0A73 11 A0 00 00 	ld   de, VX_SCREEN_WCENTER
  453 E3:0A77 ED 5A -  -  	adc   hl, de
  454 E3:0A79 FD 2F 02 -  	ld	(iy+VX_VERTEX_SX), hl
  455 E3:0A7C AF -  -  -  	xor	a, a
  456 E3:0A7D FD 77 00 -  	ld	(iy+VX_VERTEX_CODE), a
  457 E3:0A80 ED 13 10 -  	lea	de, iy+VX_SHADER_VERTEX_SIZE
  458 E3:0A83 FD E1 -  -  	pop	iy
  459 E3:0A85 C9 -  -  -  	ret
  460 E3:0A86 -  -  -  -  
  461 E3:0A86 -  -  -  -  vxPerspectiveClip0:
  462 E3:0A86 FD 27 0A -  	ld	hl, (iy+VX_VERTEX_RY)
  463 E3:0A89 AF -  -  -  	xor	a, a
  464 E3:0A8A ED 42 -  -  	sbc	hl, bc
  465 E3:0A8C FA 92 0A E3 	jp	m, vxPerspectiveClip1
  466 E3:0A90 F6 20 -  -  	or	%00100000
  467 E3:0A92 -  -  -  -  vxPerspectiveClip1:
  468 E3:0A92 09 -  -  -  	add	hl, bc
  469 E3:0A93 B7 -  -  -  	or	a, a
  470 E3:0A94 ED 4A -  -  	adc	hl, bc
  471 E3:0A96 F2 9C 0A E3 	jp	p, vxPerspectiveClip2
  472 E3:0A9A F6 10 -  -  	or	%00010000
  473 E3:0A9C -  -  -  -  vxPerspectiveClip2:
  474 E3:0A9C -  -  -  -  ; y cliping was handled
  475 E3:0A9C FD 27 07 -  	ld	hl, (iy+VX_VERTEX_RX)
  476 E3:0A9F B7 -  -  -  	or	a, a
  477 E3:0AA0 ED 42 -  -  	sbc	hl, bc
  478 E3:0AA2 FA A8 0A E3 	jp	m, vxPerspectiveClip3
  479 E3:0AA6 F6 80 -  -  	or	a, %10000000
  480 E3:0AA8 -  -  -  -  vxPerspectiveClip3:
  481 E3:0AA8 09 -  -  -  	add	hl, bc
  482 E3:0AA9 B7 -  -  -  	or	a, a
  483 E3:0AAA ED 4A -  -  	adc	hl, bc
  484 E3:0AAC F2 B2 0A E3 	jp	p, vxPerspectiveClip4
  485 E3:0AB0 F6 40 -  -  	or	a, %01000000
  486 E3:0AB2 -  -  -  -  vxPerspectiveClip4:
  487 E3:0AB2 -  -  -  -  ; x clipping handled
  488 E3:0AB2 FD CB 0F 7E 	bit	7,(iy+VX_VERTEX_RZ+2)
  489 E3:0AB6 28 02 -  -  	jr	z, $+4
  490 E3:0AB8 F6 08 -  -  	or  %00001000
  491 E3:0ABA FD 77 00 -  	ld	(iy+VX_VERTEX_CODE), a
  492 E3:0ABD ED 13 10 -  	lea	de, iy+VX_SHADER_VERTEX_SIZE
  493 E3:0AC0 FD E1 -  -  	pop	iy
  494 E3:0AC2 C9 -  -  -  	ret
  495 E3:0AC3 -  -  -  -  
  496 E3:0AC3 -  -  -  -  .endrelocate
Listing for file "include\\relocate.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxVertexShader.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
    3 D1:BCCE -  -  -  -  #include	"vxGeometryShader.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxGeometryShader.inc"
    1 D1:BCCE -  -  -  -  #define	VX_INDEX0	0
    2 D1:BCCE -  -  -  -  #define	VX_INDEX1	3
    3 D1:BCCE -  -  -  -  #define	VX_INDEX2	6
    4 D1:BCCE -  -  -  -  
    5 D1:BCCE -  -  -  -  #define	VX_GEOMETRY_DEPTH	0
    6 D1:BCCE -  -  -  -  #define	VX_GEOMETRY_INDEX	3
    7 D1:BCCE -  -  -  -  #define	VX_GEOMETRY_ID		6
    8 D1:BCCE -  -  -  -  
    9 D1:BCCE -  -  -  -  #define	VX_GEOMETRY_SHADER_DATA		$E30800
   10 D1:BCCE -  -  -  -  #define	VX_GEOMETRY_SHADER_CODE		$E30800
   11 D1:BCCE -  -  -  -  
   12 D1:BCCE -  -  -  -  vxGeometryShader:
   13 D1:BCCE C5 -  -  -  	push	bc
   14 D1:BCCF -  -  -  -  vxBufferOffset=$+1
   15 D1:BCCF 11 00 00 00 	ld	de, $000000
   16 D1:BCD3 -  -  -  -  
   17 D1:BCD3 FD 27 06 -  	ld	hl, (iy+VX_INDEX2)
   18 D1:BCD6 19 -  -  -  	add	hl, de
   19 D1:BCD7 E5 -  -  -  	push	hl
   20 D1:BCD8 FD 27 03 -  	ld	hl, (iy+VX_INDEX1)
   21 D1:BCDB 19 -  -  -  	add	hl, de
   22 D1:BCDC EB -  -  -  	ex	de, hl
   23 D1:BCDD FD 07 00 -  	ld	bc, (iy+VX_INDEX0)
   24 D1:BCE0 09 -  -  -  	add	hl, bc
   25 D1:BCE1 C1 -  -  -  	pop	bc
   26 D1:BCE2 -  -  -  -  
   27 D1:BCE2 0A -  -  -  	ld	a, (bc)
   28 D1:BCE3 A6 -  -  -  	and	(hl)
   29 D1:BCE4 EB -  -  -  	ex	de, hl
   30 D1:BCE5 A6 -  -  -  	and	(hl)
   31 D1:BCE6 20 45 -  -  	jr	nz, vxGeometryDiscard
   32 D1:BCE8 0A -  -  -  	ld	a, (bc)
   33 D1:BCE9 B6 -  -  -  	or	(hl)
   34 D1:BCEA EB -  -  -  	ex	de, hl
   35 D1:BCEB B6 -  -  -  	or	(hl)
   36 D1:BCEC 20 06 -  -  	jr	nz, vxGeometryPass
   37 D1:BCEE CD 37 BD D1 	call	vxNClip
   38 D1:BCF2 38 39 -  -  	jr	c, vxGeometryDiscard
   39 D1:BCF4 -  -  -  -  vxGeometryPass:
   40 D1:BCF4 -  -  -  -  ; compute depth and submit polygon to list (ix)
   41 D1:BCF4 -  -  -  -  vxBufferOffsetAddRZ:
   42 D1:BCF4 01 00 00 00 	ld	bc, $000000
   43 D1:BCF8 -  -  -  -  ; index 0 - rz
   44 D1:BCF8 FD 27 00 -  	ld	hl, (iy+VX_INDEX0)
   45 D1:BCFB 09 -  -  -  	add	hl, bc
   46 D1:BCFC ED 17 -  -  	ld	de, (hl)
   47 D1:BCFE -  -  -  -  ; index 1 - rz	
   48 D1:BCFE FD 27 03 -  	ld	hl, (iy+VX_INDEX1)
   49 D1:BD01 09 -  -  -  	add	hl, bc
   50 D1:BD02 ED 27 -  -  	ld	hl, (hl)
   51 D1:BD04 19 -  -  -  	add	hl, de
   52 D1:BD05 EB -  -  -  	ex	de, hl
   53 D1:BD06 -  -  -  -  ; index 2 - re
   54 D1:BD06 FD 27 06 -  	ld	hl, (iy+VX_INDEX2)
   55 D1:BD09 09 -  -  -  	add	hl, bc
   56 D1:BD0A ED 27 -  -  	ld	hl, (hl)
   57 D1:BD0C ED 5A -  -  	adc	hl, de
   58 D1:BD0E -  -  -  -  ; no div - way too slow !
   59 D1:BD0E F2 15 BD D1 	jp	p, vxGeometryDepthClamp
   60 D1:BD12 B7 -  -  -  	or	a, a
   61 D1:BD13 ED 62 -  -  	sbc	hl, hl
   62 D1:BD15 -  -  -  -  vxGeometryDepthClamp:
   63 D1:BD15 -  -  -  -  ; write everything to tmp buffer
   64 D1:BD15 DD 2F 00 -  	ld	(ix+VX_GEOMETRY_DEPTH), hl
   65 D1:BD18 -  -  -  -  ; fill depth bucket
   66 D1:BD18 EB -  -  -  	ex	de, hl
   67 D1:BD19 21 07 32 D0 	ld	hl, VX_DEPTH_BUCKET+7
   68 D1:BD1D 7D -  -  -  	ld	a, l
   69 D1:BD1E 6B -  -  -  	ld	l, e
   70 D1:BD1F 86 -  -  -  	add	a, (hl)
   71 D1:BD20 77 -  -  -  	ld	(hl), a
   72 D1:BD21 30 02 -  -  	jr	nc, vxGeometryBucket
   73 D1:BD23 24 -  -  -  	inc	h
   74 D1:BD24 34 -  -  -  	inc	(hl)
   75 D1:BD25 -  -  -  -  vxGeometryBucket:
   76 D1:BD25 DD 3E 03 -  	ld	(ix+VX_GEOMETRY_INDEX), iy
   77 D1:BD28 -  -  -  -  vxBatchOffset=$+1
   78 D1:BD28 3E 00 -  -  	ld	a, $00
   79 D1:BD2A DD 77 06 -  	ld	(ix+VX_GEOMETRY_ID), a
   80 D1:BD2D -  -  -  -  vxGeometryDiscard:
   81 D1:BD2D -  -  -  -  vxFormatOffset=$+2
   82 D1:BD2D ED 33 10 -  	lea	iy, iy+16
   83 D1:BD30 C1 -  -  -  	pop	bc
   84 D1:BD31 10 9B -  -  	djnz	vxGeometryShader
   85 D1:BD33 0D -  -  -  	dec	c
   86 D1:BD34 20 98 -  -  	jr	nz, vxGeometryShader
   87 D1:BD36 C9 -  -  -  	ret
   88 D1:BD37 -  -  -  -  
   89 D1:BD37 -  -  -  -  
   90 D1:BD37 -  -  -  -  vxNClip:
   91 D1:BD37 -  -  -  -  ; vec e0 = v1 - v0;
   92 D1:BD37 -  -  -  -  ; vec e1 = v2 - v0;
   93 D1:BD37 -  -  -  -  ; return e0.x * e1.y - e0.y * e1.x > 0 ? 1 : 0;
   94 D1:BD37 -  -  -  -  ;
   95 D1:BD37 -  -  -  -  ;	(x1-x0)*(y2-y1) - (y1-y0)*(x2-x1)
   96 D1:BD37 -  -  -  -  ;
   97 D1:BD37 -  -  -  -  ; we'll compute (y1-y0)*(x2-x1)+(y2-y1)*(x0-x1)
   98 D1:BD37 23 03 13 -  	inc	hl \ inc bc \ inc de
   99 D1:BD3A -  -  -  -  
  100 D1:BD3A E5 -  -  -  	push	hl
  101 D1:BD3B C5 -  -  -  	push	bc
  102 D1:BD3C -  -  -  -  
  103 D1:BD3C 0A -  -  -  	ld	a, (bc)
  104 D1:BD3D 23 -  -  -  	inc	hl
  105 D1:BD3E ED 27 -  -  	ld	hl, (hl)
  106 D1:BD40 EB -  -  -  	ex	de, hl
  107 D1:BD41 23 -  -  -  	inc	hl
  108 D1:BD42 ED 07 -  -  	ld	bc, (hl)
  109 D1:BD44 EB -  -  -  	ex	de, hl
  110 D1:BD45 -  -  -  -  ; hl-bc is x0-x1
  111 D1:BD45 B7 -  -  -  	or	a, a
  112 D1:BD46 ED 42 -  -  	sbc	hl, bc
  113 D1:BD48 CB 2C CB 1D 	sra	h \ rr l
  114 D1:BD4C 4C -  -  -  	ld	c, h
  115 D1:BD4D EB -  -  -  	ex	de, hl
  116 D1:BD4E 2B -  -  -  	dec	hl
  117 D1:BD4F 96 -  -  -  	sub	a, (hl)
  118 D1:BD50 57 -  -  -  	ld	d, a
  119 D1:BD51 3E 00 -  -  	ld	a, 0
  120 D1:BD53 30 01 93 -  	jr	nc, $+3 \ sub a, e
  121 D1:BD56 CB 79 28 01 
              92 -  -  -  	bit 7, c \ jr z, $+3 \ sub a, d
  122 D1:BD5B ED 5C -  -  	mlt	de
  123 D1:BD5D 82 -  -  -  	add	a, d
  124 D1:BD5E 57 -  -  -  	ld	d, a		
  125 D1:BD5F -  -  -  -  ; bc and hl need a restore
  126 D1:BD5F -  -  -  -  ; (y1-y0)*(x2-x1)
  127 D1:BD5F -  -  -  -  ;  a - (hl)*hl-bc
  128 D1:BD5F 7E -  -  -  	ld	a, (hl)
  129 D1:BD60 23 -  -  -  	inc	hl
  130 D1:BD61 -  -  -  -  ;	ld	bc, (hl)
  131 D1:BD61 4E -  -  -  	ld	c, (hl)	; b still hold correct value
  132 D1:BD62 E1 -  -  -  	pop	hl	; pop bc
  133 D1:BD63 23 -  -  -  	inc	hl
  134 D1:BD64 ED 27 -  -  	ld	hl, (hl)
  135 D1:BD66 B7 -  -  -  	or	a, a
  136 D1:BD67 ED 42 -  -  	sbc	hl, bc
  137 D1:BD69 CB 2C CB 1D 	sra	h \ rr l
  138 D1:BD6D 4C -  -  -  	ld	c, h
  139 D1:BD6E EB -  -  -  	ex	de, hl
  140 D1:BD6F E3 -  -  -  	ex	(sp), hl	; save previous de
  141 D1:BD70 96 -  -  -  	sub	a, (hl)
  142 D1:BD71 57 -  -  -  	ld	d, a
  143 D1:BD72 3E 00 -  -  	ld	a, 0
  144 D1:BD74 30 01 93 -  	jr	nc, $+3 \ sub a, e
  145 D1:BD77 CB 79 28 01 
              92 -  -  -  	bit 7, c \ jr z, $+3 \ sub a, d
  146 D1:BD7C ED 5C -  -  	mlt	de
  147 D1:BD7E 82 -  -  -  	add	a, d
  148 D1:BD7F 57 -  -  -  	ld	d, a		
  149 D1:BD80 -  -  -  -  ; do de + temp_value
  150 D1:BD80 E1 -  -  -  	pop	hl
  151 D1:BD81 19 -  -  -  	add	hl, de
  152 D1:BD82 2B -  -  -  	dec	hl
  153 D1:BD83 CB 14 -  -  	rl	h
  154 D1:BD85 C9 -  -  -  	ret
  155 D1:BD86 -  -  -  -  
  156 D1:BD86 -  -  -  -  
  157 D1:BD86 -  -  -  -  
  158 D1:BD86 -  -  -  -  #comment
  159 D1:BD86             	ld	ix, (iy+VX_INDEX0)
  160 D1:BD86             	add	ix, bc
  161 D1:BD86             	ld	hl, (ix+VX_VERTEX_RZ)
  162 D1:BD86             	ld	ix, (iy+VX_INDEX1)
  163 D1:BD86             	add	ix, bc
  164 D1:BD86             	ld	de, (ix+VX_VERTEX_RZ)
  165 D1:BD86             	add	hl, de
  166 D1:BD86             	ld	ix, (iy+VX_INDEX2)
  167 D1:BD86             	add	ix, bc	; shouldn't carry
  168 D1:BD86             	ld	de, (ix+VX_VERTEX_RZ)
  169 D1:BD86             	adc	hl, de
  170 D1:BD86             	jp	p, vxAvgDepthPositive
  171 D1:BD86             	or	a, a
  172 D1:BD86             	sbc	hl, hl
  173 D1:BD86             vxAvgDepthPositive:
  174 D1:BD86             
  175 D1:BD86             #endcomment
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
    4 D1:BD86 -  -  -  -  
    5 D1:BD86 -  -  -  -  
    6 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_N3TI9	%00010011	; 19
    7 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_TI9		%00010000	; 16
    8 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_N3CI9	%00001101	; 13	; in theory not needed anymore
    9 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_CI9		%00001010	; 10
   10 D1:BD86 -  -  -  -  
   11 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_COLOR	%00001010
   12 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_TEXTURE	%00010000
   13 D1:BD86 -  -  -  -  
   14 D1:BD86 -  -  -  -  #define	VX_ANIMATION_MATRIX_SIZE	15
   15 D1:BD86 -  -  -  -  #define	VX_ANIMATION_BONE	32768
   16 D1:BD86 -  -  -  -  
   17 D1:BD86 -  -  -  -  #define	VX_GEOMETRY_QUEUE	$D10000	; 4*4096 (16K)
   18 D1:BD86 -  -  -  -  #define	VX_VERTEX_BUFFER		$D08000	; 16*2048 (32K)
   19 D1:BD86 -  -  -  -  #define	VX_MAX_TRIANGLE		4096
   20 D1:BD86 -  -  -  -  #define	VX_MAX_VERTEX		2048
   21 D1:BD86 -  -  -  -  #define	VX_MAX_BATCH		64
   22 D1:BD86 -  -  -  -  
   23 D1:BD86 -  -  -  -  #define	VX_VERTEX_BOX		8
   24 D1:BD86 -  -  -  -  
   25 D1:BD86 -  -  -  -  #define	vxPosition			$D03406
   26 D1:BD86 -  -  -  -  #define	VX_DEPTH_BUCKET		$D03200
   27 D1:BD86 -  -  -  -  #define	vxDepthSortTemp		$E30014
   28 D1:BD86 -  -  -  -  
   29 D1:BD86 -  -  -  -  ; TODO : create geometry shader in submission
   30 D1:BD86 -  -  -  -  ; Better vertex shader with decoupled projection
   31 D1:BD86 -  -  -  -  ; Put all the code in fast ram, use sha256
   32 D1:BD86 -  -  -  -  
   33 D1:BD86 -  -  -  -  vxSubmissionQueue:
   34 D1:BD86 00 00 00 -  	.dl	0
   35 D1:BD89 -  -  -  -  vxGeometrySize:
   36 D1:BD89 00 00 00 -  	.dl	0
   37 D1:BD8C -  -  -  -  vxBatchData:
   38 D1:BD8C 00 00 00 -  	.dl	0
   39 D1:BD8F -  -  -  -  vxVertexCacheFill:
   40 D1:BD8F 00 00 00 -  	.dl	0
   41 D1:BD92 -  -  -  -  vxModelViewCache:
   42 D1:BD92 00 00 00 -  	.db	0,0,0
   43 D1:BD95 00 00 00 -  	.db	0,0,0
   44 D1:BD98 00 00 00 -  	.db	0,0,0
   45 D1:BD9B 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl	0,0,0
   46 D1:BDA4 -  -  -  -  vxModelWorld:
   47 D1:BDA4 00 00 00 -  	.db	0,0,0
   48 D1:BDA7 00 00 00 -  	.db	0,0,0
   49 D1:BDAA 00 00 00 -  	.db	0,0,0
   50 D1:BDAD 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl	0,0,0
   51 D1:BDB6 -  -  -  -  vxTModelWorld:
   52 D1:BDB6 00 00 00 -  	.db	0,0,0
   53 D1:BDB9 00 00 00 -  	.db	0,0,0
   54 D1:BDBC 00 00 00 -  	.db	0,0,0
   55 D1:BDBF 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl	0,0,0
   56 D1:BDC8 -  -  -  -  vxLight0Cache:
   57 D1:BDC8 00 00 00 -  	.db	0,0,0
   58 D1:BDCB 00 -  -  -  	.db	0
   59 D1:BDCC 00 00 00 00 
              00 00 -  -  	.dw	0,0,0
   60 D1:BDD2 -  -  -  -  vxKeyAnimation:
   61 D1:BDD2 00 -  -  -  	.db	0
   62 D1:BDD3 -  -  -  -  
   63 D1:BDD3 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 -  -  -  .align 256
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
   64 D1:BE00 -  -  -  -  VX_BATCH_DATA:
   65 D1:BE00 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 .fill 256
   66 D1:BF00 -  -  -  -  
   67 D1:BF00 -  -  -  -  vxCmdExecute:
   68 D1:BF00 FD 21 00 00 
              D1 -  -  -  	ld	iy, VX_GEOMETRY_QUEUE
   69 D1:BF05 FD 22 86 BD 
              D1 -  -  -  	ld	(vxSubmissionQueue), iy
   70 D1:BF0A 21 00 BE D1 	ld	hl, VX_BATCH_DATA
   71 D1:BF0E 22 8C BD D1 	ld	(vxBatchData), hl
   72 D1:BF12 -  -  -  -  ; various reset blahblah
   73 D1:BF12 -  -  -  -  
   74 D1:BF12 21 1F D4 D1 	ld	hl, VX_SHADER_INTERPOLATION_COPY
   75 D1:BF16 11 00 08 E3 	ld	de, VX_SHADER_INTERPOLATION_CODE
   76 D1:BF1A 01 00 04 00 	ld	bc, 1024
   77 D1:BF1E ED B0 -  -  	ldir
   78 D1:BF20 21 7F D7 D1 	ld	hl, VX_PIXEL_SHADER_COPY
   79 D1:BF24 11 10 00 E1 	ld	de, VX_PIXEL_SHADER_CODE
   80 D1:BF28 01 40 00 00 	ld	bc, 64
   81 D1:BF2C ED B0 -  -  	ldir
   82 D1:BF2E -  -  -  -  
   83 D1:BF2E ED 4B 89 BD 
              D1 -  -  -  	ld	bc, (vxGeometrySize)
   84 D1:BF33 21 00 00 00 	ld	hl, 0
   85 D1:BF37 22 89 BD D1 	ld	(vxGeometrySize), hl
   86 D1:BF3B 78 -  -  -  	ld	a, b
   87 D1:BF3C B1 -  -  -  	or	c
   88 D1:BF3D -  -  -  -  ;	jp	z, vxResetCache
   89 D1:BF3D C8 -  -  -  	ret	z
   90 D1:BF3E 79 -  -  -  	ld	a, c
   91 D1:BF3F 0B -  -  -  	dec	bc
   92 D1:BF40 04 -  -  -  	inc	b
   93 D1:BF41 48 -  -  -  	ld	c, b
   94 D1:BF42 47 -  -  -  	ld	b, a
   95 D1:BF43 -  -  -  -  vxCmdExeLoop:
   96 D1:BF43 C5 -  -  -  	push	bc
   97 D1:BF44 -  -  -  -  
   98 D1:BF44 21 00 BE D1 	ld	hl, VX_BATCH_DATA
   99 D1:BF48 FD 6E 00 -  	ld	l, (iy+0)
  100 D1:BF4B 7E -  -  -  	ld	a, (hl)	; format
  101 D1:BF4C 23 -  -  -  	inc	hl
  102 D1:BF4D ED 07 -  -  	ld	bc, (hl)	; subcache
  103 D1:BF4F ED 66 04 -  	pea	iy+4
  104 D1:BF52 FD 37 01 -  	ld	iy, (iy+1)	; read triangle data
  105 D1:BF55 -  -  -  -  ; switch(format)
  106 D1:BF55 FE 10 -  -  	cp	VX_GEOMETRY_TI9
  107 D1:BF57 30 3F -  -  	jr	nc, vxCmdFormatTex
  108 D1:BF59 -  -  -  -  vxCmdFormatCol:
  109 D1:BF59 FD 31 00 -  	ld	ix, (iy+0)
  110 D1:BF5C DD 09 -  -  	add	ix, bc
  111 D1:BF5E DD 7E 06 -  	ld	a, (ix+VX_VERTEX_UNIFORM)
  112 D1:BF61 ED 22 00 -  	lea	hl, ix+0
  113 D1:BF64 FD 31 03 -  	ld	ix, (iy+3)
  114 D1:BF67 DD 09 -  -  	add	ix, bc
  115 D1:BF69 DD 86 06 -  	add	a, (ix+VX_VERTEX_UNIFORM)
  116 D1:BF6C ED 12 00 -  	lea	de, ix+0
  117 D1:BF6F FD 31 06 -  	ld	ix, (iy+6)
  118 D1:BF72 DD 09 -  -  	add	ix, bc
  119 D1:BF74 DD 86 06 -  	add	a, (ix+VX_VERTEX_UNIFORM)
  120 D1:BF77 47 -  -  -  	ld	b, a
  121 D1:BF78 0E 53 -  -  	ld	c, 83
  122 D1:BF7A ED 4C -  -  	mlt	bc
  123 D1:BF7C 78 -  -  -  	ld	a, b
  124 D1:BF7D 01 00 00 D0 	ld	bc, $D00000
  125 D1:BF81 FD 4E 09 -  	ld	c, (iy+9)
  126 D1:BF84 47 -  -  -  	ld	b, a
  127 D1:BF85 0A -  -  -  	ld	a, (bc)
  128 D1:BF86 ED 02 00 -  	lea	bc, ix+0
  129 D1:BF89 CD 79 AA D1 	call	vxFlatTriangle
  130 D1:BF8D FD E1 -  -  	pop	iy
  131 D1:BF8F C1 -  -  -  	pop	bc
  132 D1:BF90 10 B1 -  -  	djnz	vxCmdExeLoop
  133 D1:BF92 0D -  -  -  	dec	c
  134 D1:BF93 C2 43 BF D1 	jp	nz, vxCmdExeLoop
  135 D1:BF97 C9 -  -  -  	ret
  136 D1:BF98 -  -  -  -  vxCmdFormatTex:
  137 D1:BF98 -  -  -  -  
  138 D1:BF98 -  -  -  -  ;;	push	bc
  139 D1:BF98 -  -  -  -  ;;;	;ld	ix, vxWorldView+6
  140 D1:BF98 -  -  -  -  ;;	ld	ix, LIGHT
  141 D1:BF98 -  -  -  -  
  142 D1:BF98 -  -  -  -  #comment
  143 D1:BF98             	call	vxDotProduct
  144 D1:BF98             	or	a, a
  145 D1:BF98             	ex	de, hl
  146 D1:BF98             	sbc	hl, hl
  147 D1:BF98             	sbc	hl, de
  148 D1:BF98             	bit	7, h
  149 D1:BF98             	jr	z, _InRange
  150 D1:BF98             	ld	hl, 0
  151 D1:BF98             _InRange:
  152 D1:BF98             	add	hl, hl
  153 D1:BF98             	ld	a, 12
  154 D1:BF98             	add	a, h
  155 D1:BF98             	cp	32
  156 D1:BF98             	jr	c, $+4
  157 D1:BF98             	ld	a, 31
  158 D1:BF98             	ld	(INCREMENT), a
  159 D1:BF98             #endcomment
  160 D1:BF98 -  -  -  -  #comment
  161 D1:BF98             	xor	a, a
  162 D1:BF98             	ld	c, (iy+16)
  163 D1:BF98             	ld	b, (ix+0)
  164 D1:BF98             	bit	7, c \ jr z, $+3 \ sub a,b
  165 D1:BF98             	bit	7, b \ jr z, $+3 \ sub a,c
  166 D1:BF98             	mlt	bc
  167 D1:BF98             	add	a, b
  168 D1:BF98             	ld	c, (iy+17)
  169 D1:BF98             	ld	b, (ix+1)
  170 D1:BF98             	bit	7, c \ jr z, $+3 \ sub a,b
  171 D1:BF98             	bit	7, b \ jr z, $+3 \ sub a,c
  172 D1:BF98             	mlt	bc
  173 D1:BF98             	add	a, b
  174 D1:BF98             	ld	c, (iy+18)
  175 D1:BF98             	ld	b, (ix+2)
  176 D1:BF98             	bit	7, c \ jr z, $+3 \ sub a,b
  177 D1:BF98             	bit	7, b \ jr z, $+3 \ sub a,c
  178 D1:BF98             	mlt	bc
  179 D1:BF98             	add	a, b
  180 D1:BF98             ; max(a,0)
  181 D1:BF98             	jp	p, $+4+1
  182 D1:BF98             	xor	a, a
  183 D1:BF98             ; lightning model is here, infinite directionnal light, no pow=1
  184 D1:BF98             ; ambiant lightning=12
  185 D1:BF98             ;;	add	a, 8
  186 D1:BF98             	add	a, 12
  187 D1:BF98             ; min(a,31)
  188 D1:BF98             	cp	32
  189 D1:BF98             	jr	c, $+4
  190 D1:BF98             	ld	a, 31
  191 D1:BF98             	ld	(INCREMENT), a
  192 D1:BF98             	pop	bc
  193 D1:BF98             
  194 D1:BF98             	ld	de, (iy+12)
  195 D1:BF98             	ld	ix, (iy+3)
  196 D1:BF98             	add	ix, bc
  197 D1:BF98             	ld	(ix+5), e
  198 D1:BF98             	ld	(ix+6), d
  199 D1:BF98             	lea	de, ix+0
  200 D1:BF98             
  201 D1:BF98             	ld	hl, (iy+10)
  202 D1:BF98             	ld	ix, (iy+0)
  203 D1:BF98             	add	ix, bc
  204 D1:BF98             	ld	(ix+5), l
  205 D1:BF98             	ld	(ix+6), h
  206 D1:BF98             ;;	lea	hl, ix+0
  207 D1:BF98             
  208 D1:BF98             	ld	hl, (iy+14)
  209 D1:BF98             	ld	iy, (iy+6)
  210 D1:BF98             	add	iy, bc
  211 D1:BF98             	ld	(iy+5), l
  212 D1:BF98             	ld	(iy+6), h
  213 D1:BF98             	lea	bc, iy+0
  214 D1:BF98             
  215 D1:BF98             	lea	hl, ix+0
  216 D1:BF98             
  217 D1:BF98             	ld	ix, (iy+3)
  218 D1:BF98             	add	ix, bc
  219 D1:BF98             	ld	a, (ix+5)
  220 D1:BF98             	lea de, ix+0
  221 D1:BF98             
  222 D1:BF98             	ld	ix, (iy+0)
  223 D1:BF98             	add	ix, bc
  224 D1:BF98             	add	a, (ix+5)
  225 D1:BF98             	lea	hl, ix+0
  226 D1:BF98             
  227 D1:BF98             	ld	ix, (iy+6)
  228 D1:BF98             	add	ix, bc
  229 D1:BF98             	add	a, (ix+5)
  230 D1:BF98             	lea	bc, ix+0
  231 D1:BF98             
  232 D1:BF98             	lea	ix, iy+10
  233 D1:BF98             #endcomment
  234 D1:BF98 -  -  -  -  
  235 D1:BF98 FD 31 00 -  	ld	ix, (iy+0)
  236 D1:BF9B DD 09 -  -  	add	ix, bc
  237 D1:BF9D FD 27 0A -  	ld	hl, (iy+10)
  238 D1:BFA0 DD 75 04 -  	ld	(ix+VX_VERTEX_GPR0), l
  239 D1:BFA3 DD 74 05 -  	ld	(ix+VX_VERTEX_GPR1), h
  240 D1:BFA6 DD 7E 06 -  	ld	a, (ix+VX_VERTEX_UNIFORM)
  241 D1:BFA9 ED 22 00 -  	lea	hl, ix+0
  242 D1:BFAC -  -  -  -  
  243 D1:BFAC FD 31 03 -  	ld	ix, (iy+3)
  244 D1:BFAF DD 09 -  -  	add	ix, bc
  245 D1:BFB1 FD 17 0C -  	ld	de, (iy+12)
  246 D1:BFB4 DD 73 04 -  	ld	(ix+VX_VERTEX_GPR0), e
  247 D1:BFB7 DD 72 05 -  	ld	(ix+VX_VERTEX_GPR1), d
  248 D1:BFBA DD 86 06 -  	add	a, (ix+VX_VERTEX_UNIFORM)
  249 D1:BFBD ED 12 00 -  	lea	de, ix+0
  250 D1:BFC0 -  -  -  -  
  251 D1:BFC0 FD 31 06 -  	ld	ix, (iy+6)
  252 D1:BFC3 DD 09 -  -  	add	ix, bc
  253 D1:BFC5 FD 07 0E -  	ld	bc, (iy+14)
  254 D1:BFC8 DD 71 04 -  	ld	(ix+VX_VERTEX_GPR0), c
  255 D1:BFCB DD 70 05 -  	ld	(ix+VX_VERTEX_GPR1), b
  256 D1:BFCE DD 86 06 -  	add	a, (ix+VX_VERTEX_UNIFORM)
  257 D1:BFD1 -  -  -  -  ; compute uniform value
  258 D1:BFD1 47 -  -  -  	ld	b, a
  259 D1:BFD2 0E 53 -  -  	ld	c, 83
  260 D1:BFD4 ED 4C -  -  	mlt	bc
  261 D1:BFD6 78 -  -  -  	ld	a, b
  262 D1:BFD7 32 4D 0B E3 	ld	(vxShaderUniform0+1), a
  263 D1:BFDB ED 02 00 -  	lea	bc, ix+0
  264 D1:BFDE -  -  -  -  
  265 D1:BFDE CD 00 08 E3 	call	vxTextureTriangle
  266 D1:BFE2 FD E1 -  -  	pop	iy
  267 D1:BFE4 C1 -  -  -  	pop	bc
  268 D1:BFE5 05 -  -  -  	dec	b
  269 D1:BFE6 C2 43 BF D1 	jp	nz, vxCmdExeLoop
  270 D1:BFEA 0D -  -  -  	dec	c
  271 D1:BFEB C2 43 BF D1 	jp	nz, vxCmdExeLoop
  272 D1:BFEF C9 -  -  -  	ret
  273 D1:BFF0 -  -  -  -  ;;	jp	vxResetCache
  274 D1:BFF0 -  -  -  -  
  275 D1:BFF0 -  -  -  -  vxCmdDraw:
  276 D1:BFF0 -  -  -  -  ; hl - vertex source bc - cache area : de - triangle source : ix - matrix world matrix followed with iy  model matrix
  277 D1:BFF0 -  -  -  -  ; format : a
  278 D1:BFF0 -  -  -  -  ; now write batch id, batch data (format, cache)
  279 D1:BFF0 E5 -  -  -  	push	hl
  280 D1:BFF1 2A 8C BD D1 	ld	hl, (vxBatchData)
  281 D1:BFF5 77 -  -  -  	ld	(hl), a	; format
  282 D1:BFF6 32 54 C0 D1 	ld	(vxFormatOffset0), a
  283 D1:BFFA 7D -  -  -  	ld	a, l
  284 D1:BFFB 23 -  -  -  	inc	hl
  285 D1:BFFC ED 0F -  -  	ld	(hl), bc
  286 D1:BFFE 23 23 23 -  	inc hl \ inc hl \ inc hl
  287 D1:C001 22 8C BD D1 	ld	(vxBatchData), hl
  288 D1:C005 32 48 C0 D1 	ld	(vxBatchOffset0), a
  289 D1:C009 E1 -  -  -  	pop	hl
  290 D1:C00A -  -  -  -  
  291 D1:C00A C5 -  -  -  	push	bc
  292 D1:C00B D5 -  -  -  	push	de
  293 D1:C00C CD 7E C0 D1 	call	vxCmdStream	; stream vertex data to cache
  294 D1:C010 FD E1 -  -  	pop	iy			; polygon list
  295 D1:C012 D1 -  -  -  	pop	de
  296 D1:C013 D8 -  -  -  	ret	c
  297 D1:C014 FD 07 01 -  	ld	bc, (iy+1)
  298 D1:C017 79 -  -  -  	ld	a, c
  299 D1:C018 0B -  -  -  	dec	bc
  300 D1:C019 04 -  -  -  	inc	b
  301 D1:C01A 48 -  -  -  	ld	c, b
  302 D1:C01B 47 -  -  -  	ld	b, a
  303 D1:C01C ED 33 03 -  	lea iy, iy+3
  304 D1:C01F DD 2A 86 BD 
              D1 -  -  -  	ld	ix, (vxSubmissionQueue)
  305 D1:C024 -  -  -  -  
  306 D1:C024 -  -  -  -  #comment
  307 D1:C024             vxSubmission0:
  308 D1:C024             	ld	hl, (iy+0)
  309 D1:C024             	add	hl, de
  310 D1:C024             	ld	a, (hl)
  311 D1:C024             	ld	hl, (iy+3)
  312 D1:C024             	add	hl, de
  313 D1:C024             	and	(hl)
  314 D1:C024             	ld	hl, (iy+6)
  315 D1:C024             	add	hl, de
  316 D1:C024             	and	(hl)
  317 D1:C024             	jr	nz, vxDiscard1
  318 D1:C024             
  319 D1:C024             	ld	hl, (iy+0)
  320 D1:C024             	add	hl, de
  321 D1:C024             	ld	a, (hl)
  322 D1:C024             	ld	hl, (iy+3)
  323 D1:C024             	add	hl, de
  324 D1:C024             	or	(hl)
  325 D1:C024             	ld	hl, (iy+6)
  326 D1:C024             	add	hl, de
  327 D1:C024             	or	(hl)
  328 D1:C024             	jr	nz, +_
  329 D1:C024             ; try for bfc
  330 D1:C024             	push	bc
  331 D1:C024             
  332 D1:C024             	call	vxCmdBFC
  333 D1:C024             
  334 D1:C024             	pop	bc
  335 D1:C024             	jp	p, vxDiscard1
  336 D1:C024             _:
  337 D1:C024             ; compute depth and submit polygon to list (ix)
  338 D1:C024             vxBatchOffset0=$+1
  339 D1:C024             	ld	a, $00
  340 D1:C024             	ld	(ix+0), a
  341 D1:C024             	ld	(ix+1), iy
  342 D1:C024             	lea	ix, ix+4
  343 D1:C024             vxDiscard1:
  344 D1:C024             vxFormatOffset0=$+2
  345 D1:C024             	lea	iy, iy+16
  346 D1:C024             	djnz	vxSubmission0
  347 D1:C024             	dec	c
  348 D1:C024             	jr	nz, vxSubmission0
  349 D1:C024             #endcomment
  350 D1:C024 -  -  -  -  
  351 D1:C024 -  -  -  -  vxSubmission0:
  352 D1:C024 D5 -  -  -  	push	de
  353 D1:C025 C5 -  -  -  	push	bc
  354 D1:C026 -  -  -  -  
  355 D1:C026 FD 27 06 -  	ld	hl, (iy+6)
  356 D1:C029 19 -  -  -  	add	hl, de
  357 D1:C02A E5 -  -  -  	push	hl
  358 D1:C02B FD 27 03 -  	ld	hl, (iy+3)
  359 D1:C02E 19 -  -  -  	add	hl, de
  360 D1:C02F EB -  -  -  	ex	de, hl
  361 D1:C030 FD 07 00 -  	ld	bc, (iy+0)
  362 D1:C033 09 -  -  -  	add	hl, bc
  363 D1:C034 C1 -  -  -  	pop	bc
  364 D1:C035 -  -  -  -  ; bc = 2 , de = 1, hl =0
  365 D1:C035 -  -  -  -  
  366 D1:C035 0A -  -  -  	ld	a, (bc)
  367 D1:C036 A6 -  -  -  	and	(hl)
  368 D1:C037 EB -  -  -  	ex	de, hl
  369 D1:C038 A6 -  -  -  	and	(hl)
  370 D1:C039 20 17 -  -  	jr	nz, vxDiscard
  371 D1:C03B 0A -  -  -  	ld	a, (bc)
  372 D1:C03C B6 -  -  -  	or	(hl)
  373 D1:C03D EB -  -  -  	ex	de, hl
  374 D1:C03E B6 -  -  -  	or	(hl)
  375 D1:C03F 20 06 -  -  	jr	nz, vxPass
  376 D1:C041 -  -  -  -  ; try for bfc
  377 D1:C041 -  -  -  -  ;;	call	HELLO
  378 D1:C041 CD 37 BD D1 	call	vxNClip
  379 D1:C045 -  -  -  -  ;;	jp	p, vxDiscard
  380 D1:C045 38 0B -  -  	jr	c, vxDiscard
  381 D1:C047 -  -  -  -  vxPass:
  382 D1:C047 -  -  -  -  ; compute depth and submit polygon to list (ix)
  383 D1:C047 -  -  -  -  vxBatchOffset0=$+1
  384 D1:C047 3E 00 -  -  	ld	a, $00
  385 D1:C049 DD 77 00 -  	ld	(ix+0), a
  386 D1:C04C DD 3E 01 -  	ld	(ix+1), iy
  387 D1:C04F ED 32 04 -  	lea	ix, ix+4
  388 D1:C052 -  -  -  -  vxDiscard:
  389 D1:C052 -  -  -  -  vxFormatOffset0=$+2
  390 D1:C052 ED 33 10 -  	lea	iy, iy+16
  391 D1:C055 -  -  -  -  
  392 D1:C055 C1 -  -  -  	pop	bc
  393 D1:C056 D1 -  -  -  	pop	de
  394 D1:C057 10 CB -  -  	djnz	vxSubmission0
  395 D1:C059 0D -  -  -  	dec	c
  396 D1:C05A 20 C8 -  -  	jr	nz, vxSubmission0
  397 D1:C05C -  -  -  -  
  398 D1:C05C -  -  -  -  ; need to update count & queue position
  399 D1:C05C -  -  -  -  ; simple : new-previous / 4
  400 D1:C05C ED 5B 86 BD 
              D1 -  -  -  	ld	de, (vxSubmissionQueue)
  401 D1:C061 ED 22 00 -  	lea	hl, ix+0
  402 D1:C064 22 86 BD D1 	ld	(vxSubmissionQueue), hl
  403 D1:C068 B7 -  -  -  	or	a, a
  404 D1:C069 ED 52 -  -  	sbc	hl, de
  405 D1:C06B CB 2C CB 1D 	sra h \ rr l
  406 D1:C06F CB 2C CB 1D 	sra h \ rr l
  407 D1:C073 ED 4B 89 BD 
              D1 -  -  -  	ld	bc, (vxGeometrySize)
  408 D1:C078 09 -  -  -  	add	hl, bc
  409 D1:C079 22 89 BD D1 	ld	(vxGeometrySize), hl
  410 D1:C07D -  -  -  -  
  411 D1:C07D C9 -  -  -  	ret
  412 D1:C07E -  -  -  -  
  413 D1:C07E -  -  -  -  ;vxResetCache:
  414 D1:C07E -  -  -  -  ;	ld	hl, VX_VERTEX_BUFFER
  415 D1:C07E -  -  -  -  ;	ld	de, 16
  416 D1:C07E -  -  -  -  ;	ld	b, 0
  417 D1:C07E -  -  -  -  ;	ld	a, $FF
  418 D1:C07E -  -  -  -  ;vxResetCacheLoop:
  419 D1:C07E -  -  -  -  ;	ld	(hl), a
  420 D1:C07E -  -  -  -  ;	add	hl, de
  421 D1:C07E -  -  -  -  ;	ld	(hl), a
  422 D1:C07E -  -  -  -  ;	add	hl, de
  423 D1:C07E -  -  -  -  ;	ld	(hl), a
  424 D1:C07E -  -  -  -  ;	add	hl, de
  425 D1:C07E -  -  -  -  ;	ld	(hl), a
  426 D1:C07E -  -  -  -  ;	add	hl, de
  427 D1:C07E -  -  -  -  ;	ld	(hl), a
  428 D1:C07E -  -  -  -  ;	add	hl, de
  429 D1:C07E -  -  -  -  ;	ld	(hl), a
  430 D1:C07E -  -  -  -  ;	add	hl, de
  431 D1:C07E -  -  -  -  ;	ld	(hl), a
  432 D1:C07E -  -  -  -  ;	add	hl, de
  433 D1:C07E -  -  -  -  ;	ld	(hl), a
  434 D1:C07E -  -  -  -  ;	add	hl, de
  435 D1:C07E -  -  -  -  ;	djnz	vxResetCacheLoop
  436 D1:C07E -  -  -  -  ;	ret
  437 D1:C07E -  -  -  -  
  438 D1:C07E -  -  -  -  vxCmdStream:
  439 D1:C07E -  -  -  -  ; hl - vertex source, bc - vertex cache, ix worldview matrix, iy modelworld matrix (should be an model matrix)
  440 D1:C07E -  -  -  -  ; vertex source have size at the begining
  441 D1:C07E -  -  -  -  ; support animation
  442 D1:C07E C5 -  -  -  	push	bc
  443 D1:C07F E5 -  -  -  	push	hl
  444 D1:C080 -  -  -  -  ; load shader first
  445 D1:C080 21 0B BA D1 	ld	hl, VX_VERTEX_SHADER_COPY
  446 D1:C084 11 00 08 E3 	ld	de, VX_VRAM
  447 D1:C088 01 00 04 00 	ld	bc, VX_VERTEX_SHADER_SIZE
  448 D1:C08C ED B0 -  -  	ldir
  449 D1:C08E -  -  -  -  ; transform the worldview with the modelworld matrix to have the global modelview matrix
  450 D1:C08E -  -  -  -  ; modelviewcache = modelworld * worldview
  451 D1:C08E 21 92 BD D1 	ld	hl, vxModelViewCache
  452 D1:C092 CD 1E AD D1 	call	vxMatrixTransform		; (hl) = (iy)*(ix)
  453 D1:C096 -  -  -  -  ; modelview=modelviewcache
  454 D1:C096 11 00 08 E3 	ld	de, vxModelView
  455 D1:C09A 01 12 00 00 	ld	bc, VX_MATRIX_SIZE
  456 D1:C09E ED B0 -  -  	ldir
  457 D1:C0A0 -  -  -  -  ; modelworld=modelworld
  458 D1:C0A0 -  -  -  -  ; tmodelworld=transpose(modelworld)
  459 D1:C0A0 ED 23 00 -  	lea	hl, iy+0
  460 D1:C0A3 11 A4 BD D1 	ld	de, vxModelWorld
  461 D1:C0A7 01 12 00 00 	ld	bc, VX_MATRIX_SIZE
  462 D1:C0AB ED B0 -  -  	ldir
  463 D1:C0AD ED 23 00 -  	lea	hl, iy+0
  464 D1:C0B0 01 12 00 00 	ld	bc, VX_MATRIX_SIZE
  465 D1:C0B4 ED B0 -  -  	ldir
  466 D1:C0B6 DD 21 B6 BD 
              D1 -  -  -  	ld	ix, vxTModelWorld
  467 D1:C0BB CD 41 AD D1 	call	vxMatrixTranspose
  468 D1:C0BF -  -  -  -  ; light0cache=light0
  469 D1:C0BF -  -  -  -  ; light0=light0*transpose(modelworld)
  470 D1:C0BF 21 12 08 E3 	ld	hl, vxLight0
  471 D1:C0C3 11 C8 BD D1 	ld	de, vxLight0Cache
  472 D1:C0C7 01 0A 00 00 	ld	bc, VX_LIGHT_SIZE
  473 D1:C0CB ED B0 -  -  	ldir
  474 D1:C0CD -  -  -  -  ; do light*matrix (hl) = (iy)*(ix)
  475 D1:C0CD 21 12 08 E3 	ld	hl, vxLight0
  476 D1:C0D1 FD 21 C8 BD 
              D1 -  -  -  	ld	iy, vxLight0Cache
  477 D1:C0D6 CD 66 AD D1 	call	vxMatrixLightning
  478 D1:C0DA -  -  -  -  ; load up shader data
  479 D1:C0DA DD 21 00 08 
              E3 -  -  -  	ld	ix, VX_VERTEX_SHADER_DATA
  480 D1:C0DF FD E1 -  -  	pop	iy
  481 D1:C0E1 -  -  -  -  ; iy = source, ix = matrix
  482 D1:C0E1 FD 7E 00 -  	ld	a, (iy+0)
  483 D1:C0E4 FD 07 01 -  	ld	bc, (iy+1)
  484 D1:C0E7 ED 33 03 -  	lea	iy, iy+3
  485 D1:C0EA E6 08 -  -  	and	VX_VERTEX_BOX
  486 D1:C0EC C4 61 C1 D1 	call	nz, vxVertexStreamBox
  487 D1:C0F0 D1 -  -  -  	pop	de
  488 D1:C0F1 D8 -  -  -  	ret	c
  489 D1:C0F2 -  -  -  -  ; iy+0 are options, so check those. Here, only bounding box is interesting.
  490 D1:C0F2 79 -  -  -  	ld	a, c
  491 D1:C0F3 0B -  -  -  	dec	bc
  492 D1:C0F4 04 -  -  -  	inc	b
  493 D1:C0F5 48 -  -  -  	ld	c, b
  494 D1:C0F6 47 -  -  -  	ld	b, a
  495 D1:C0F7 -  -  -  -  ; de = cache, iy = source, ix = matrix, bc = size
  496 D1:C0F7 -  -  -  -  vxCmdStreamLoop:
  497 D1:C0F7 C5 -  -  -  	push	bc
  498 D1:C0F8 -  -  -  -  ; read first source value, if value=32768, then compute bone
  499 D1:C0F8 FD 07 00 -  	ld	bc, (iy+0)
  500 D1:C0FB 78 -  -  -  	ld	a, b
  501 D1:C0FC EE 80 -  -  	xor	VX_ANIMATION_BONE/256
  502 D1:C0FE B1 -  -  -  	or	a, c
  503 D1:C0FF 28 0C -  -  	jr	z, vxCmdComputeBone
  504 D1:C101 -  -  -  -  ; wasn't a bone in source, so read vertex
  505 D1:C101 -  -  -  -  ; call vertex shader
  506 D1:C101 CD 1C 08 E3 	call	vxVertexShader
  507 D1:C105 -  -  -  -  vxCmdStreamLoopBack:
  508 D1:C105 C1 -  -  -  	pop	bc
  509 D1:C106 10 EF -  -  	djnz	vxCmdStreamLoop
  510 D1:C108 0D -  -  -  	dec	c
  511 D1:C109 20 EC -  -  	jr	nz, vxCmdStreamLoop
  512 D1:C10B B7 -  -  -  	or	a, a
  513 D1:C10C C9 -  -  -  	ret
  514 D1:C10D -  -  -  -  vxCmdComputeBone:
  515 D1:C10D -  -  -  -  ; more complex stuff here. Need to restore initial matrix & do a multiplication with the correct bone key matrix
  516 D1:C10D -  -  -  -  ; once done, only advance in the source, not the cache
  517 D1:C10D D5 -  -  -  	push	de
  518 D1:C10E ED 33 03 -  	lea	iy, iy+3
  519 D1:C111 FD E5 -  -  	push	iy
  520 D1:C113 3A D2 BD D1 	ld	a, (vxKeyAnimation)
  521 D1:C117 5F -  -  -  	ld	e, a
  522 D1:C118 16 0F -  -  	ld	d, VX_ANIMATION_MATRIX_SIZE
  523 D1:C11A ED 5C -  -  	mlt	de
  524 D1:C11C FD 19 -  -  	add	iy, de	; correct animation matrix
  525 D1:C11E -  -  -  -  ; modelview = bonemodel*modelview
  526 D1:C11E 21 00 08 E3 	ld	hl, vxModelView
  527 D1:C122 DD 21 92 BD 
              D1 -  -  -  	ld	ix, vxModelViewCache
  528 D1:C127 CD 1E AD D1 	call	vxMatrixTransform	; (hl)=(iy)*(ix)
  529 D1:C12B -  -  -  -  ; I have the correct modelview matrix in shader cache area
  530 D1:C12B -  -  -  -  ; next one is reduced matrix without translation, since it will only be a direction vector mlt. However, the light vector position also need to be transformed by the transposed matrix
  531 D1:C12B -  -  -  -  ; light0 = light0cache*transpose(bonemodel*modelworld)
  532 D1:C12B DD 21 A4 BD 
              D1 -  -  -  	ld	ix, vxModelWorld
  533 D1:C130 ED 22 12 -  	lea	hl, ix+VX_MATRIX_SIZE
  534 D1:C133 CD BB AC D1 	call	vxMatrixMlt
  535 D1:C137 ED 32 12 -  	lea	ix, ix+VX_MATRIX_SIZE
  536 D1:C13A CD 41 AD D1 	call	vxMatrixTranspose
  537 D1:C13E 21 12 08 E3 	ld	hl, vxLight0
  538 D1:C142 FD 21 C8 BD 
              D1 -  -  -  	ld	iy, vxLight0Cache
  539 D1:C147 CD 66 AD D1 	call	vxMatrixLightning
  540 D1:C14B FD E1 -  -  	pop	iy
  541 D1:C14D FD 7E FF -  	ld	a, (iy-1)
  542 D1:C150 5F -  -  -  	ld	e, a
  543 D1:C151 16 0F -  -  	ld	d, VX_ANIMATION_MATRIX_SIZE
  544 D1:C153 ED 5C -  -  	mlt	de
  545 D1:C155 FD 19 -  -  	add	iy, de
  546 D1:C157 D1 -  -  -  	pop	de
  547 D1:C158 C1 -  -  -  	pop	bc
  548 D1:C159 DD 21 00 08 
              E3 -  -  -  	ld	ix, VX_VERTEX_SHADER_DATA
  549 D1:C15E 18 97 -  -  	jr	vxCmdStreamLoop
  550 D1:C160 -  -  -  -  vxVertexBoxCode:
  551 D1:C160 00 -  -  -  	.db	0
  552 D1:C161 -  -  -  -  vxVertexStreamBox:
  553 D1:C161 C5 -  -  -  	push	bc
  554 D1:C162 -  -  -  -  ; check the bounding box
  555 D1:C162 11 1F B5 D1 	ld	de, VX_VERTEX_POOL
  556 D1:C166 3E FF -  -  	ld	a, $FF
  557 D1:C168 32 60 C1 D1 	ld	(vxVertexBoxCode), a
  558 D1:C16C 06 08 -  -  	ld	b, 8
  559 D1:C16E -  -  -  -  vxVertexBoxLoop:
  560 D1:C16E C5 -  -  -  	push	bc
  561 D1:C16F FD 07 00 -  	ld	bc, (iy+0)
  562 D1:C172 CD 1C 08 E3 	call	vxVertexShader
  563 D1:C176 ED 33 FD -  	lea	iy, iy-3
  564 D1:C179 21 F0 FF FF 	ld	hl, -16
  565 D1:C17D 19 -  -  -  	add	hl, de
  566 D1:C17E 3A 60 C1 D1 	ld	a, (vxVertexBoxCode)
  567 D1:C182 A6 -  -  -  	and	a, (hl)
  568 D1:C183 32 60 C1 D1 	ld	(vxVertexBoxCode), a
  569 D1:C187 C1 -  -  -  	pop	bc
  570 D1:C188 10 E4 -  -  	djnz	vxVertexBoxLoop
  571 D1:C18A C1 -  -  -  	pop	bc
  572 D1:C18B B7 -  -  -  	or	a, a	
  573 D1:C18C C8 -  -  -  	ret	z
  574 D1:C18D 37 -  -  -  	scf
  575 D1:C18E C9 -  -  -  	ret
  576 D1:C18F -  -  -  -  
  577 D1:C18F -  -  -  -  #comment
  578 D1:C18F             vxCmdStream:
  579 D1:C18F             ; hl - vertex source, de - vertex cache, ix matrix, support  animation, if animation : use vxKeyAnimation
  580 D1:C18F             ; vertex source have size at the begining
  581 D1:C18F             ; copy matrix into vxWorldView matrix & ModelView matrix
  582 D1:C18F             	push	de
  583 D1:C18F             	push	hl
  584 D1:C18F             
  585 D1:C18F             ; load shader first
  586 D1:C18F             
  587 D1:C18F             	ld	hl, VX_GLOBAL_SHADER_COPY
  588 D1:C18F             	ld	de, VX_VRAM
  589 D1:C18F             	ld	bc, VX_GLOBAL_SHADER_SIZE
  590 D1:C18F             	ldir
  591 D1:C18F             
  592 D1:C18F             	lea	hl, ix+0
  593 D1:C18F             	ld	de, vxWorldView
  594 D1:C18F             	ld	bc, VX_MATRIX_SIZE
  595 D1:C18F             	ldir
  596 D1:C18F             
  597 D1:C18F             	lea	hl, ix+0
  598 D1:C18F             	ld	de, vxModelView
  599 D1:C18F             	ld	bc, VX_MATRIX_SIZE
  600 D1:C18F             	ldir
  601 D1:C18F             ;;	ld	ix, vxModelView
  602 D1:C18F             ;
  603 D1:C18F             	ld	ix, VX_GLOBAL_SHADER_DATA
  604 D1:C18F             ; compute transpose
  605 D1:C18F             
  606 D1:C18F             	pop	hl
  607 D1:C18F             	pop	de
  608 D1:C18F             
  609 D1:C18F             	ld	bc, (hl)
  610 D1:C18F             	inc hl \ inc hl \ inc hl
  611 D1:C18F             	push	hl
  612 D1:C18F             	pop	iy
  613 D1:C18F             	ld	a, c
  614 D1:C18F             	dec	bc
  615 D1:C18F             	inc	b
  616 D1:C18F             	ld	c, b
  617 D1:C18F             	ld	b, a
  618 D1:C18F             
  619 D1:C18F             ; de = cache, iy = source, ix = matrix, bc = size
  620 D1:C18F             vxCmdStreamLoop0:
  621 D1:C18F             	push	bc
  622 D1:C18F             ; read first source value, if value=32768, then compute bone
  623 D1:C18F             	ld	bc, (iy+0)
  624 D1:C18F             ;;	ld	hl, VX_ANIMATION_BONE
  625 D1:C18F             ;;	or	a, a
  626 D1:C18F             ;;	sbc.s	hl, bc
  627 D1:C18F             
  628 D1:C18F             	ld	a, b
  629 D1:C18F             	xor	VX_ANIMATION_BONE/256
  630 D1:C18F             	or	a, c
  631 D1:C18F             
  632 D1:C18F             	jr	z, vxCmdStreamBone
  633 D1:C18F             ; wasn't a bone in source, so read vertex
  634 D1:C18F             ; transform vertex ! Take source iy*ix then copy value to cache
  635 D1:C18F             	call	vxVertexShader
  636 D1:C18F             vxCmdStreamLoopBack:
  637 D1:C18F             	pop	bc
  638 D1:C18F             	djnz	vxCmdStreamLoop0
  639 D1:C18F             	dec	c
  640 D1:C18F             	jr	nz, vxCmdStreamLoop0
  641 D1:C18F             	ret
  642 D1:C18F             vxCmdStreamBone:
  643 D1:C18F             ; more complex stuff here. Need to restore initial matrix & do a multiplication with the correct bone key matrix
  644 D1:C18F             ; once done, only advance in the source, not the cache
  645 D1:C18F             	push	de
  646 D1:C18F             ; matrix:
  647 D1:C18F             	lea	ix, iy+3
  648 D1:C18F             	ld	a, (vxKeyAnimation)
  649 D1:C18F             	ld	e, a
  650 D1:C18F             	ld	d, VX_ANIMATION_MATRIX_SIZE
  651 D1:C18F             	mlt	de
  652 D1:C18F             	add	ix, de	; correct animation matrix
  653 D1:C18F             ; todo : do current matrix * this matrix
  654 D1:C18F             	push	iy
  655 D1:C18F             ; first transform the translation by the world matrix
  656 D1:C18F             	push	ix
  657 D1:C18F             	lea	iy, ix+9	; load translation part
  658 D1:C18F             	ld	ix, vxWorldView
  659 D1:C18F             	call	vxCmdTransform
  660 D1:C18F             ; copy back data
  661 D1:C18F             	ld	hl, vxPosition
  662 D1:C18F             	ld	de, vxModelView+9
  663 D1:C18F             	ld	bc, 9
  664 D1:C18F             	ldir
  665 D1:C18F             	pop	iy
  666 D1:C18F             	ld	ix, vxWorldView
  667 D1:C18F             	ld	hl, vxModelView
  668 D1:C18F             ; hl=iy*ix
  669 D1:C18F             	call	IMatrixMlt
  670 D1:C18F             
  671 D1:C18F             	ld	ix, vxModelView	; concatenation of modelWorld and WorldView
  672 D1:C18F             
  673 D1:C18F             	pop	iy
  674 D1:C18F             	ld	a, (iy+2)	; number of matrix, advance
  675 D1:C18F             	ld	e, a
  676 D1:C18F             	ld	d, VX_ANIMATION_MATRIX_SIZE
  677 D1:C18F             	mlt	de
  678 D1:C18F             	add	iy, de
  679 D1:C18F             	lea	iy, iy+3
  680 D1:C18F             	pop	de
  681 D1:C18F             	pop	bc
  682 D1:C18F             	jp	vxCmdStreamLoop0
  683 D1:C18F             #endcomment
  684 D1:C18F -  -  -  -  
  685 D1:C18F -  -  -  -  vxCmdDepthSort:
  686 D1:C18F C5 -  -  -  	push	bc
  687 D1:C190 01 FF 01 00 	ld	bc, 511
  688 D1:C194 21 FF 33 D0 	ld	hl, VX_DEPTH_BUCKET+511
  689 D1:C198 11 FE 33 D0 	ld	de, VX_DEPTH_BUCKET+510
  690 D1:C19C 36 00 -  -  	ld	(hl), $00
  691 D1:C19E ED B8 -  -  	lddr
  692 D1:C1A0 C1 -  -  -  	pop	bc
  693 D1:C1A1 -  -  -  -  ; sort the current submission queue
  694 D1:C1A1 ED 4B 89 BD 
              D1 -  -  -  	ld	bc, (vxGeometrySize)
  695 D1:C1A6 78 -  -  -  	ld	a, b
  696 D1:C1A7 B1 -  -  -  	or	c
  697 D1:C1A8 C8 -  -  -  	ret	z
  698 D1:C1A9 FD 21 00 00 
              D1 -  -  -  	ld	iy, VX_GEOMETRY_QUEUE
  699 D1:C1AE DD 2A 14 00 
              E3 -  -  -  	ld	ix, (vxDepthSortTemp)
  700 D1:C1B3 -  -  -  -  
  701 D1:C1B3 79 -  -  -  	ld	a, c
  702 D1:C1B4 0B -  -  -  	dec	bc
  703 D1:C1B5 04 -  -  -  	inc	b
  704 D1:C1B6 48 -  -  -  	ld	c, b
  705 D1:C1B7 47 -  -  -  	ld	b, a
  706 D1:C1B8 -  -  -  -  vxCmdDepthCompute:
  707 D1:C1B8 C5 -  -  -  	push	bc
  708 D1:C1B9 FD E5 -  -  	push	iy
  709 D1:C1BB 21 00 BE D1 	ld	hl, VX_BATCH_DATA
  710 D1:C1BF FD 6E 00 -  	ld	l, (iy+0)
  711 D1:C1C2 7D -  -  -  	ld	a, l		; batch index
  712 D1:C1C3 23 -  -  -  	inc	hl
  713 D1:C1C4 ED 07 -  -  	ld	bc, (hl)	; grab cache, important
  714 D1:C1C6 FD 37 01 -  	ld	iy, (iy+1)	; this is adress of vertex index
  715 D1:C1C9 -  -  -  -  
  716 D1:C1C9 DD E5 -  -  	push	ix
  717 D1:C1CB FD 31 00 -  	ld	ix, (iy+0)
  718 D1:C1CE DD 09 -  -  	add	ix, bc
  719 D1:C1D0 DD 27 0D -  	ld	hl, (ix+13)
  720 D1:C1D3 FD 31 03 -  	ld	ix, (iy+3)
  721 D1:C1D6 DD 09 -  -  	add	ix, bc	; add cache adress of batch
  722 D1:C1D8 DD 17 0D -  	ld	de, (ix+13)
  723 D1:C1DB 19 -  -  -  	add	hl, de	; add up Z coordinate
  724 D1:C1DC FD 31 06 -  	ld	ix, (iy+6)
  725 D1:C1DF DD 09 -  -  	add	ix, bc
  726 D1:C1E1 DD 17 0D -  	ld	de, (ix+13)
  727 D1:C1E4 B7 -  -  -  	or	a, a
  728 D1:C1E5 ED 5A -  -  	adc	hl, de	; et voil !
  729 D1:C1E7 -  -  -  -  ; check for <0
  730 D1:C1E7 F2 EE C1 D1 	jp	p, vxCmdDepthPositive
  731 D1:C1EB B7 -  -  -  	or	a, a
  732 D1:C1EC ED 62 -  -  	sbc	hl, hl
  733 D1:C1EE -  -  -  -  vxCmdDepthPositive:
  734 D1:C1EE DD E1 -  -  	pop	ix
  735 D1:C1F0 -  -  -  -  
  736 D1:C1F0 -  -  -  -  ; write everything to tmp buffer
  737 D1:C1F0 DD 2F 00 -  	ld	(ix+0), hl	; depth
  738 D1:C1F3 DD 3E 03 -  	ld	(ix+3), iy	; adress
  739 D1:C1F6 DD 77 06 -  	ld	(ix+6), a	; batch id
  740 D1:C1F9 ED 32 07 -  	lea	ix, ix+7
  741 D1:C1FC -  -  -  -  ; fill depth bucket
  742 D1:C1FC 7D -  -  -  	ld	a, l
  743 D1:C1FD 21 00 32 D0 	ld	hl, VX_DEPTH_BUCKET
  744 D1:C201 6F -  -  -  	ld	l, a
  745 D1:C202 -  -  -  -  ;	inc	(hl)
  746 D1:C202 3E 07 -  -  	ld	a, 7
  747 D1:C204 86 -  -  -  	add	a, (hl)
  748 D1:C205 77 -  -  -  	ld	(hl), a
  749 D1:C206 -  -  -  -  ; nz
  750 D1:C206 30 02 -  -  	jr	nc, vxHSBDepthSkip
  751 D1:C208 24 -  -  -  	inc	h
  752 D1:C209 34 -  -  -  	inc	(hl)
  753 D1:C20A -  -  -  -  vxHSBDepthSkip:
  754 D1:C20A -  -  -  -  
  755 D1:C20A FD E1 -  -  	pop	iy
  756 D1:C20C ED 33 04 -  	lea	iy, iy+4
  757 D1:C20F C1 -  -  -  	pop	bc
  758 D1:C210 10 A6 -  -  	djnz	vxCmdDepthCompute
  759 D1:C212 0D -  -  -  	dec	c
  760 D1:C213 20 A3 -  -  	jr	nz, vxCmdDepthCompute
  761 D1:C215 -  -  -  -  ; and now the sorting : apply a radix sort on the data (huge & complicate, constant speed per triangle of about 1300TStates)
  762 D1:C215 -  -  -  -  
  763 D1:C215 2A 14 00 E3 	ld	hl, (vxDepthSortTemp)
  764 D1:C219 22 05 C3 D1 	ld	(vxCmdReadBuffer0), hl
  765 D1:C21D 22 F0 C2 D1 	ld	(vxCmdWriteBuffer0), hl
  766 D1:C221 11 00 70 00 	ld	de, VX_MAX_TRIANGLE*7
  767 D1:C225 19 -  -  -  	add	hl, de
  768 D1:C226 22 8C C2 D1 	ld	(vxCmdReadBuffer1), hl
  769 D1:C22A 22 77 C2 D1 	ld	(vxCmdWriteBuffer1), hl
  770 D1:C22E -  -  -  -  
  771 D1:C22E -  -  -  -  ; restore index position in array
  772 D1:C22E 21 FF 33 D0 	ld	hl, VX_DEPTH_BUCKET+511
  773 D1:C232 56 -  -  -  	ld	d, (hl)
  774 D1:C233 25 -  -  -  	dec	h
  775 D1:C234 5E -  -  -  	ld	e, (hl)
  776 D1:C235 2D -  -  -  	dec	l
  777 D1:C236 -  -  -  -  vxCmdRestoreBucketLoop0:
  778 D1:C236 4E -  -  -  	ld	c, (hl)
  779 D1:C237 24 -  -  -  	inc	h
  780 D1:C238 46 -  -  -  	ld	b, (hl)
  781 D1:C239 EB -  -  -  	ex	de, hl
  782 D1:C23A 09 -  -  -  	add	hl, bc
  783 D1:C23B EB -  -  -  	ex	de, hl
  784 D1:C23C 72 -  -  -  	ld	(hl), d
  785 D1:C23D 25 -  -  -  	dec	h
  786 D1:C23E 73 -  -  -  	ld	(hl), e
  787 D1:C23F 2D -  -  -  	dec	l
  788 D1:C240 20 F4 -  -  	jr	nz, vxCmdRestoreBucketLoop0
  789 D1:C242 4E -  -  -  	ld	c, (hl)
  790 D1:C243 24 -  -  -  	inc	h
  791 D1:C244 46 -  -  -  	ld	b, (hl)
  792 D1:C245 EB -  -  -  	ex	de, hl
  793 D1:C246 09 -  -  -  	add	hl, bc
  794 D1:C247 EB -  -  -  	ex	de, hl
  795 D1:C248 72 -  -  -  	ld	(hl), d
  796 D1:C249 25 -  -  -  	dec	h
  797 D1:C24A 73 -  -  -  	ld	(hl), e
  798 D1:C24B -  -  -  -  ; and copy to the correct position
  799 D1:C24B ED 32 F9 -  	lea	ix, ix-7
  800 D1:C24E -  -  -  -  ; reset bcu
  801 D1:C24E 52 03 -  -  	inc.sil	bc
  802 D1:C250 42 -  -  -  	ld	b, d
  803 D1:C251 4B -  -  -  	ld	c, e
  804 D1:C252 -  -  -  -  
  805 D1:C252 ED 4B 89 BD 
              D1 -  -  -  	ld	bc, (vxGeometrySize)
  806 D1:C257 -  -  -  -  
  807 D1:C257 79 -  -  -  	ld	a, c
  808 D1:C258 0B -  -  -  	dec	bc
  809 D1:C259 04 -  -  -  	inc	b
  810 D1:C25A 4F -  -  -  	ld	c, a
  811 D1:C25B -  -  -  -  
  812 D1:C25B C5 -  -  -  	push	bc
  813 D1:C25C C5 -  -  -  	push	bc
  814 D1:C25D C5 -  -  -  	push	bc
  815 D1:C25E C5 -  -  -  	push	bc
  816 D1:C25F -  -  -  -  
  817 D1:C25F 79 -  -  -  	ld	a, c
  818 D1:C260 -  -  -  -  vxCmdFillBucketOuter0:
  819 D1:C260 C5 -  -  -  	push	bc
  820 D1:C261 06 00 -  -  	ld	b, 0
  821 D1:C263 -  -  -  -  vxCmdFillBucketInner0:
  822 D1:C263 21 07 32 D0 	ld	hl, VX_DEPTH_BUCKET+7
  823 D1:C267 4D -  -  -  	ld	c, l
  824 D1:C268 DD 6E 00 -  	ld	l, (ix+0)
  825 D1:C26B 5E -  -  -  	ld	e, (hl)
  826 D1:C26C 24 -  -  -  	inc	h
  827 D1:C26D 56 -  -  -  	ld	d, (hl)
  828 D1:C26E -  -  -  -  ;	dec	de
  829 D1:C26E EB -  -  -  	ex	de, hl
  830 D1:C26F 52 ED 42 -  	sbc.s	hl, bc
  831 D1:C272 EB -  -  -  	ex	de, hl
  832 D1:C273 72 -  -  -  	ld	(hl), d
  833 D1:C274 25 -  -  -  	dec	h
  834 D1:C275 73 -  -  -  	ld	(hl), e
  835 D1:C276 -  -  -  -  ; de*7+write_buffer
  836 D1:C276 -  -  -  -  ;	ld	h, c
  837 D1:C276 -  -  -  -  ;	ld	l, d
  838 D1:C276 -  -  -  -  ;	ld	d, c
  839 D1:C276 -  -  -  -  ;	mlt	hl
  840 D1:C276 -  -  -  -  ;	mlt	de
  841 D1:C276 -  -  -  -  ;	ld	h, l
  842 D1:C276 -  -  -  -  ;	ld	l, b
  843 D1:C276 -  -  -  -  ;	add	hl, de
  844 D1:C276 -  -  -  -  vxCmdWriteBuffer1=$+1
  845 D1:C276 21 00 00 00 	ld	hl, $0
  846 D1:C27A 19 -  -  -  	add	hl, de
  847 D1:C27B EB -  -  -  	ex	de, hl
  848 D1:C27C ED 22 00 -  	lea	hl, ix+0
  849 D1:C27F ED B0 -  -  	ldir
  850 D1:C281 ED 32 F9 -  	lea	ix, ix-7
  851 D1:C284 3D -  -  -  	dec	a
  852 D1:C285 20 DC -  -  	jr	nz, vxCmdFillBucketInner0
  853 D1:C287 C1 -  -  -  	pop	bc
  854 D1:C288 10 D6 -  -  	djnz	vxCmdFillBucketOuter0
  855 D1:C28A -  -  -  -  
  856 D1:C28A -  -  -  -  vxCmdReadBuffer1=$+2
  857 D1:C28A DD 21 00 00 
              00 -  -  -  	ld	ix, $0
  858 D1:C28F -  -  -  -  
  859 D1:C28F 01 FF 01 00 	ld	bc, 511
  860 D1:C293 21 FF 33 D0 	ld	hl, VX_DEPTH_BUCKET+511
  861 D1:C297 11 FE 33 D0 	ld	de, VX_DEPTH_BUCKET+510
  862 D1:C29B 36 00 -  -  	ld	(hl), $00
  863 D1:C29D ED B8 -  -  	lddr
  864 D1:C29F -  -  -  -  ; restore size
  865 D1:C29F C1 -  -  -  	pop	bc
  866 D1:C2A0 79 -  -  -  	ld	a, c
  867 D1:C2A1 48 -  -  -  	ld	c, b
  868 D1:C2A2 47 -  -  -  	ld	b, a
  869 D1:C2A3 1E 07 -  -  	ld	e, 7
  870 D1:C2A5 DD 6E 01 -  	ld	l, (ix+1)
  871 D1:C2A8 7B -  -  -  	ld	a, e
  872 D1:C2A9 86 -  -  -  	add	a, (hl)
  873 D1:C2AA 77 -  -  -  	ld	(hl), a
  874 D1:C2AB 30 03 -  -  	jr	nc, $+5
  875 D1:C2AD 24 -  -  -  	inc	h
  876 D1:C2AE 34 -  -  -  	inc	(hl)
  877 D1:C2AF 25 -  -  -  	dec	h
  878 D1:C2B0 ED 32 07 -  	lea	ix, ix+7
  879 D1:C2B3 10 F0 -  -  	djnz	$-14
  880 D1:C2B5 0D -  -  -  	dec	c
  881 D1:C2B6 20 ED -  -  	jr	nz, $-17
  882 D1:C2B8 2E FF -  -  	ld	l, 255
  883 D1:C2BA 5E -  -  -  	ld	e, (hl)
  884 D1:C2BB 24 -  -  -  	inc	h
  885 D1:C2BC 56 -  -  -  	ld	d, (hl)
  886 D1:C2BD 25 -  -  -  	dec	h
  887 D1:C2BE 2D -  -  -  	dec	l
  888 D1:C2BF -  -  -  -  vxCmdRestoreBucket1:
  889 D1:C2BF 4E -  -  -  	ld	c, (hl)
  890 D1:C2C0 24 -  -  -  	inc	h
  891 D1:C2C1 46 -  -  -  	ld	b, (hl)
  892 D1:C2C2 EB -  -  -  	ex	de, hl
  893 D1:C2C3 09 -  -  -  	add	hl, bc
  894 D1:C2C4 EB -  -  -  	ex	de, hl
  895 D1:C2C5 72 -  -  -  	ld	(hl), d
  896 D1:C2C6 25 -  -  -  	dec	h
  897 D1:C2C7 73 -  -  -  	ld	(hl), e
  898 D1:C2C8 2D -  -  -  	dec	l
  899 D1:C2C9 20 F4 -  -  	jr	nz, vxCmdRestoreBucket1
  900 D1:C2CB 4E -  -  -  	ld	c, (hl)
  901 D1:C2CC 24 -  -  -  	inc	h
  902 D1:C2CD 46 -  -  -  	ld	b, (hl)
  903 D1:C2CE EB -  -  -  	ex	de, hl
  904 D1:C2CF 09 -  -  -  	add	hl, bc
  905 D1:C2D0 EB -  -  -  	ex	de, hl
  906 D1:C2D1 72 -  -  -  	ld	(hl), d
  907 D1:C2D2 25 -  -  -  	dec	h
  908 D1:C2D3 73 -  -  -  	ld	(hl), e
  909 D1:C2D4 ED 32 F9 -  	lea	ix, ix-7
  910 D1:C2D7 -  -  -  -  
  911 D1:C2D7 C1 -  -  -  	pop	bc
  912 D1:C2D8 79 -  -  -  	ld	a, c
  913 D1:C2D9 -  -  -  -  vxCmdFillBucketOuter1:
  914 D1:C2D9 C5 -  -  -  	push	bc
  915 D1:C2DA 06 00 -  -  	ld	b, 0
  916 D1:C2DC -  -  -  -  vxCmdFillBucketInner1:
  917 D1:C2DC 21 07 32 D0 	ld	hl, VX_DEPTH_BUCKET+7
  918 D1:C2E0 4D -  -  -  	ld	c, l
  919 D1:C2E1 DD 6E 01 -  	ld	l, (ix+1)
  920 D1:C2E4 5E -  -  -  	ld	e, (hl)
  921 D1:C2E5 24 -  -  -  	inc	h
  922 D1:C2E6 56 -  -  -  	ld	d, (hl)
  923 D1:C2E7 EB -  -  -  	ex	de, hl
  924 D1:C2E8 52 ED 42 -  	sbc.sil	hl, bc
  925 D1:C2EB EB -  -  -  	ex	de, hl
  926 D1:C2EC 72 -  -  -  	ld	(hl), d
  927 D1:C2ED 25 -  -  -  	dec	h
  928 D1:C2EE 73 -  -  -  	ld	(hl), e
  929 D1:C2EF -  -  -  -  vxCmdWriteBuffer0=$+1
  930 D1:C2EF 21 00 00 00 	ld	hl, $0
  931 D1:C2F3 19 -  -  -  	add	hl, de
  932 D1:C2F4 EB -  -  -  	ex	de, hl
  933 D1:C2F5 ED 22 00 -  	lea	hl, ix+0
  934 D1:C2F8 ED B0 -  -  	ldir
  935 D1:C2FA ED 32 F9 -  	lea	ix, ix-7
  936 D1:C2FD 3D -  -  -  	dec	a
  937 D1:C2FE 20 DC -  -  	jr	nz, vxCmdFillBucketInner1
  938 D1:C300 C1 -  -  -  	pop	bc
  939 D1:C301 10 D6 -  -  	djnz	vxCmdFillBucketOuter1
  940 D1:C303 -  -  -  -  
  941 D1:C303 -  -  -  -  vxCmdReadBuffer0=$+2
  942 D1:C303 DD 21 00 00 
              00 -  -  -  	ld	ix, $0
  943 D1:C308 -  -  -  -  
  944 D1:C308 01 FF 01 00 	ld	bc, 511
  945 D1:C30C 21 FF 33 D0 	ld	hl, VX_DEPTH_BUCKET+511
  946 D1:C310 11 FE 33 D0 	ld	de, VX_DEPTH_BUCKET+510
  947 D1:C314 36 00 -  -  	ld	(hl), $00
  948 D1:C316 ED B8 -  -  	lddr
  949 D1:C318 -  -  -  -  
  950 D1:C318 C1 -  -  -  	pop	bc
  951 D1:C319 79 -  -  -  	ld	a, c
  952 D1:C31A 48 -  -  -  	ld	c, b
  953 D1:C31B 47 -  -  -  	ld	b, a
  954 D1:C31C 1E 04 -  -  	ld	e, 4		; size of final batch
  955 D1:C31E DD 6E 02 -  	ld	l, (ix+2)
  956 D1:C321 7B -  -  -  	ld	a, e
  957 D1:C322 86 -  -  -  	add	a, (hl)
  958 D1:C323 77 -  -  -  	ld	(hl), a
  959 D1:C324 30 03 -  -  	jr	nc, $+5
  960 D1:C326 24 -  -  -  	inc	h
  961 D1:C327 34 -  -  -  	inc	(hl)
  962 D1:C328 25 -  -  -  	dec	h
  963 D1:C329 ED 32 07 -  	lea	ix, ix+7
  964 D1:C32C 10 F0 -  -  	djnz	$-14
  965 D1:C32E 0D -  -  -  	dec	c
  966 D1:C32F 20 ED -  -  	jr	nz, $-17
  967 D1:C331 2E FF -  -  	ld	l, 255
  968 D1:C333 5E -  -  -  	ld	e, (hl)
  969 D1:C334 24 -  -  -  	inc	h
  970 D1:C335 56 -  -  -  	ld	d, (hl)
  971 D1:C336 25 -  -  -  	dec	h
  972 D1:C337 2D -  -  -  	dec	l
  973 D1:C338 -  -  -  -  vxCmdRestoreBucket2:
  974 D1:C338 4E -  -  -  	ld	c, (hl)
  975 D1:C339 24 -  -  -  	inc	h
  976 D1:C33A 46 -  -  -  	ld	b, (hl)
  977 D1:C33B EB -  -  -  	ex	de, hl
  978 D1:C33C 09 -  -  -  	add	hl, bc
  979 D1:C33D EB -  -  -  	ex	de, hl
  980 D1:C33E 72 -  -  -  	ld	(hl), d
  981 D1:C33F 25 -  -  -  	dec	h
  982 D1:C340 73 -  -  -  	ld	(hl), e
  983 D1:C341 2D -  -  -  	dec	l
  984 D1:C342 20 F4 -  -  	jr	nz, vxCmdRestoreBucket2
  985 D1:C344 4E -  -  -  	ld	c, (hl)
  986 D1:C345 24 -  -  -  	inc	h
  987 D1:C346 46 -  -  -  	ld	b, (hl)
  988 D1:C347 EB -  -  -  	ex	de, hl
  989 D1:C348 09 -  -  -  	add	hl, bc
  990 D1:C349 EB -  -  -  	ex	de, hl
  991 D1:C34A 72 -  -  -  	ld	(hl), d
  992 D1:C34B 25 -  -  -  	dec	h
  993 D1:C34C 73 -  -  -  	ld	(hl), e
  994 D1:C34D ED 32 F9 -  	lea	ix, ix-7
  995 D1:C350 -  -  -  -  
  996 D1:C350 C1 -  -  -  	pop	bc
  997 D1:C351 79 -  -  -  	ld	a, c
  998 D1:C352 2C -  -  -  	inc	l
  999 D1:C353 -  -  -  -  vxCmdFillBucket2:
 1000 D1:C353 DD 6E 02 -  	ld	l, (ix+2)
 1001 D1:C356 5E -  -  -  	ld	e, (hl)
 1002 D1:C357 24 -  -  -  	inc	h
 1003 D1:C358 56 -  -  -  	ld	d, (hl)
 1004 D1:C359 52 1B -  -  	dec.sil	de
 1005 D1:C35B 1B -  -  -  	dec	de
 1006 D1:C35C 1B -  -  -  	dec	de
 1007 D1:C35D 1B -  -  -  	dec	de
 1008 D1:C35E 72 -  -  -  	ld	(hl), d
 1009 D1:C35F 25 -  -  -  	dec	h
 1010 D1:C360 73 -  -  -  	ld	(hl), e
 1011 D1:C361 FD 21 00 00 
              D1 -  -  -  	ld	iy, VX_GEOMETRY_QUEUE
 1012 D1:C366 FD 19 -  -  	add	iy, de
 1013 D1:C368 -  -  -  -  ; copy only the triangle adress
 1014 D1:C368 DD 17 03 -  	ld	de, (ix+3)
 1015 D1:C36B FD 1F 01 -  	ld	(iy+1), de
 1016 D1:C36E DD 6E 06 -  	ld	l, (ix+6)
 1017 D1:C371 FD 75 00 -  	ld	(iy+0), l
 1018 D1:C374 -  -  -  -  
 1019 D1:C374 ED 32 F9 -  	lea	ix, ix-7
 1020 D1:C377 3D -  -  -  	dec	a
 1021 D1:C378 20 D9 -  -  	jr	nz, vxCmdFillBucket2
 1022 D1:C37A 10 D7 -  -  	djnz	vxCmdFillBucket2
 1023 D1:C37C -  -  -  -  
 1024 D1:C37C C9 -  -  -  	ret
 1025 D1:C37D -  -  -  -  
 1026 D1:C37D -  -  -  -  
 1027 D1:C37D -  -  -  -  vxCmdBackfaceCull:
 1028 D1:C37D 13 -  -  -  	inc	de
 1029 D1:C37E 13 -  -  -  	inc	de
 1030 D1:C37F -  -  -  -  
 1031 D1:C37F FD 27 00 -  	ld	hl, (iy+0)
 1032 D1:C382 19 -  -  -  	add	hl, de
 1033 D1:C383 ED 07 -  -  	ld	bc, (hl)
 1034 D1:C385 2B -  -  -  	dec	hl
 1035 D1:C386 7E -  -  -  	ld	a, (hl)
 1036 D1:C387 FD 27 06 -  	ld	hl, (iy+6)
 1037 D1:C38A 19 -  -  -  	add	hl, de
 1038 D1:C38B ED 27 -  -  	ld	hl, (hl)
 1039 D1:C38D B7 -  -  -  	or	a, a
 1040 D1:C38E ED 42 -  -  	sbc	hl, bc
 1041 D1:C390 44 -  -  -  	ld	b, h
 1042 D1:C391 4D -  -  -  	ld	c, l
 1043 D1:C392 FD 27 03 -  	ld	hl, (iy+3)
 1044 D1:C395 19 -  -  -  	add	hl, de
 1045 D1:C396 2B -  -  -  	dec	hl
 1046 D1:C397 96 -  -  -  	sub	(hl)
 1047 D1:C398 -  -  -  -  
 1048 D1:C398 60 -  -  -  	ld	h, b
 1049 D1:C399 6F -  -  -  	ld	l, a
 1050 D1:C39A ED 6C -  -  	mlt	hl
 1051 D1:C39C -  -  -  -  ;;	jr	z, RR
 1052 D1:C39C 30 03 -  -  	jr	nc, $+5
 1053 D1:C39E B7 -  -  -  	or	a, a
 1054 D1:C39F ED 42 -  -  	sbc	hl, bc
 1055 D1:C3A1 CB 78 -  -  	bit	7, b
 1056 D1:C3A3 47 -  -  -  	ld	b, a
 1057 D1:C3A4 28 03 -  -  	jr	z, $+5
 1058 D1:C3A6 7C -  -  -  	ld	a, h
 1059 D1:C3A7 90 -  -  -  	sub	a, b
 1060 D1:C3A8 67 -  -  -  	ld	h, a
 1061 D1:C3A9 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
 1062 D1:C3B1 ED 4C -  -  	mlt	bc
 1063 D1:C3B3 09 -  -  -  	add	hl, bc
 1064 D1:C3B4 -  -  -  -  RR:
 1065 D1:C3B4 E5 -  -  -  	push	hl
 1066 D1:C3B5 -  -  -  -  
 1067 D1:C3B5 FD 27 00 -  	ld	hl, (iy+0)
 1068 D1:C3B8 19 -  -  -  	add	hl, de
 1069 D1:C3B9 ED 07 -  -  	ld	bc, (hl)
 1070 D1:C3BB 2B -  -  -  	dec	hl
 1071 D1:C3BC 7E -  -  -  	ld	a, (hl)
 1072 D1:C3BD FD 27 03 -  	ld	hl, (iy+3)
 1073 D1:C3C0 19 -  -  -  	add	hl, de
 1074 D1:C3C1 ED 27 -  -  	ld	hl, (hl)
 1075 D1:C3C3 B7 -  -  -  	or	a, a
 1076 D1:C3C4 ED 42 -  -  	sbc	hl, bc
 1077 D1:C3C6 44 -  -  -  	ld	b, h
 1078 D1:C3C7 4D -  -  -  	ld	c, l
 1079 D1:C3C8 -  -  -  -  
 1080 D1:C3C8 1B -  -  -  	dec	de
 1081 D1:C3C9 FD 27 06 -  	ld	hl, (iy+6)
 1082 D1:C3CC 19 -  -  -  	add	hl, de
 1083 D1:C3CD 96 -  -  -  	sub	(hl)
 1084 D1:C3CE -  -  -  -  
 1085 D1:C3CE 60 -  -  -  	ld	h, b
 1086 D1:C3CF 6F -  -  -  	ld	l, a
 1087 D1:C3D0 ED 6C -  -  	mlt	hl
 1088 D1:C3D2 -  -  -  -  ;;	jr	z, RR2
 1089 D1:C3D2 30 03 -  -  	jr	nc, $+5
 1090 D1:C3D4 B7 -  -  -  	or	a, a
 1091 D1:C3D5 ED 42 -  -  	sbc	hl, bc
 1092 D1:C3D7 CB 78 -  -  	bit	7, b
 1093 D1:C3D9 47 -  -  -  	ld	b, a
 1094 D1:C3DA 28 03 -  -  	jr	z, $+5
 1095 D1:C3DC 7C -  -  -  	ld	a, h
 1096 D1:C3DD 90 -  -  -  	sub	a, b
 1097 D1:C3DE 67 -  -  -  	ld	h, a
 1098 D1:C3DF 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
 1099 D1:C3E7 ED 4C -  -  	mlt	bc
 1100 D1:C3E9 09 -  -  -  	add	hl, bc
 1101 D1:C3EA -  -  -  -  RR2:
 1102 D1:C3EA C1 -  -  -  	pop	bc
 1103 D1:C3EB -  -  -  -  
 1104 D1:C3EB 37 -  -  -  	scf
 1105 D1:C3EC ED 42 -  -  	sbc	hl, bc
 1106 D1:C3EE -  -  -  -  
 1107 D1:C3EE 1B -  -  -  	dec	de
 1108 D1:C3EF C9 -  -  -  	ret
 1109 D1:C3F0 -  -  -  -  
 1110 D1:C3F0 -  -  -  -  
 1111 D1:C3F0 -  -  -  -  
 1112 D1:C3F0 -  -  -  -  vxCmdBackfaceCull2:
 1113 D1:C3F0 -  -  -  -  ; (x2-x0)*(y1-y0) - (x1-x0)*(y2-y0)
 1114 D1:C3F0 D5 -  -  -  	push	de
 1115 D1:C3F1 13 -  -  -  	inc	de
 1116 D1:C3F2 -  -  -  -  
 1117 D1:C3F2 FD 27 03 -  	ld	hl, (iy+3)
 1118 D1:C3F5 19 -  -  -  	add	hl, de
 1119 D1:C3F6 7E -  -  -  	ld	a, (hl)
 1120 D1:C3F7 FD 27 00 -  	ld	hl, (iy+0)
 1121 D1:C3FA 19 -  -  -  	add	hl, de
 1122 D1:C3FB 96 -  -  -  	sub	(hl)
 1123 D1:C3FC F5 -  -  -  	push	af
 1124 D1:C3FD 23 -  -  -  	inc	hl
 1125 D1:C3FE ED 07 -  -  	ld	bc, (hl)
 1126 D1:C400 FD 27 06 -  	ld	hl, (iy+6)
 1127 D1:C403 19 -  -  -  	add	hl, de
 1128 D1:C404 23 -  -  -  	inc	hl
 1129 D1:C405 ED 27 -  -  	ld	hl, (hl)
 1130 D1:C407 B7 -  -  -  	or	a, a
 1131 D1:C408 ED 42 -  -  	sbc	hl, bc
 1132 D1:C40A 44 -  -  -  	ld	b, h
 1133 D1:C40B 4D -  -  -  	ld	c, l
 1134 D1:C40C F1 -  -  -  	pop	af
 1135 D1:C40D 60 -  -  -  	ld	h, b
 1136 D1:C40E 6F -  -  -  	ld	l, a
 1137 D1:C40F ED 6C -  -  	mlt	hl
 1138 D1:C411 30 03 -  -  	jr	nc, $+5
 1139 D1:C413 B7 -  -  -  	or	a, a
 1140 D1:C414 ED 42 -  -  	sbc	hl, bc
 1141 D1:C416 CB 78 -  -  	bit	7, b
 1142 D1:C418 47 -  -  -  	ld	b, a
 1143 D1:C419 28 03 -  -  	jr	z, $+5
 1144 D1:C41B 7C -  -  -  	ld	a, h
 1145 D1:C41C 90 -  -  -  	sub	a, b
 1146 D1:C41D 67 -  -  -  	ld	h, a
 1147 D1:C41E 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
 1148 D1:C426 ED 4C -  -  	mlt	bc
 1149 D1:C428 09 -  -  -  	add	hl, bc
 1150 D1:C429 -  -  -  -  
 1151 D1:C429 E5 -  -  -  	push	hl
 1152 D1:C42A -  -  -  -  
 1153 D1:C42A FD 27 06 -  	ld	hl, (iy+6)
 1154 D1:C42D 19 -  -  -  	add	hl, de
 1155 D1:C42E 7E -  -  -  	ld	a, (hl)
 1156 D1:C42F FD 27 00 -  	ld	hl, (iy+0)
 1157 D1:C432 19 -  -  -  	add	hl, de
 1158 D1:C433 96 -  -  -  	sub	(hl)
 1159 D1:C434 F5 -  -  -  	push	af
 1160 D1:C435 23 -  -  -  	inc	hl
 1161 D1:C436 ED 07 -  -  	ld	bc, (hl)
 1162 D1:C438 FD 27 03 -  	ld	hl, (iy+3)
 1163 D1:C43B 19 -  -  -  	add	hl, de
 1164 D1:C43C 23 -  -  -  	inc	hl
 1165 D1:C43D ED 27 -  -  	ld	hl, (hl)
 1166 D1:C43F B7 -  -  -  	or	a, a
 1167 D1:C440 ED 42 -  -  	sbc	hl, bc
 1168 D1:C442 44 -  -  -  	ld	b, h
 1169 D1:C443 4D -  -  -  	ld	c, l
 1170 D1:C444 F1 -  -  -  	pop	af
 1171 D1:C445 60 -  -  -  	ld	h, b
 1172 D1:C446 6F -  -  -  	ld	l, a
 1173 D1:C447 ED 6C -  -  	mlt	hl
 1174 D1:C449 30 03 -  -  	jr	nc, $+5
 1175 D1:C44B B7 -  -  -  	or	a, a
 1176 D1:C44C ED 42 -  -  	sbc	hl, bc
 1177 D1:C44E CB 78 -  -  	bit	7, b
 1178 D1:C450 47 -  -  -  	ld	b, a
 1179 D1:C451 28 03 -  -  	jr	z, $+5
 1180 D1:C453 7C -  -  -  	ld	a, h
 1181 D1:C454 90 -  -  -  	sub	a, b
 1182 D1:C455 67 -  -  -  	ld	h, a
 1183 D1:C456 29 29 29 29 
              29 29 29 29 	slhl
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vx3D.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPipeline.ez80"
 1184 D1:C45E ED 4C -  -  	mlt	bc
 1185 D1:C460 09 -  -  -  	add	hl, bc
 1186 D1:C461 -  -  -  -  
 1187 D1:C461 D1 -  -  -  	pop	de
 1188 D1:C462 B7 -  -  -  	or	a, a
 1189 D1:C463 ED 52 -  -  	sbc	hl, de
 1190 D1:C465 D1 -  -  -  	pop	de
 1191 D1:C466 C9 -  -  -  	ret
 1192 D1:C467 -  -  -  -  
 1193 D1:C467 -  -  -  -  #comment
 1194 D1:C467             Monitor_Size_Start:
 1195 D1:C467             
 1196 D1:C467             vxVertexShader:
 1197 D1:C467             #define	CC 0
 1198 D1:C467             #define	SY 1
 1199 D1:C467             #define	SX 2
 1200 D1:C467             #define	VX 7
 1201 D1:C467             #define	VY 10
 1202 D1:C467             #define	VZ 13
 1203 D1:C467             #define	VX_GLOBAL_VCACHE_SIZE 16
 1204 D1:C467             #define	VX_GLOBAL_VERTEX_SIZE 6
 1205 D1:C467             ; ix = global data register [LV[0-2],LA,LE, MC[0-8],MTX,MTY,MTZ]
 1206 D1:C467             ; iy = vertex data register [VX,VY,VZ,VN[0-2]]
 1207 D1:C467             ; de = output data register [RC,SY,SX,RI[0-1],RX,RY,RZ]
 1208 D1:C467             ; bc = x vertex coordinate [16bits]
 1209 D1:C467             ; OUT register
 1210 D1:C467             ; de = de + VX_GLOBAL_VCACHE_SIZE
 1211 D1:C467             ; iy = iy + VX_GLOBAL_VERTEX_SIZE
 1212 D1:C467             ; data copied to memory
 1213 D1:C467             	pea	iy+VX_GLOBAL_VERTEX_SIZE
 1214 D1:C467             	push	de
 1215 D1:C467             ; X coordinate
 1216 D1:C467             ;	ld	bc, (iy+0)
 1217 D1:C467             	ld	hl, (ix+9)
 1218 D1:C467             	ld	a, (ix+0)
 1219 D1:C467             	madd
 1220 D1:C467             	ld	a, (ix+1)
 1221 D1:C467             	or	a, a
 1222 D1:C467             	jr	z, vxVertexSkip0
 1223 D1:C467             	ld	bc, (iy+2)
 1224 D1:C467             	madd
 1225 D1:C467             vxVertexSkip0:
 1226 D1:C467             	ld	a, (ix+2)
 1227 D1:C467             	ld	bc, (iy+4)
 1228 D1:C467             	madd.f
 1229 D1:C467             	push	hl
 1230 D1:C467             ; Z coordinate
 1231 D1:C467             	ld	hl, (ix+15)
 1232 D1:C467             	ld	a, (ix+8)
 1233 D1:C467             	madd
 1234 D1:C467             	ld	a, (ix+7)
 1235 D1:C467             	ld	bc, (iy+2)
 1236 D1:C467             	madd
 1237 D1:C467             	ld	a, (ix+6)
 1238 D1:C467             	ld	bc, (iy+0)
 1239 D1:C467             	madd.f
 1240 D1:C467             	push	hl
 1241 D1:C467             ; Y coordinate
 1242 D1:C467             	ld	hl, (ix+12)
 1243 D1:C467             	ld	a, (ix+3)
 1244 D1:C467             	madd
 1245 D1:C467             	ld	a, (ix+4)
 1246 D1:C467             	ld	bc, (iy+2)
 1247 D1:C467             	madd
 1248 D1:C467             	ld	a, (ix+5)
 1249 D1:C467             	ld	bc, (iy+4)
 1250 D1:C467             	madd
 1251 D1:C467             	pop	bc
 1252 D1:C467             	pop	de
 1253 D1:C467             	pop	iy
 1254 D1:C467             
 1255 D1:C467             	ld	(iy+VX), de
 1256 D1:C467             	ld	(iy+VY), hl
 1257 D1:C467             	ld	(iy+VZ), bc
 1258 D1:C467             ; 1740
 1259 D1:C467             	call	vxPerspectiveDivide
 1260 D1:C467             	ld	(iy+CC), a
 1261 D1:C467             	ld	(iy+SY), b
 1262 D1:C467             	ld	(iy+SX), hl
 1263 D1:C467             
 1264 D1:C467             ;	call	vxDotProduct
 1265 D1:C467             ;	jp	p, $+4+3
 1266 D1:C467             ;	or	a, a
 1267 D1:C467             ;	sbc	hl, hl
 1268 D1:C467             ;	ld	a, (ix+VX_LIGHT0_AMBIANT)
 1269 D1:C467             ;	add	a, l
 1270 D1:C467             ;	cp	32
 1271 D1:C467             ;	jr	nc, $+4
 1272 D1:C467             ;	ld	a, 32
 1273 D1:C467             ;	ld	(iy+VX_VERTEX_I0), a
 1274 D1:C467             
 1275 D1:C467             
 1276 D1:C467             	lea	de, iy+VX_GLOBAL_VCACHE_SIZE
 1277 D1:C467             	pop	iy
 1278 D1:C467             	ret
 1279 D1:C467             
 1280 D1:C467             
 1281 D1:C467             vxProjectClipY:
 1282 D1:C467                rrca
 1283 D1:C467                ccf
 1284 D1:C467                rra
 1285 D1:C467             ; a = y plane code
 1286 D1:C467             ; continue on x code
 1287 D1:C467                ld hl, (iy+7)
 1288 D1:C467                bit 7,(iy+2+7)
 1289 D1:C467                jr z, vxProjectClipXAbs
 1290 D1:C467                ex de, hl
 1291 D1:C467                sbc   hl, hl
 1292 D1:C467                sbc   hl, de
 1293 D1:C467             vxProjectClipXAbs:
 1294 D1:C467                rra
 1295 D1:C467                sbc   hl, bc
 1296 D1:C467                jr   c, vxProjectClipXIn
 1297 D1:C467                rlca
 1298 D1:C467                rrca
 1299 D1:C467                ccf
 1300 D1:C467                rra
 1301 D1:C467               bit 7,(iy+8+7)
 1302 D1:C467               ret z
 1303 D1:C467                or  %00001000
 1304 D1:C467                ret
 1305 D1:C467             vxProjectClipXIn:
 1306 D1:C467                rra
 1307 D1:C467                and   %00110000
 1308 D1:C467               bit 7,(iy+8+7)
 1309 D1:C467               ret z
 1310 D1:C467                or  %00001000
 1311 D1:C467                ret
 1312 D1:C467             ; plane x right : plane x left : plane y up : plane y down : 0 : 0 : 0 : 0
 1313 D1:C467             vxProject:
 1314 D1:C467                ld   hl, (iy+10)
 1315 D1:C467                ld   bc, (iy+13)
 1316 D1:C467             vxPerspectiveDivide:
 1317 D1:C467                xor a, a
 1318 D1:C467                bit 7,(iy+5+7)
 1319 D1:C467                jr   z, vxProjectYAbs
 1320 D1:C467                ex   de, hl
 1321 D1:C467                sbc   hl, hl
 1322 D1:C467                sbc   hl, de
 1323 D1:C467             vxProjectYAbs:
 1324 D1:C467                rla
 1325 D1:C467                sbc   hl, bc
 1326 D1:C467                jr nc, vxProjectClipY
 1327 D1:C467             
 1328 D1:C467                add   hl, bc
 1329 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1330 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1331 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1332 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1333 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1334 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1335 D1:C467                add hl,hl \ sbc hl,bc \ adc a,a
 1336 D1:C467                cpl
 1337 D1:C467                add   a, a
 1338 D1:C467                ld   l, VX_SCREEN_HEIGHT/2+1 ;precision stuffs
 1339 D1:C467                ld   h, a
 1340 D1:C467                mlt   hl
 1341 D1:C467                ld   a, h
 1342 D1:C467             
 1343 D1:C467                jr   nc, vxProjectYCorrect
 1344 D1:C467                neg
 1345 D1:C467             vxProjectYCorrect:
 1346 D1:C467                add   a, VX_SCREEN_HCENTER
 1347 D1:C467                push  af
 1348 D1:C467             ; project x coordinate
 1349 D1:C467                ld   hl, (iy+7)
 1350 D1:C467                xor   a, a
 1351 D1:C467                bit   7, (iy+2+7)
 1352 D1:C467                jr   z, vxProjectXAbs
 1353 D1:C467                ex   de, hl
 1354 D1:C467                sbc   hl, hl
 1355 D1:C467                sbc   hl, de
 1356 D1:C467             vxProjectXAbs:
 1357 D1:C467                rla
 1358 D1:C467               sbc   hl, bc
 1359 D1:C467                jr nc, vxProjectClipX
 1360 D1:C467                add   hl, bc
 1361 D1:C467             
 1362 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1363 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1364 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1365 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1366 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1367 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1368 D1:C467                add hl,hl \ sbc hl,bc \ jr nc,$+3 \ add hl,bc \ adc a,a
 1369 D1:C467                add hl,hl \ sbc hl,bc \ adc a,a
 1370 D1:C467                cpl
 1371 D1:C467                ld   c, a
 1372 D1:C467                ld   b, VX_SCREEN_WIDTH/2+1
 1373 D1:C467                mlt   bc
 1374 D1:C467                ld    a, b
 1375 D1:C467                sbc   hl, hl
 1376 D1:C467                jr   nc, $+3
 1377 D1:C467                cpl
 1378 D1:C467                ld   l, a
 1379 D1:C467                ld   bc, VX_SCREEN_WCENTER
 1380 D1:C467                adc   hl, bc
 1381 D1:C467                pop   bc ; grab y in b
 1382 D1:C467                xor   a,a
 1383 D1:C467                ret
 1384 D1:C467             vxProjectClipX:
 1385 D1:C467                pop   bc
 1386 D1:C467                rrca
 1387 D1:C467                ccf
 1388 D1:C467                rra
 1389 D1:C467               bit 7,(iy+8+7)
 1390 D1:C467               ret z
 1391 D1:C467                or  %00001000
 1392 D1:C467                ret
 1393 D1:C467             Monitor_Size_End:
 1394 D1:C467             	.echo	Monitor_Size_End-Monitor_Size_Start
 1395 D1:C467             #endcomment
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
    9 D1:C467 -  -  -  -  #include	"vxMemory.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMemory.ez80"
    1 D1:C467 -  -  -  -  #define	VX_RLE_COMPRESSED	%01000000
    2 D1:C467 -  -  -  -  #define	VX_ERROR_NOT_FOUND	$FF
    3 D1:C467 -  -  -  -  #define	VX_ERROR_RAM_FULL	$FE
    4 D1:C467 -  -  -  -  
    5 D1:C467 -  -  -  -  vxFindFile:
    6 D1:C467 -  -  -  -  ; load a file from an appv
    7 D1:C467 -  -  -  -  ; hl : file name
    8 D1:C467 -  -  -  -  ; hl = file adress
    9 D1:C467 -  -  -  -  ; if error : c set, a = error code
   10 D1:C467 CD 20 03 02 	call	_mov9toOP1
   11 D1:C46B CD 0C 05 02 	call	_ChkFindSym
   12 D1:C46F D8 -  -  -  	ret	c
   13 D1:C470 CD 98 1F 02 	call	_ChkInRam
   14 D1:C474 EB -  -  -  	ex de,hl
   15 D1:C475 28 08 -  -  	jr	z, vxFileUnarchived
   16 D1:C477 -  -  -  -  ; 9 bytes - name size (1b), name string, appv size (2b)
   17 D1:C477 11 09 00 00 	ld	de, 9
   18 D1:C47B 19 -  -  -  	add	hl, de
   19 D1:C47C 5E -  -  -  	ld	e, (hl)
   20 D1:C47D 19 -  -  -  	add	hl, de
   21 D1:C47E 23 -  -  -  	inc	hl
   22 D1:C47F -  -  -  -  vxFileUnarchived:
   23 D1:C47F 23 -  -  -  	inc	hl
   24 D1:C480 23 -  -  -  	inc	hl
   25 D1:C481 C9 -  -  -  	ret
   26 D1:C482 -  -  -  -  #comment
   27 D1:C482             vxAllocateMemory:
   28 D1:C482             ; error = c
   29 D1:C482             	push	bc
   30 D1:C482             	ld	ix, vxTempMemoryBlock
   31 D1:C482             	ld	hl, (ix+3)
   32 D1:C482             	inc	hl
   33 D1:C482             	ld	(ix+3), hl
   34 D1:C482             	lea	hl, ix-1
   35 D1:C482             	call  _mov9toOP1
   36 D1:C482             	pop	hl
   37 D1:C482             	ld	a, 16h
   38 D1:C482             	call	_CreateVar
   39 D1:C482             	inc	de
   40 D1:C482             	inc	de
   41 D1:C482             	ex	de, hl
   42 D1:C482             	ret
   43 D1:C482             vxTempMemoryBlock:
   44 D1:C482             .db	"VMB000",0
   45 D1:C482             vxCopyImage:
   46 D1:C482             ; hl = src ; de = dest
   47 D1:C482             	ld	a, (hl)
   48 D1:C482             ; a = src format
   49 D1:C482             	inc	hl
   50 D1:C482             	ld	bc, (hl)
   51 D1:C482             	dec	hl
   52 D1:C482             ;	mlt	bc
   53 D1:C482             	ld	bc, 240*320
   54 D1:C482             	push	bc
   55 D1:C482             	ld	bc, 3
   56 D1:C482             	ldir
   57 D1:C482             	pop	bc
   58 D1:C482             #endcomment
   59 D1:C482 -  -  -  -  
   60 D1:C482 -  -  -  -  vxCopyImage:
   61 D1:C482 -  -  -  -  ; hl : src
   62 D1:C482 -  -  -  -  ; de : dest
   63 D1:C482 -  -  -  -  ; copy an framebuffer type image, compressed or not
   64 D1:C482 -  -  -  -  ; 1 byte - type, 3 bytes - size
   65 D1:C482 ED 07 -  -  	ld	bc, (hl)
   66 D1:C484 23 23 23 -  	inc	hl \ inc hl \ inc hl
   67 D1:C487 7E -  -  -  	ld	a, (hl)
   68 D1:C488 23 -  -  -  	inc	hl
   69 D1:C489 ED 64 40 -  	tst	a, VX_RLE_COMPRESSED
   70 D1:C48C 20 03 -  -  	jr	nz, vxUncompressRLE
   71 D1:C48E -  -  -  -  vxCopyData:
   72 D1:C48E ED B0 -  -  	ldir
   73 D1:C490 C9 -  -  -  	ret
   74 D1:C491 -  -  -  -  vxUncompressRLE:
   75 D1:C491 D5 -  -  -  	push	de
   76 D1:C492 EB -  -  -  	ex	de, hl
   77 D1:C493 09 -  -  -  	add	hl, bc
   78 D1:C494 22 9B C4 D1 	ld	(VX_MAX_RLE), hl
   79 D1:C498 EB -  -  -  	ex	de, hl
   80 D1:C499 D1 -  -  -  	pop	de
   81 D1:C49A -  -  -  -  vxRLELoop:
   82 D1:C49A -  -  -  -  VX_MAX_RLE=$+1
   83 D1:C49A 01 00 00 00 	ld	bc, $0
   84 D1:C49E EB -  -  -  	ex	de, hl
   85 D1:C49F B7 -  -  -  	or	a, a
   86 D1:C4A0 ED 42 -  -  	sbc	hl, bc
   87 D1:C4A2 D0 -  -  -  	ret	nc
   88 D1:C4A3 09 -  -  -  	add	hl, bc
   89 D1:C4A4 EB -  -  -  	ex	de, hl
   90 D1:C4A5 01 00 00 00 	ld	bc, 0
   91 D1:C4A9 7E -  -  -  	ld	a, (hl)
   92 D1:C4AA E6 7F -  -  	and	$7F
   93 D1:C4AC 3C -  -  -  	inc	a
   94 D1:C4AD 4F -  -  -  	ld	c, a
   95 D1:C4AE 7E -  -  -  	ld	a, (hl)
   96 D1:C4AF E6 80 -  -  	and	$80
   97 D1:C4B1 28 14 -  -  	jr	z, vxRLECopyRow
   98 D1:C4B3 -  -  -  -  vxRLECopyToken:
   99 D1:C4B3 23 -  -  -  	inc	hl
  100 D1:C4B4 E5 -  -  -  	push	hl
  101 D1:C4B5 ED A0 -  -  	ldi
  102 D1:C4B7 E2 C1 C4 D1 	jp	po, 	vxRLECopyEnd
  103 D1:C4BB 37 -  -  -  	scf
  104 D1:C4BC ED 62 -  -  	sbc	hl, hl
  105 D1:C4BE 19 -  -  -  	add	hl, de
  106 D1:C4BF ED B0 -  -  	ldir
  107 D1:C4C1 -  -  -  -  vxRLECopyEnd:
  108 D1:C4C1 E1 -  -  -  	pop	hl
  109 D1:C4C2 23 -  -  -  	inc	hl
  110 D1:C4C3 C3 9A C4 D1 	jp	vxRLELoop
  111 D1:C4C7 -  -  -  -  vxRLECopyRow:
  112 D1:C4C7 23 -  -  -  	inc	hl
  113 D1:C4C8 ED B0 -  -  	ldir
  114 D1:C4CA C3 9A C4 D1 	jp	vxRLELoop
  115 D1:C4CE -  -  -  -  
  116 D1:C4CE -  -  -  -  vxCreateMemoryPool:
  117 D1:C4CE F3 -  -  -  	di
  118 D1:C4CF 3E D1 -  -  	ld	a, $D1
  119 D1:C4D1 -  -  -  -  	;ld	mb,a
  120 D1:C4D1 ED 6D -  -  	.db	$ED,$6D	; assembler bug
  121 D1:C4D3 40 31 7E 98 	ld.sis	sp,$987E
  122 D1:C4D7 49 CD 52 C5 	call.is	vxUnlockWrite - $D10000
  123 D1:C4DB 3E D0 -  -  	ld	a,$D0
  124 D1:C4DD -  -  -  -  	;ld	mb,a
  125 D1:C4DD ED 6D -  -  	.db	$ED,$6D
  126 D1:C4DF -  -  -  -  
  127 D1:C4DF 3E 3F -  -  	ld	a, $3F
  128 D1:C4E1 CD 1E C5 D1 	call	vxMemorySafeErase
  129 D1:C4E5 3E 3E -  -  	ld	a, $3E
  130 D1:C4E7 CD 1E C5 D1 	call	vxMemorySafeErase
  131 D1:C4EB 3E 3D -  -  	ld	a, $3D
  132 D1:C4ED CD 1E C5 D1 	call	vxMemorySafeErase
  133 D1:C4F1 3E 3C -  -  	ld	a, $3C
  134 D1:C4F3 CD 1E C5 D1 	call	vxMemorySafeErase
  135 D1:C4F7 -  -  -  -  
  136 D1:C4F7 21 01 00 D0 	ld	hl, $D00001
  137 D1:C4FB 36 A5 -  -  	ld	(hl), $A5
  138 D1:C4FD 2B -  -  -  	dec	hl
  139 D1:C4FE 36 5A -  -  	ld	(hl), $5A
  140 D1:C500 11 00 00 3C 	ld	de, $3C0000
  141 D1:C504 01 00 00 04 	ld	bc, $40000
  142 D1:C508 -  -  -  -  
  143 D1:C508 CD E0 02 00 	call	__WriteFlash
  144 D1:C50C -  -  -  -  
  145 D1:C50C F3 -  -  -  	di
  146 D1:C50D 40 31 7E 98 	ld.sis	sp,$987E
  147 D1:C511 3E D1 -  -  	ld	a, $D1
  148 D1:C513 -  -  -  -  	;ld	mb,a
  149 D1:C513 ED 6D -  -  	.db	$ED,$6D	; assembler bug
  150 D1:C515 49 CD 65 C5 	call.is	vxLockWrite - $D10000
  151 D1:C519 3E D0 -  -  	ld	a,$D0
  152 D1:C51B -  -  -  -  	;ld	mb,a
  153 D1:C51B ED 6D -  -  	.db	$ED,$6D
  154 D1:C51D -  -  -  -  ; all RAM is free now
  155 D1:C51D -  -  -  -  
  156 D1:C51D C9 -  -  -  	ret
  157 D1:C51E -  -  -  -  
  158 D1:C51E -  -  -  -  vxMemorySafeErase:
  159 D1:C51E 01 F8 00 00 	ld	bc,$0000F8
  160 D1:C522 C5 -  -  -  	push	bc
  161 D1:C523 C3 DC 02 00 	jp	__EraseFlashPage
  162 D1:C527 -  -  -  -  vxDestroyMemoryPool:
  163 D1:C527 -  -  -  -  
  164 D1:C527 -  -  -  -  ; restore RAM state
  165 D1:C527 21 00 00 3C 	ld	hl, $3C0000
  166 D1:C52B 11 00 00 D0 	ld	de, $D00000
  167 D1:C52F 01 00 00 01 	ld	bc, $010000
  168 D1:C533 ED B0 -  -  	ldir
  169 D1:C535 -  -  -  -  
  170 D1:C535 -  -  -  -  ;	ld	hl, $3D0000
  171 D1:C535 -  -  -  -  ;	ld	de, $D10000
  172 D1:C535 -  -  -  -  ;	ld	bc, $010000
  173 D1:C535 -  -  -  -  ;	ldir
  174 D1:C535 -  -  -  -  
  175 D1:C535 21 00 00 3E 	ld	hl, $3E0000
  176 D1:C539 11 00 00 D2 	ld	de, $D20000
  177 D1:C53D 01 00 00 01 	ld	bc, $010000
  178 D1:C541 ED B0 -  -  	ldir
  179 D1:C543 -  -  -  -  
  180 D1:C543 21 00 00 3F 	ld	hl, $3F0000
  181 D1:C547 11 00 00 D3 	ld	de, $D30000
  182 D1:C54B 01 00 00 01 	ld	bc, $010000
  183 D1:C54F ED B0 -  -  	ldir
  184 D1:C551 -  -  -  -  
  185 D1:C551 C9 -  -  -  	ret
  186 D1:C552 -  -  -  -  .assume ADL=0
  187 D1:C552 -  -  -  -  vxUnlockWrite:
  188 D1:C552 -  -  -  -  
  189 D1:C552 3E 8C -  -  	ld	a, $8C
  190 D1:C554 ED 39 24 -  	out0	($24), a
  191 D1:C557 0E 04 -  -  	ld	c, 4
  192 D1:C559 ED 38 06 -  	in0	a, (6)
  193 D1:C55C B1 -  -  -  	or	c
  194 D1:C55D ED 39 06 -  	out0	(6), a
  195 D1:C560 ED 09 28 -  	out0($28), c
  196 D1:C563 -  -  -  -  
  197 D1:C563 49 C9 -  -  	ret.l
  198 D1:C565 -  -  -  -  
  199 D1:C565 -  -  -  -  vxLockWrite:
  200 D1:C565 AF -  -  -  	xor	a, a
  201 D1:C566 ED 39 28 -  	out0	($28), a
  202 D1:C569 ED 38 06 -  	in0	a, (6)
  203 D1:C56C CB 97 -  -  	res	2, a
  204 D1:C56E ED 39 06 -  	out0	(6), a
  205 D1:C571 3E 88 -  -  	ld	a, $88
  206 D1:C573 ED 39 24 -  	out0	($24), a
  207 D1:C576 49 C9 -  -  	ret.l
  208 D1:C578 -  -  -  -  .assume ADL=1
  209 D1:C578 -  -  -  -  
  210 D1:C578 -  -  -  -  vxZX7Uncompress:
  211 D1:C578 -  -  -  -  ; Routine copied from the C toolchain & speed optimized
  212 D1:C578 -  -  -  -  ;  Input:
  213 D1:C578 -  -  -  -  ;   HL = compressed data pointer
  214 D1:C578 -  -  -  -  ;   DE = output data pointer
  215 D1:C578 3E 80 -  -          ld      a, 128
  216 D1:C57A -  -  -  -  
  217 D1:C57A -  -  -  -  dzx7t_copy_byte_loop:
  218 D1:C57A -  -  -  -  
  219 D1:C57A ED A0 -  -          ldi                             ; copy literal byte
  220 D1:C57C -  -  -  -  
  221 D1:C57C -  -  -  -  dzx7t_main_loop:
  222 D1:C57C -  -  -  -  
  223 D1:C57C 87 -  -  -          add     a, a                    ; check next bit
  224 D1:C57D 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  225 D1:C582 30 F6 -  -          jr      nc, dzx7t_copy_byte_loop ; next bit indicates either literal or sequence
  226 D1:C584 -  -  -  -  
  227 D1:C584 -  -  -  -  ; determine number of bits used for length (Elias gamma coding)
  228 D1:C584 -  -  -  -  
  229 D1:C584 D5 -  -  -          push    de
  230 D1:C585 11 00 00 00         ld      de, 0
  231 D1:C589 01 01 00 00         ld      bc, 1
  232 D1:C58D -  -  -  -  
  233 D1:C58D -  -  -  -  dzx7t_len_size_loop:
  234 D1:C58D -  -  -  -  
  235 D1:C58D 14 -  -  -          inc     d
  236 D1:C58E 87 -  -  -          add     a, a                    ; check next bit
  237 D1:C58F 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  238 D1:C594 30 F7 -  -          jr      nc, dzx7t_len_size_loop
  239 D1:C596 C3 A6 C5 D1         jp      dzx7t_len_value_start
  240 D1:C59A -  -  -  -  
  241 D1:C59A -  -  -  -  ; determine length
  242 D1:C59A -  -  -  -  
  243 D1:C59A -  -  -  -  dzx7t_len_value_loop:
  244 D1:C59A -  -  -  -  
  245 D1:C59A 87 -  -  -          add     a, a                    ; check next bit
  246 D1:C59B 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  247 D1:C5A0 CB 11 -  -          rl      c
  248 D1:C5A2 CB 10 -  -          rl      b
  249 D1:C5A4 38 36 -  -          jr      c, dzx7t_exit           ; check end marker
  250 D1:C5A6 -  -  -  -  
  251 D1:C5A6 -  -  -  -  dzx7t_len_value_start:
  252 D1:C5A6 -  -  -  -  
  253 D1:C5A6 15 -  -  -          dec     d
  254 D1:C5A7 20 F1 -  -          jr      nz, dzx7t_len_value_loop
  255 D1:C5A9 03 -  -  -          inc     bc                      ; adjust length
  256 D1:C5AA -  -  -  -  
  257 D1:C5AA -  -  -  -  ; determine offset
  258 D1:C5AA -  -  -  -  
  259 D1:C5AA 5E -  -  -          ld      e, (hl)                 ; load offset flag (1 bit) + offset value (7 bits)
  260 D1:C5AB 23 -  -  -          inc     hl
  261 D1:C5AC -  -  -  -  
  262 D1:C5AC CB 23 -  -          sla e
  263 D1:C5AE 1C -  -  -          inc e
  264 D1:C5AF -  -  -  -  
  265 D1:C5AF 30 22 -  -          jr      nc, dzx7t_offset_end    ; if offset flag is set, load 4 extra bits
  266 D1:C5B1 87 -  -  -          add     a, a                    ; check next bit
  267 D1:C5B2 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  268 D1:C5B7 CB 12 -  -          rl      d                       ; insert first bit into D
  269 D1:C5B9 87 -  -  -          add     a, a                    ; check next bit
  270 D1:C5BA 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  271 D1:C5BF CB 12 -  -          rl      d                       ; insert second bit into D
  272 D1:C5C1 87 -  -  -          add     a, a                    ; check next bit
  273 D1:C5C2 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  274 D1:C5C7 CB 12 -  -          rl      d                       ; insert third bit into D
  275 D1:C5C9 87 -  -  -          add     a, a                    ; check next bit
  276 D1:C5CA 20 03 7E 23 
              17 -  -  -   	jr nz,$+5 \ ld a,(hl) \ inc hl \ rla
  277 D1:C5CF 3F -  -  -          ccf
  278 D1:C5D0 38 01 -  -          jr      c, dzx7t_offset_end
  279 D1:C5D2 14 -  -  -          inc     d                       ; equivalent to adding 128 to DE
  280 D1:C5D3 -  -  -  -  
  281 D1:C5D3 -  -  -  -  dzx7t_offset_end:
  282 D1:C5D3 -  -  -  -  
  283 D1:C5D3 CB 1B -  -          rr      e                       ; insert inverted fourth bit into E
  284 D1:C5D5 -  -  -  -  
  285 D1:C5D5 -  -  -  -  ; copy previous sequence
  286 D1:C5D5 -  -  -  -  
  287 D1:C5D5 E3 -  -  -          ex      (sp), hl                ; store source, restore destination
  288 D1:C5D6 E5 -  -  -          push    hl                      ; store destination
  289 D1:C5D7 ED 52 -  -          sbc     hl, de                  ; HL = destination - offset - 1
  290 D1:C5D9 D1 -  -  -          pop     de                      ; DE = destination
  291 D1:C5DA ED B0 -  -         ldir
  292 D1:C5DC -  -  -  -  
  293 D1:C5DC -  -  -  -  dzx7t_exit:
  294 D1:C5DC -  -  -  -  
  295 D1:C5DC E1 -  -  -          pop     hl                      ; restore source address (compressed data)
  296 D1:C5DD 30 9D -  -          jr      nc, dzx7t_main_loop
  297 D1:C5DF C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
   10 D1:C5E0 -  -  -  -  #include	"vxPostProcessing.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPostProcessing.ez80"
    1 D1:C5E0 -  -  -  -  #macro blend50()
    2 D1:C5E0             	ld	c, (hl)
    3 D1:C5E0             	push	af
    4 D1:C5E0             	ld	d, a
    5 D1:C5E0             	and	c
    6 D1:C5E0             	and	VX_COLOR_LOW_BIT
    7 D1:C5E0             	ld	e, a
    8 D1:C5E0             	ld	a, d
    9 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   10 D1:C5E0             	ld	d, a
   11 D1:C5E0             	ld	a, c
   12 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   13 D1:C5E0             	add	a, d
   14 D1:C5E0             	rra
   15 D1:C5E0             	add	a, e
   16 D1:C5E0             	ld	(hl), a
   17 D1:C5E0             	pop	af
   18 D1:C5E0             #endmacro
   19 D1:C5E0 -  -  -  -  
   20 D1:C5E0 -  -  -  -  #macro blend25()
   21 D1:C5E0             	ld	c, (hl)
   22 D1:C5E0             	push	af
   23 D1:C5E0             	push	af
   24 D1:C5E0             	ld	d, a
   25 D1:C5E0             	and	c
   26 D1:C5E0             	and	VX_COLOR_LOW_BIT
   27 D1:C5E0             	ld	e, a
   28 D1:C5E0             	ld	a, d
   29 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   30 D1:C5E0             	ld	d, a
   31 D1:C5E0             	ld	a, c
   32 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   33 D1:C5E0             	add	a, d
   34 D1:C5E0             	rra
   35 D1:C5E0             	add	a, e
   36 D1:C5E0             ; take A, blend it with initial color
   37 D1:C5E0             	ld	c, a
   38 D1:C5E0             	pop	af
   39 D1:C5E0             	ld	d, a
   40 D1:C5E0             	and	c
   41 D1:C5E0             	and	VX_COLOR_LOW_BIT
   42 D1:C5E0             	ld	e, a
   43 D1:C5E0             	ld	a, d
   44 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   45 D1:C5E0             	ld	d, a
   46 D1:C5E0             	ld	a, c
   47 D1:C5E0             	and	~VX_COLOR_LOW_BIT
   48 D1:C5E0             	add	a, d
   49 D1:C5E0             	rra
   50 D1:C5E0             	add	a, e
   51 D1:C5E0             	ld	(hl), a
   52 D1:C5E0             	pop	af
   53 D1:C5E0             #endmacro
   54 D1:C5E0 -  -  -  -  
   55 D1:C5E0 -  -  -  -  
   56 D1:C5E0 -  -  -  -  ; a is the color to bloomify
   57 D1:C5E0 -  -  -  -  vxBloomFilter:
   58 D1:C5E0 01 00 2C 01 	ld	bc, 76800
   59 D1:C5E4 2A 14 00 E3 	ld	hl, (vxFramebuffer)
   60 D1:C5E8 -  -  -  -  vxBloomLoop:
   61 D1:C5E8 ED B1 -  -  	cpir
   62 D1:C5EA E0 -  -  -  	ret	po
   63 D1:C5EB E5 -  -  -  	push	hl
   64 D1:C5EC C5 -  -  -  	push	bc
   65 D1:C5ED -  -  -  -  ;;	call	vxOptimizedKernel
   66 D1:C5ED -  -  -  -  
   67 D1:C5ED -  -  -  -  vxOptimizedKernel:
   68 D1:C5ED -  -  -  -  ; (32,16,32)
   69 D1:C5ED -  -  -  -  ; (16,00,16)
   70 D1:C5ED -  -  -  -  ; (32,16,32)
   71 D1:C5ED 11 BE FE FF 	ld	de, -320-2
   72 D1:C5F1 19 -  -  -  	add	hl, de
   73 D1:C5F2 11 C1 FE FF 	ld	de, -320+1
   74 D1:C5F6 19 -  -  -  	add	hl, de
   75 D1:C5F7 -  -  -  -  
   76 D1:C5F7 BE -  -  -  	cp	(hl)
   77 D1:C5F8 28 13 -  -  	jr	z, p1x
   78 D1:C5FA 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPostProcessing.ez80"
   79 D1:C60D -  -  -  -  p1x:
   80 D1:C60D 11 3F 01 00 	ld	de, 320-1
   81 D1:C611 19 -  -  -  	add	hl, de
   82 D1:C612 -  -  -  -  
   83 D1:C612 -  -  -  -  
   84 D1:C612 BE -  -  -  	cp	(hl)
   85 D1:C613 28 13 -  -  	jr	z, px
   86 D1:C615 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
   87 D1:C628 -  -  -  -  px:
   88 D1:C628 23 -  -  -  	inc	hl
   89 D1:C629 BE -  -  -  	cp	(hl)
   90 D1:C62A 28 25 -  -  	jr	z, p1
   91 D1:C62C 4E F5 F5 57 
              A1 E6 29 5F 
              7A E6 D6 57 
              79 E6 D6 82 
              1F 83 4F F1 
              57 A1 E6 29 
              5F 7A E6 D6 
              57 79 E6 D6 
              82 1F 83 77 
              F1 -  -  -  	blend25
   92 D1:C651 -  -  -  -  p1:
   93 D1:C651 23 -  -  -  	inc	hl
   94 D1:C652 BE -  -  -  	cp	(hl)
   95 D1:C653 28 13 -  -  	jr	z, p2
   96 D1:C655 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
   97 D1:C668 -  -  -  -  p2:
   98 D1:C668 11 3D 01 00 	ld	de, 320-3
   99 D1:C66C 19 -  -  -  	add	hl, de
  100 D1:C66D -  -  -  -  
  101 D1:C66D BE -  -  -  	cp	(hl)
  102 D1:C66E 28 13 -  -  	jr	z, p3x
  103 D1:C670 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
  104 D1:C683 -  -  -  -  p3x:
  105 D1:C683 23 -  -  -  	inc	hl
  106 D1:C684 -  -  -  -  
  107 D1:C684 BE -  -  -  	cp	(hl)
  108 D1:C685 28 25 -  -  	jr	z, p3
  109 D1:C687 4E F5 F5 57 
              A1 E6 29 5F 
              7A E6 D6 57 
              79 E6 D6 82 
              1F 83 4F F1 
              57 A1 E6 29 
              5F 7A E6 D6 
              57 79 E6 D6 
              82 1F 83 77 
              F1 -  -  -  	blend25
  110 D1:C6AC -  -  -  -  p3:
  111 D1:C6AC 23 -  -  -  	inc	hl
  112 D1:C6AD 77 -  -  -  	ld	(hl), a
  113 D1:C6AE 23 -  -  -  	inc	hl
  114 D1:C6AF BE -  -  -  	cp	(hl)
  115 D1:C6B0 28 25 -  -  	jr	z, p5
  116 D1:C6B2 4E F5 F5 57 
              A1 E6 29 5F 
              7A E6 D6 57 
              79 E6 D6 82 
              1F 83 4F F1 
              57 A1 E6 29 
              5F 7A E6 D6 
              57 79 E6 D6 
              82 1F 83 77 
              F1 -  -  -  	blend25
  117 D1:C6D7 -  -  -  -  p5:
  118 D1:C6D7 -  -  -  -  
  119 D1:C6D7 23 -  -  -  	inc	hl
  120 D1:C6D8 BE -  -  -  	cp	(hl)
  121 D1:C6D9 28 13 -  -  	jr	z, p5x
  122 D1:C6DB 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
  123 D1:C6EE -  -  -  -  p5x:
  124 D1:C6EE -  -  -  -  
  125 D1:C6EE 11 3D 01 00 	ld	de, 320-3
  126 D1:C6F2 19 -  -  -  	add	hl, de
  127 D1:C6F3 BE -  -  -  	cp	(hl)
  128 D1:C6F4 28 13 -  -  	jr	z, p6
  129 D1:C6F6 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
  130 D1:C709 -  -  -  -  p6:
  131 D1:C709 23 -  -  -  	inc	hl
  132 D1:C70A BE -  -  -  	cp	(hl)
  133 D1:C70B 28 25 -  -  	jr	z, p7
  134 D1:C70D 4E F5 F5 57 
              A1 E6 29 5F 
              7A E6 D6 57 
              79 E6 D6 82 
              1F 83 4F F1 
              57 A1 E6 29 
              5F 7A E6 D6 
              57 79 E6 D6 
              82 1F 83 77 
              F1 -  -  -  	blend25
  135 D1:C732 -  -  -  -  p7:
  136 D1:C732 23 -  -  -  	inc	hl
  137 D1:C733 BE -  -  -  	cp	(hl)
  138 D1:C734 28 13 -  -  	jr	z, p8
  139 D1:C736 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
  140 D1:C749 -  -  -  -  p8:
  141 D1:C749 -  -  -  -  
  142 D1:C749 11 3F 01 00 	ld	de, 320-1
  143 D1:C74D 19 -  -  -  	add	hl, de
  144 D1:C74E BE -  -  -  	cp	(hl)
  145 D1:C74F 28 13 -  -  	jr	z, p8x
  146 D1:C751 4E F5 57 A1 
              E6 29 5F 7A 
              E6 D6 57 79 
              E6 D6 82 1F 
              83 77 F1 -  	blend50
  147 D1:C764 -  -  -  -  p8x:
  148 D1:C764 -  -  -  -  
  149 D1:C764 C1 -  -  -  	pop	bc
  150 D1:C765 E1 -  -  -  	pop	hl
  151 D1:C766 C3 E8 C5 D1 	jp	vxBloomLoop
  152 D1:C76A -  -  -  -  ;;	ret
  153 D1:C76A -  -  -  -  
  154 D1:C76A -  -  -  -  ;vxGaussianKernel5x5:
  155 D1:C76A -  -  -  -  ; (40,36,34,36,40)
  156 D1:C76A -  -  -  -  ; (36,24,20,24,36)
  157 D1:C76A -  -  -  -  ; (34,20,00**,20,34)
  158 D1:C76A -  -  -  -  ; (36,24,20,24,36)
  159 D1:C76A -  -  -  -  ; (40,36,34,36,40)
  160 D1:C76A -  -  -  -  
  161 D1:C76A -  -  -  -  
  162 D1:C76A -  -  -  -  
  163 D1:C76A -  -  -  -  
  164 D1:C76A -  -  -  -  
  165 D1:C76A -  -  -  -  vxConvolveBlur:
  166 D1:C76A -  -  -  -  ; blur a little the screen using following convolution matrix : 
  167 D1:C76A -  -  -  -  ; 0 : 0 : 0
  168 D1:C76A -  -  -  -  ; 0 : 2 : 1
  169 D1:C76A -  -  -  -  ; 0 : 1 : 0
  170 D1:C76A 2A 14 00 E3 	ld	hl, (vxFramebuffer)
  171 D1:C76E 01 FF 00 00 	ld	bc, 255
  172 D1:C772 -  -  -  -  VXBLURLOOP:
  173 D1:C772 C5 -  -  -  	push	bc
  174 D1:C773 46 -  -  -  	ld	b, (hl)
  175 D1:C774 23 -  -  -  	inc	hl
  176 D1:C775 4E -  -  -  	ld	c, (hl)
  177 D1:C776 -  -  -  -  
  178 D1:C776 78 -  -  -  	ld	a, b
  179 D1:C777 A1 -  -  -  	and	c
  180 D1:C778 E6 29 -  -  	and	VX_COLOR_LOW_BIT
  181 D1:C77A 5F -  -  -  	ld	e, a
  182 D1:C77B 78 -  -  -  	ld	a, b
  183 D1:C77C E6 D6 -  -  	and	~VX_COLOR_LOW_BIT
  184 D1:C77E 57 -  -  -  	ld	d, a
  185 D1:C77F 79 -  -  -  	ld	a, c
  186 D1:C780 E6 D6 -  -  	and	~VX_COLOR_LOW_BIT
  187 D1:C782 82 -  -  -  	add	a, d
  188 D1:C783 1F -  -  -  	rra
  189 D1:C784 83 -  -  -  	add	a, e
  190 D1:C785 2B -  -  -  	dec	hl
  191 D1:C786 77 -  -  -  	ld	(hl), a
  192 D1:C787 -  -  -  -  
  193 D1:C787 C1 -  -  -  	pop	bc
  194 D1:C788 23 -  -  -  	inc	hl
  195 D1:C789 10 E7 -  -  	djnz	VXBLURLOOP
  196 D1:C78B 0D -  -  -  	dec	c
  197 D1:C78C C2 72 C7 D1 	jp	nz, VXBLURLOOP
  198 D1:C790 C9 -  -  -  	ret
  199 D1:C791 -  -  -  -  
  200 D1:C791 -  -  -  -  
  201 D1:C791 -  -  -  -  
  202 D1:C791 -  -  -  -  
  203 D1:C791 -  -  -  -  #comment
  204 D1:C791             	inc	hl
  205 D1:C791             	ld	c, (hl)
  206 D1:C791             	ld	de, 320
  207 D1:C791             	add	hl, de
  208 D1:C791             	ld	b, (hl)
  209 D1:C791             	scf
  210 D1:C791             	sbc	hl, de
  211 D1:C791             ; blend50
  212 D1:C791             
  213 D1:C791             	ld	a, b
  214 D1:C791             	and	c
  215 D1:C791             	and	VX_COLOR_LOW_BIT
  216 D1:C791             	ld	e, a
  217 D1:C791             	ld	a, b
  218 D1:C791             	and	~VX_COLOR_LOW_BIT
  219 D1:C791             	ld	d, a
  220 D1:C791             	ld	a, c
  221 D1:C791             	and	~VX_COLOR_LOW_BIT
  222 D1:C791             	add	a, d
  223 D1:C791             	rra
  224 D1:C791             	add	a, e
  225 D1:C791             	ld	c, (hl)
  226 D1:C791             	ld	b, a
  227 D1:C791             
  228 D1:C791             	ld	a, b
  229 D1:C791             	and	c
  230 D1:C791             	and	VX_COLOR_LOW_BIT
  231 D1:C791             	ld	e, a
  232 D1:C791             	ld	a, b
  233 D1:C791             	and	~VX_COLOR_LOW_BIT
  234 D1:C791             	ld	d, a
  235 D1:C791             	ld	a, c
  236 D1:C791             	and	~VX_COLOR_LOW_BIT
  237 D1:C791             	add	a, d
  238 D1:C791             	rra
  239 D1:C791             	add	a, e
  240 D1:C791             
  241 D1:C791             	ld	(hl), a
  242 D1:C791             
  243 D1:C791             #endcomment
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
   11 D1:C791 -  -  -  -  #include	"vxImage.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxImage.ez80"
    1 D1:C791 -  -  -  -  vxImageSubCopy:
    2 D1:C791 -  -  -  -  ; hl : org, bc : rect size, de : copy
    3 D1:C791 C5 -  -  -  	push	bc
    4 D1:C792 01 00 00 D3 	ld	bc, $D30000
    5 D1:C796 09 -  -  -  	add	hl, bc
    6 D1:C797 EB -  -  -  	ex	de, hl
    7 D1:C798 09 -  -  -  	add	hl, bc
    8 D1:C799 EB -  -  -  	ex	de, hl
    9 D1:C79A C1 -  -  -  	pop	bc
   10 D1:C79B 78 -  -  -  	ld	a, b
   11 D1:C79C 06 00 -  -  	ld	b, 0
   12 D1:C79E -  -  -  -  ; ready to copy
   13 D1:C79E -  -  -  -  vxCopyLoop:
   14 D1:C79E C5 -  -  -  	push	bc
   15 D1:C79F D5 -  -  -  	push	de
   16 D1:C7A0 E5 -  -  -  	push	hl
   17 D1:C7A1 ED B0 -  -  	ldir
   18 D1:C7A3 E1 -  -  -  	pop	hl
   19 D1:C7A4 D1 -  -  -  	pop	de
   20 D1:C7A5 C1 -  -  -  	pop	bc
   21 D1:C7A6 24 -  -  -  	inc	h
   22 D1:C7A7 14 -  -  -  	inc	d
   23 D1:C7A8 3D -  -  -  	dec	a
   24 D1:C7A9 20 F3 -  -  	jr	nz, vxCopyLoop
   25 D1:C7AB C9 -  -  -  	ret
   26 D1:C7AC -  -  -  -  vxTestAABB:
   27 D1:C7AC -  -  -  -  
   28 D1:C7AC C9 -  -  -  	ret
   29 D1:C7AD -  -  -  -  vxMipmapLOD:
   30 D1:C7AD -  -  -  -  ;    vec2  dx_vtc        = dFdx;
   31 D1:C7AD -  -  -  -  ;    vec2  dy_vtc        = dFdy;
   32 D1:C7AD -  -  -  -  ;    float delta_max_sqr = max(dot(dx_vtc, dx_vtc), dot(dy_vtc, dy_vtc));
   33 D1:C7AD -  -  -  -  ;    return 0.5 * log2(delta_max_sqr)
   34 D1:C7AD 3A FD FF FF 	ld	a, (VX_FDUDX+1) ;dudx+1
   35 D1:C7B1 CB 7F 28 02 
              ED 44 -  -  	bit	7, a \ jr z, $+4 \ neg
   36 D1:C7B7 6F -  -  -  	ld	l, a
   37 D1:C7B8 67 -  -  -  	ld	h, a
   38 D1:C7B9 ED 6C -  -  	mlt	hl
   39 D1:C7BB 3A FB FF FF 	ld	a, (VX_FDVDX+1) ;dvdx+1
   40 D1:C7BF CB 7F 28 02 
              ED 44 -  -  	bit	7, a \ jr z, $+4 \ neg
   41 D1:C7C5 57 -  -  -  	ld	d, a
   42 D1:C7C6 5F -  -  -  	ld	e, a
   43 D1:C7C7 ED 5C -  -  	mlt	de
   44 D1:C7C9 19 -  -  -  	add	hl, de
   45 D1:C7CA E5 -  -  -  	push	hl
   46 D1:C7CB 3A F7 FF FF 	ld	a, (VX_FDUDY+1) ;dudy+1
   47 D1:C7CF CB 7F 28 02 
              ED 44 -  -  	bit	7, a \ jr z, $+4 \ neg
   48 D1:C7D5 6F -  -  -  	ld	l, a
   49 D1:C7D6 67 -  -  -  	ld	h, a
   50 D1:C7D7 ED 6C -  -  	mlt	hl
   51 D1:C7D9 3A F5 FF FF 	ld	a, (VX_FDVDY+1) ;dvdy+1
   52 D1:C7DD CB 7F 28 02 
              ED 44 -  -  	bit	7, a \ jr z, $+4 \ neg
   53 D1:C7E3 57 -  -  -  	ld	d, a
   54 D1:C7E4 5F -  -  -  	ld	e, a
   55 D1:C7E5 ED 5C -  -  	mlt	de
   56 D1:C7E7 19 -  -  -  	add	hl, de
   57 D1:C7E8 D1 -  -  -  	pop	de
   58 D1:C7E9 -  -  -  -  ; max(hl,de)
   59 D1:C7E9 B7 -  -  -  	or	a, a
   60 D1:C7EA ED 52 -  -  	sbc	hl, de
   61 D1:C7EC 19 -  -  -  	add	hl, de
   62 D1:C7ED 30 01 -  -  	jr	nc, $+3
   63 D1:C7EF EB -  -  -  	ex	de, hl
   64 D1:C7F0 20 01 -  -  	jr	nz, $+3
   65 D1:C7F2 23 -  -  -  	inc	hl
   66 D1:C7F3 -  -  -  -  ; compute log2
   67 D1:C7F3 3E 10 -  -  	ld	a,16
   68 D1:C7F5 37 -  -  -  	scf
   69 D1:C7F6 -  -  -  -  __LogLoop:
   70 D1:C7F6 52 ED 6A -  	adc.s	hl,hl
   71 D1:C7F9 3D -  -  -  	dec	a
   72 D1:C7FA 30 FA -  -  	jr	nc,__LogLoop
   73 D1:C7FC -  -  -  -  ; result is between [-1;15]
   74 D1:C7FC -  -  -  -  ; 256x256 texture have 9 mipmap levels.
   75 D1:C7FC CB 3F -  -  	srl	a	; remap to [0-8]
   76 D1:C7FE -  -  -  -  ; clamp the result to [0-8]
   77 D1:C7FE -  -  -  -  ; correspondance :
   78 D1:C7FE -  -  -  -  ; 256x256 : 0
   79 D1:C7FE -  -  -  -  ; 128x128 : 1
   80 D1:C7FE -  -  -  -  ;  64x 64 : 2
   81 D1:C7FE -  -  -  -  ;  32x 32 : 3
   82 D1:C7FE -  -  -  -  ;  16x 16 : 4
   83 D1:C7FE -  -  -  -  ;   8x  8 : 5
   84 D1:C7FE -  -  -  -  ;   4x  4 : 6
   85 D1:C7FE -  -  -  -  ;   2x  2 : 7
   86 D1:C7FE -  -  -  -  ;   1x  1 : 8
   87 D1:C7FE C9 -  -  -  	ret
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
   12 D1:C7FF -  -  -  -  #include	"vxShaderInterpolation.ez80"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxShaderInterpolation.ez80"
    1 D1:C7FF -  -  -  -  ;; BUG :: inside du/dy and dv/dy compute
    2 D1:C7FF -  -  -  -  
    3 D1:C7FF -  -  -  -  #define	VX_REGISTER_Y0	-32+0
    4 D1:C7FF -  -  -  -  #define	VX_REGISTER_X0	-32+1
    5 D1:C7FF -  -  -  -  #define	VX_REGISTER_U0	-32+3
    6 D1:C7FF -  -  -  -  #define	VX_REGISTER_V0	-32+4
    7 D1:C7FF -  -  -  -  #define	VX_REGISTER_C0	-32+5
    8 D1:C7FF -  -  -  -  #define	VX_REGISTER_Y1	-26+0
    9 D1:C7FF -  -  -  -  #define	VX_REGISTER_X1	-26+1
   10 D1:C7FF -  -  -  -  #define	VX_REGISTER_U1	-26+3
   11 D1:C7FF -  -  -  -  #define	VX_REGISTER_V1	-26+4
   12 D1:C7FF -  -  -  -  #define	VX_REGISTER_C1	-26+5
   13 D1:C7FF -  -  -  -  #define	VX_REGISTER_Y2	-20+0
   14 D1:C7FF -  -  -  -  #define	VX_REGISTER_X2	-20+1
   15 D1:C7FF -  -  -  -  #define	VX_REGISTER_U2	-20+3
   16 D1:C7FF -  -  -  -  #define	VX_REGISTER_V2	-20+4
   17 D1:C7FF -  -  -  -  #define	VX_REGISTER_C2	-20+5
   18 D1:C7FF -  -  -  -  
   19 D1:C7FF -  -  -  -  #define	VX_FDVDY	-12
   20 D1:C7FF -  -  -  -  #define	VX_FDUDY	-10
   21 D1:C7FF -  -  -  -  #define	VX_FDVDX	-6
   22 D1:C7FF -  -  -  -  #define	VX_FDUDX	-4
   23 D1:C7FF -  -  -  -  
   24 D1:C7FF -  -  -  -  #define	VX_SHADER_INTERPOLATION_CODE	$E30800
   25 D1:C7FF -  -  -  -  
   26 D1:C7FF -  -  -  -  	.addinstr ld deu,0 13521B52 4 NOP 0
   27 D1:C7FF -  -  -  -  	.addinstr ld hlu,0 23522B52 4 NOP 0
   28 D1:C7FF -  -  -  -  	.addinstr ld bcu,0 03520B52 4 NOP 0
   29 D1:C7FF -  -  -  -  
   30 D1:C7FF 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.fill	32
   31 D1:C81F -  -  -  -  VX_PIXEL_SHADER_DATA:
   32 D1:C81F 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.fill	3072
   33 D1:D41F -  -  -  -  
   34 D1:D41F -  -  -  -  VX_SHADER_INTERPOLATION_COPY:
   35 D1:D41F -  -  -  -  
   36 D1:D41F -  -  -  -  .relocate VX_SHADER_INTERPOLATION_CODE
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxShaderInterpolation.ez80"
   37 E3:0800 -  -  -  -  
   38 E3:0800 -  -  -  -  vxTextureTriangle:
   39 E3:0800 -  -  -  -  ; issue 1 : uniform value isn't interpolated through clipping
   40 E3:0800 -  -  -  -  ; clipping doesn't have the correct position of uv
   41 E3:0800 -  -  -  -  
   42 E3:0800 -  -  -  -  ; compute average of the vertex GPI
   43 E3:0800 -  -  -  -  ;	ld	h, a
   44 E3:0800 -  -  -  -  ;	ld	l, 83
   45 E3:0800 -  -  -  -  ;	mlt	hl
   46 E3:0800 -  -  -  -  ;	ld	a, h
   47 E3:0800 -  -  -  -  ;	ld	(vxPixelShaderUniform1), a
   48 E3:0800 0A -  -  -  	ld	a, (bc)
   49 E3:0801 B6 -  -  -  	or	(hl)
   50 E3:0802 EB -  -  -  	ex	de, hl
   51 E3:0803 B6 -  -  -  	or	(hl)
   52 E3:0804 FD 21 C4 DC 
              D1 -  -  -  	ld	iy, vxTexturePolygon	; load up correct subcall routine
   53 E3:0809 C2 CB B5 D1 	jp	nz, vxClipTriangle
   54 E3:080D -  -  -  -  vxTextureTriangleNoClip:
   55 E3:080D 23 13 03 -  	inc	hl \ inc de \ inc bc
   56 E3:0810 1A -  -  -  	ld	a, (de)
   57 E3:0811 96 -  -  -  	sub	a, (hl)
   58 E3:0812 38 01 -  -  	jr	c, vxTextureSwap0
   59 E3:0814 EB -  -  -  	ex	de, hl
   60 E3:0815 -  -  -  -  vxTextureSwap0:
   61 E3:0815 0A -  -  -  	ld	a, (bc)
   62 E3:0816 96 -  -  -  	sub	a, (hl)
   63 E3:0817 30 06 -  -  	jr	nc, vxTextureSwap1
   64 E3:0819 E5 -  -  -  	push	hl
   65 E3:081A B7 -  -  -  	or	a, a
   66 E3:081B ED 62 -  -  	sbc	hl, hl
   67 E3:081D 09 -  -  -  	add	hl, bc
   68 E3:081E C1 -  -  -  	pop	bc
   69 E3:081F -  -  -  -  vxTextureSwap1:
   70 E3:081F 1A -  -  -  	ld	a, (de)
   71 E3:0820 96 -  -  -  	sub	a, (hl)
   72 E3:0821 30 01 -  -  	jr	nc, vxTextureSwap2
   73 E3:0823 EB -  -  -  	ex	de, hl
   74 E3:0824 -  -  -  -  vxTextureSwap2:
   75 E3:0824 0A -  -  -  	ld	a, (bc)	; is this necessary with bfc ? Nope
   76 E3:0825 96 -  -  -  	sub	(hl)		; well to be safe, keep it
   77 E3:0826 C8 -  -  -  	ret	z		;
   78 E3:0827 FD 21 1F C8 
              D1 -  -  -  	ld	iy, VX_PIXEL_SHADER_DATA	; load up shader data register
   79 E3:082C -  -  -  -  ; copy u&v to constant area
   80 E3:082C C5 -  -  -  	push	bc
   81 E3:082D D5 -  -  -  	push	de
   82 E3:082E ED 13 E0 -  	lea	de, iy-32
   83 E3:0831 01 06 00 00 	ld	bc, 6		; 1+3+2
   84 E3:0835 ED B0 -  -  	ldir
   85 E3:0837 E1 -  -  -  	pop	hl
   86 E3:0838 0E 06 -  -  	ld	c, 6
   87 E3:083A ED B0 -  -  	ldir
   88 E3:083C E1 -  -  -  	pop	hl
   89 E3:083D 0E 06 -  -  	ld	c, 6
   90 E3:083F ED B0 -  -  	ldir
   91 E3:0841 -  -  -  -  ; do e0-1
   92 E3:0841 -  -  -  -  vxRegister01Interpolation:
   93 E3:0841 FD 7E E6 -  	ld	a, (iy+VX_REGISTER_Y1)
   94 E3:0844 FD 4E E0 -  	ld	c, (iy+VX_REGISTER_Y0)
   95 E3:0847 91 -  -  -  	sub	a, c
   96 E3:0848 FD 17 E1 -  	ld	de, (iy+VX_REGISTER_X0)
   97 E3:084B 52 1B 52 13 	ld	deu,0
   98 E3:084F 06 A0 -  -  	ld	b, 160
   99 E3:0851 ED 4C -  -  	mlt	bc
  100 E3:0853 2A 14 00 E3 	ld	hl, (vxFramebuffer)
  101 E3:0857 09 -  -  -  	add	hl, bc
  102 E3:0858 09 -  -  -  	add	hl, bc
  103 E3:0859 19 -  -  -  	add	hl, de
  104 E3:085A E5 -  -  -  	push	hl				; for later, edge 0-2
  105 E3:085B 01 FF FF FF 	ld	bc, $FFFFFF
  106 E3:085F 28 59 -  -  	jr	z, vxRegister01End
  107 E3:0861 ED 44 -  -  	neg
  108 E3:0863 4F -  -  -  	ld	c, a
  109 E3:0864 D5 -  -  -  	push	de
  110 E3:0865 -  -  -  -  
  111 E3:0865 EB -  -  -  	ex	de, hl
  112 E3:0866 B7 -  -  -  	or	a, a
  113 E3:0867 ED 62 -  -  	sbc	hl, hl
  114 E3:0869 ED 52 -  -  	sbc	hl, de
  115 E3:086B EB -  -  -  	ex	de, hl
  116 E3:086C DD 21 21 ED 
              68 -  -  -  	ld	ix, vxPixelShaderLengthLUT/2
  117 E3:0871 DD 19 -  -  	add	ix, de
  118 E3:0873 D1 -  -  -  	pop	de
  119 E3:0874 FD 27 E7 -  	ld	hl, (iy+VX_REGISTER_X1)		; load x1
  120 E3:0877 52 2B 52 23 	ld	hlu, 0
  121 E3:087B 3E 2B -  -  	ld	a, $2B		; dec ix
  122 E3:087D B7 -  -  -  	or	a, a
  123 E3:087E ED 52 -  -  	sbc	hl, de		; hl = x1-x0
  124 E3:0880 30 06 -  -  	jr	nc, vxRegister01Direction
  125 E3:0882 EE 08 -  -  	xor	a, $08		; inc ix	(inverted due to <0 working function)
  126 E3:0884 19 -  -  -  	add	hl, de		;
  127 E3:0885 EB -  -  -  	ex	de, hl		;
  128 E3:0886 ED 52 -  -  	sbc	hl, de		; hl = -x1+x0
  129 E3:0888 -  -  -  -  vxRegister01Direction:
  130 E3:0888 EB -  -  -  	ex	de, hl		; de = abs(x1-x0)
  131 E3:0889 32 A7 08 E3 	ld	(vxRegister01Increment), a
  132 E3:088D -  -  -  -  vxRegister01ErrorAdvance:
  133 E3:088D -  -  -  -  ; bc = y-size, ix = adress
  134 E3:088D -  -  -  -  ; de = error
  135 E3:088D ED 73 B7 08 
              E3 -  -  -  	ld	(vxRegister01SP), sp
  136 E3:0892 31 C0 FE FF 	ld	sp, -320
  137 E3:0896 79 -  -  -  	ld	a, c
  138 E3:0897 37 -  -  -  	scf
  139 E3:0898 ED 62 -  -  	sbc	hl, hl
  140 E3:089A 6F -  -  -  	ld	l, a
  141 E3:089B ED 52 -  -  	sbc	hl, de
  142 E3:089D CB 2C -  -  	sra	h
  143 E3:089F CB 1D -  -  	rr	l
  144 E3:08A1 ED 44 -  -  	neg
  145 E3:08A3 -  -  -  -  vxRegister01Loop:
  146 E3:08A3 19 -  -  -  	add	hl, de
  147 E3:08A4 30 05 -  -  	jr	nc, vxRegister01Next
  148 E3:08A6 -  -  -  -  vxRegister01Restore:
  149 E3:08A6 DD -  -  -  	.db	$DD
  150 E3:08A7 -  -  -  -  vxRegister01Increment=$
  151 E3:08A7 00 -  -  -  	nop
  152 E3:08A8 09 -  -  -  	add	hl, bc
  153 E3:08A9 38 FB -  -  	jr	c, vxRegister01Restore
  154 E3:08AB -  -  -  -  vxRegister01Next:
  155 E3:08AB FD 3E 03 -  	ld	(iy+VX_REGISTER1), ix		; this is framebuffer adress
  156 E3:08AE DD 39 -  -  	add	ix, sp
  157 E3:08B0 ED 33 0C -  	lea	iy, iy+VX_REGISTER_SIZE
  158 E3:08B3 3D -  -  -  	dec	a
  159 E3:08B4 20 ED -  -  	jr	nz, vxRegister01Loop
  160 E3:08B6 -  -  -  -  vxRegister01SP=$+1
  161 E3:08B6 31 00 00 00 	ld	sp, $000000
  162 E3:08BA -  -  -  -  vxRegister01End:
  163 E3:08BA -  -  -  -  
  164 E3:08BA 21 05 C8 D1 	ld	hl, VX_PIXEL_SHADER_DATA-26
  165 E3:08BE 11 0B C8 D1 	ld	de, VX_PIXEL_SHADER_DATA-20
  166 E3:08C2 -  -  -  -  
  167 E3:08C2 -  -  -  -  vxRegister11Interpolation:
  168 E3:08C2 01 FF FF FF 		ld	bc, $FFFFFF
  169 E3:08C6 -  -  -  -  	; take point0 (hl) and point1 (de), point0 is the lowest point
  170 E3:08C6 1A -  -  -  		ld	a, (de)
  171 E3:08C7 4E -  -  -  		ld	c, (hl)
  172 E3:08C8 91 -  -  -  		sub	a, c
  173 E3:08C9 28 6F -  -  		jr	z, vxRegister11End
  174 E3:08CB ED 44 -  -  		neg
  175 E3:08CD 23 -  -  -  		inc	hl
  176 E3:08CE D5 -  -  -  		push	de
  177 E3:08CF ED 17 -  -  		ld	de, (hl)
  178 E3:08D1 52 1B 52 13 		ld	deu, 0
  179 E3:08D5 D5 -  -  -  		push	de
  180 E3:08D6 69 -  -  -  		ld	l, c
  181 E3:08D7 4F -  -  -  		ld	c, a
  182 E3:08D8 26 A0 -  -  		ld	h, 160
  183 E3:08DA ED 6C -  -  		mlt	hl
  184 E3:08DC 29 -  -  -  		add	hl, hl
  185 E3:08DD 19 -  -  -  		add	hl, de
  186 E3:08DE ED 5B 14 00 
              E3 -  -  -  		ld	de, (vxFramebuffer)
  187 E3:08E3 19 -  -  -  		add	hl, de
  188 E3:08E4 EB -  -  -  		ex	de, hl
  189 E3:08E5 B7 -  -  -  		or	a, a
  190 E3:08E6 ED 62 -  -  		sbc	hl, hl
  191 E3:08E8 ED 52 -  -  		sbc	hl, de
  192 E3:08EA EB -  -  -  		ex	de, hl
  193 E3:08EB DD 21 21 ED 
              68 -  -  -  		ld	ix, vxPixelShaderLengthLUT/2
  194 E3:08F0 DD 19 -  -  		add	ix, de
  195 E3:08F2 D1 -  -  -  		pop	de
  196 E3:08F3 E1 -  -  -  		pop	hl
  197 E3:08F4 23 -  -  -  		inc	hl			; fetch x coordinate
  198 E3:08F5 ED 27 -  -  		ld	hl, (hl)		; load x1
  199 E3:08F7 52 2B 52 23 		ld	hlu, 0
  200 E3:08FB 3E 2B -  -  		ld	a, $2B		; dec ix
  201 E3:08FD B7 -  -  -  		or	a, a
  202 E3:08FE ED 52 -  -  		sbc	hl, de		; hl = x1-x0
  203 E3:0900 30 06 -  -  		jr	nc, vxRegister11Direction
  204 E3:0902 EE 08 -  -  		xor	a, $08		; inc ix	(inverted due to <0 working function)
  205 E3:0904 19 -  -  -  		add	hl, de		;
  206 E3:0905 EB -  -  -  		ex	de, hl		;
  207 E3:0906 ED 52 -  -  		sbc	hl, de		; hl = -x1+x0
  208 E3:0908 -  -  -  -  vxRegister11Direction:
  209 E3:0908 EB -  -  -  		ex	de, hl		; de = abs(x1-x0)
  210 E3:0909 32 27 09 E3 		ld	(vxRegister11Increment), a
  211 E3:090D -  -  -  -  vxRegister11ErrorAdvance:
  212 E3:090D -  -  -  -  	; bc = y-size, ix = adress
  213 E3:090D -  -  -  -  	; de = error
  214 E3:090D ED 73 37 09 
              E3 -  -  -  		ld	(vxRegister11SP), sp
  215 E3:0912 31 C0 FE FF 		ld	sp, -320
  216 E3:0916 79 -  -  -  		ld	a, c
  217 E3:0917 37 -  -  -  		scf
  218 E3:0918 ED 62 -  -  		sbc	hl, hl
  219 E3:091A 6F -  -  -  		ld	l, a
  220 E3:091B ED 52 -  -  		sbc	hl, de
  221 E3:091D CB 2C -  -  		sra	h
  222 E3:091F CB 1D -  -  		rr	l
  223 E3:0921 ED 44 -  -  		neg
  224 E3:0923 -  -  -  -  vxRegister11Loop:
  225 E3:0923 19 -  -  -  		add	hl, de
  226 E3:0924 30 05 -  -  		jr	nc, vxRegister11Next
  227 E3:0926 -  -  -  -  vxRegister11Restore:
  228 E3:0926 DD -  -  -  		.db	$DD
  229 E3:0927 -  -  -  -  vxRegister11Increment=$
  230 E3:0927 00 -  -  -  		nop
  231 E3:0928 09 -  -  -  		add	hl, bc
  232 E3:0929 38 FB -  -  		jr	c, vxRegister11Restore
  233 E3:092B -  -  -  -  vxRegister11Next:
  234 E3:092B FD 3E 03 -  		ld	(iy+VX_REGISTER1), ix		; this is framebuffer adress
  235 E3:092E DD 39 -  -  		add	ix, sp
  236 E3:0930 ED 33 0C -  		lea	iy, iy+VX_REGISTER_SIZE
  237 E3:0933 3D -  -  -  		dec	a
  238 E3:0934 20 ED -  -  		jr	nz, vxRegister11Loop
  239 E3:0936 -  -  -  -  vxRegister11SP=$+1
  240 E3:0936 31 00 00 00 		ld	sp, $000000
  241 E3:093A -  -  -  -  vxRegister11End:
  242 E3:093A -  -  -  -  
  243 E3:093A FD 21 1F C8 
              D1 -  -  -  	ld	iy, VX_PIXEL_SHADER_DATA	; load up shader data register
  244 E3:093F 01 FF FF FF 	ld	bc, $FFFFFF	; not necessarily here if exit with a bc < 0 previously, may be removed (end micro-opt)
  245 E3:0943 -  -  -  -  vxRegister0Interpolation:
  246 E3:0943 -  -  -  -  ; take point0 (hl) and point1 (de), point0 is the lowest point
  247 E3:0943 FD 7E EC -  	ld	a, (iy+VX_REGISTER_Y2)
  248 E3:0946 FD 4E E0 -  	ld	c, (iy+VX_REGISTER_Y0)
  249 E3:0949 91 -  -  -  	sub	a, c
  250 E3:094A ED 44 -  -  	neg
  251 E3:094C FD 17 E1 -  	ld	de, (iy+VX_REGISTER_X0)
  252 E3:094F 52 1B 52 13 	ld	deu, 0
  253 E3:0953 4F -  -  -  	ld	c, a
  254 E3:0954 DD E1 -  -  	pop	ix
  255 E3:0956 -  -  -  -  
  256 E3:0956 FD 27 ED -  	ld	hl, (iy+VX_REGISTER_X2)		; load x1
  257 E3:0959 52 2B 52 23 	ld	hlu, 0
  258 E3:095D E5 -  -  -  	push	hl
  259 E3:095E 3E 23 -  -  	ld	a, $23		; inc ix
  260 E3:0960 B7 -  -  -  	or	a, a
  261 E3:0961 ED 52 -  -  	sbc	hl, de		; hl = x1-x0
  262 E3:0963 30 06 -  -  	jr	nc, vxRegister0Direction
  263 E3:0965 F6 08 -  -  	or	a, $08		; dec ix
  264 E3:0967 19 -  -  -  	add	hl, de		;
  265 E3:0968 EB -  -  -  	ex	de, hl		;
  266 E3:0969 ED 52 -  -  	sbc	hl, de		; hl = -x1+x0
  267 E3:096B -  -  -  -  vxRegister0Direction:
  268 E3:096B EB -  -  -  	ex	de, hl		; de = abs(x1-x0)
  269 E3:096C 32 8A 09 E3 	ld	(vxRegister0Increment), a
  270 E3:0970 -  -  -  -  vxRegister0ErrorAdvance:
  271 E3:0970 -  -  -  -  ; bc = y-size, ix = adress
  272 E3:0970 -  -  -  -  ; de= error
  273 E3:0970 ED 73 9A 09 
              E3 -  -  -  	ld	(vxRegister0SP), sp
  274 E3:0975 31 40 01 00 	ld	sp, 320
  275 E3:0979 79 -  -  -  	ld	a, c
  276 E3:097A 37 -  -  -  	scf
  277 E3:097B ED 62 -  -  	sbc	hl, hl
  278 E3:097D 6F -  -  -  	ld	l, a
  279 E3:097E ED 52 -  -  	sbc	hl, de
  280 E3:0980 CB 2C -  -  	sra	h
  281 E3:0982 CB 1D -  -  	rr	l
  282 E3:0984 ED 44 -  -  	neg
  283 E3:0986 -  -  -  -  vxRegister0Loop:
  284 E3:0986 19 -  -  -  	add	hl, de
  285 E3:0987 30 05 -  -  	jr	nc, vxRegister0Next
  286 E3:0989 -  -  -  -  vxRegister0Restore:
  287 E3:0989 DD -  -  -  	.db	$DD
  288 E3:098A -  -  -  -  vxRegister0Increment=$
  289 E3:098A 00 -  -  -  	nop
  290 E3:098B 09 -  -  -  	add	hl, bc
  291 E3:098C 38 FB -  -  	jr	c, vxRegister0Restore
  292 E3:098E -  -  -  -  vxRegister0Next:
  293 E3:098E FD 3E 00 -  	ld	(iy+VX_REGISTER0), ix		; this is framebuffer adress
  294 E3:0991 DD 39 -  -  	add	ix, sp
  295 E3:0993 ED 33 0C -  	lea	iy, iy+VX_REGISTER_SIZE
  296 E3:0996 3D -  -  -  	dec	a
  297 E3:0997 20 ED -  -  	jr	nz, vxRegister0Loop
  298 E3:0999 -  -  -  -  ; magic end bytes - write x2 ?
  299 E3:0999 -  -  -  -  vxRegister0SP=$+1
  300 E3:0999 31 00 00 00 	ld	sp, $000000
  301 E3:099D C1 -  -  -  	pop	bc
  302 E3:099E -  -  -  -  
  303 E3:099E FD 0F 00 -  	ld	(iy+VX_REGISTER0), bc
  304 E3:09A1 21 61 EE 68 	ld	hl, vxPixelShaderExitLUT/2
  305 E3:09A5 ED 42 -  -  	sbc hl,bc
  306 E3:09A7 FD 2F 03 -  	ld	(iy+VX_REGISTER1), hl
  307 E3:09AA -  -  -  -  vxRegister0End:
  308 E3:09AA -  -  -  -  
  309 E3:09AA -  -  -  -  ; compute dudy
  310 E3:09AA -  -  -  -  ; compute dudx
  311 E3:09AA -  -  -  -  ; compute dvdy
  312 E3:09AA -  -  -  -  ; compute dvdx
  313 E3:09AA -  -  -  -  ; offset and compute register2&3
  314 E3:09AA -  -  -  -  vxRegisterDerivative:
  315 E3:09AA FD 21 1F C8 
              D1 -  -  -  	ld	iy, VX_PIXEL_SHADER_DATA
  316 E3:09AF ED 23 E0 -  	lea hl, iy+VX_REGISTER_Y0
  317 E3:09B2 ED 13 E6 -  	lea de, iy+VX_REGISTER_Y1
  318 E3:09B5 ED 03 EC -  	lea bc, iy+VX_REGISTER_Y2
  319 E3:09B8 -  -  -  -  
  320 E3:09B8 -  -  -  -  ; compute dxdv,dydv and dxdu,dydu
  321 E3:09B8 -  -  -  -  ; (hl), (de), (bc) = point0, 1,2
  322 E3:09B8 1A -  -  -  	ld	a, (de)
  323 E3:09B9 96 -  -  -  	sub	a, (hl)
  324 E3:09BA 32 DD 09 E3 	ld	(vxRegisterDerivativeDY0), a
  325 E3:09BE 32 42 0A E3 	ld	(vxRegisterDerivativeDY1), a
  326 E3:09C2 32 A2 0A E3 	ld	(vxRegisterDerivativeDY2), a
  327 E3:09C6 -  -  -  -  
  328 E3:09C6 0A -  -  -  	ld	a, (bc)
  329 E3:09C7 96 -  -  -  	sub	(hl)
  330 E3:09C8 F5 -  -  -  	push	af
  331 E3:09C9 ED 62 -  -  	sbc	hl, hl
  332 E3:09CB 6F -  -  -  	ld	l, a
  333 E3:09CC 29 -  -  -  	add	hl, hl
  334 E3:09CD 0A -  -  -  	ld	a, (bc)
  335 E3:09CE 01 EF DC D1 	ld	bc, VX_INVERSE_TABLE
  336 E3:09D2 09 -  -  -  	add	hl, bc
  337 E3:09D3 ED 27 -  -  	ld	hl, (hl)
  338 E3:09D5 52 23 -  -  	inc.s	hl	; essential, table have (value-1)
  339 E3:09D7 -  -  -  -  ; hl = 65536/(y2-y0)
  340 E3:09D7 -  -  -  -  ; FIXME : SAVE HL HERE FOR LATER
  341 E3:09D7 E5 -  -  -  	push	hl
  342 E3:09D8 EB -  -  -  	ex	de, hl
  343 E3:09D9 56 -  -  -  	ld	d, (hl)	; substracted by y0 else it isn't correct
  344 E3:09DA 92 -  -  -  	sub	a, d
  345 E3:09DB 7A -  -  -  	ld	a, d
  346 E3:09DC -  -  -  -  vxRegisterDerivativeDY0=$+1
  347 E3:09DC 16 00 -  -  	ld	d, $00
  348 E3:09DE 1E 0C -  -  	ld	e, 12
  349 E3:09E0 ED 5C -  -  	mlt	de
  350 E3:09E2 FD 19 -  -  	add	iy, de	; doesn't modify z
  351 E3:09E4 -  -  -  -  ; (iy) register0 hold y*320+x+framebuffer (or x2), register2 and 3 hold value u and v
  352 E3:09E4 -  -  -  -  ; I have x1 ready too. If z flag set, y1=y2
  353 E3:09E4 23 -  -  -  	inc	hl
  354 E3:09E5 ED 27 -  -  	ld hl,(hl)
  355 E3:09E7 52 2B 52 23 	ld hlu, 0
  356 E3:09EB 28 0D -  -  	jr z, vxRegisterDerivativeNull
  357 E3:09ED 5F -  -  -  	ld e, a
  358 E3:09EE 16 A0 -  -  	ld d, 160
  359 E3:09F0 ED 5C -  -  	mlt	de
  360 E3:09F2 19 -  -  -  	add hl, de
  361 E3:09F3 19 -  -  -  	add	hl, de
  362 E3:09F4 ED 5B 14 00 
              E3 -  -  -  	ld	de, (vxFramebuffer)
  363 E3:09F9 19 -  -  -  	add	hl, de
  364 E3:09FA -  -  -  -  vxRegisterDerivativeNull:
  365 E3:09FA FD 17 00 -  	ld	de, (iy+VX_REGISTER0)
  366 E3:09FD 3E 13 -  -  	ld	a, $13
  367 E3:09FF B7 -  -  -  	or	a, a
  368 E3:0A00 ED 52 -  -  	sbc	hl, de		; x1-rx
  369 E3:0A02 -  -  -  -  ; I have here interpolated dx=x1-rx value, sign is correct
  370 E3:0A02 -  -  -  -  ; if dx < 0, make abs() and change to dec de mode (rx is at right, x1 is at left) ;; ISSUE 1 : need to correct sign based on sign of X ?
  371 E3:0A02 F2 0D 0A E3 	jp	p, vxRegisterDerivativeAbs
  372 E3:0A06 EB -  -  -  	ex	de, hl
  373 E3:0A07 F6 08 -  -  	or	a, $08
  374 E3:0A09 ED 62 -  -  	sbc	hl, hl
  375 E3:0A0B ED 52 -  -  	sbc hl, de
  376 E3:0A0D -  -  -  -  vxRegisterDerivativeAbs:
  377 E3:0A0D -  -  -  -  ; write inc/dec
  378 E3:0A0D FD 21 1F C8 
              D1 -  -  -  	ld	iy, VX_PIXEL_SHADER_DATA
  379 E3:0A12 32 19 00 E1 	ld	(VX_PIXEL_SHADER_SUBSIZE-1+VX_PIXEL_SHADER_CODE), a
  380 E3:0A16 32 23 00 E1 	ld	(VX_PIXEL_SHADER_SUBSIZE*2-1+VX_PIXEL_SHADER_CODE), a
  381 E3:0A1A 29 -  -  -  	add	hl, hl
  382 E3:0A1B 09 -  -  -  	add	hl, bc		; bc =VX_INVERE_TABLE
  383 E3:0A1C ED 27 -  -  	ld	hl, (hl)
  384 E3:0A1E 52 23 -  -  	inc.s	hl	; essential, table have (value-1)
  385 E3:0A20 -  -  -  -  ; FIXME SAVE HL AND RESTORE PREVIOUS HL
  386 E3:0A20 E3 -  -  -  	ex	(sp), hl
  387 E3:0A21 EB -  -  -  	ex	de, hl
  388 E3:0A22 -  -  -  -  ; de = ratio
  389 E3:0A22 FD 7E F0 -  	ld	a, (iy+VX_REGISTER_V2)
  390 E3:0A25 FD 96 E4 -  	sub	(iy+VX_REGISTER_V0)
  391 E3:0A28 62 -  -  -  	ld	h, d
  392 E3:0A29 6F -  -  -  	ld	l, a
  393 E3:0A2A ED 6C -  -  	mlt	hl
  394 E3:0A2C 30 03 -  -  	jr	nc, $+5
  395 E3:0A2E B7 -  -  -  	or	a, a
  396 E3:0A2F ED 52 -  -  	sbc	hl, de
  397 E3:0A31 43 -  -  -  	ld	b, e
  398 E3:0A32 4F -  -  -  	ld	c, a
  399 E3:0A33 ED 4C -  -  	mlt	bc
  400 E3:0A35 48 -  -  -  	ld	c, b
  401 E3:0A36 06 00 -  -  	ld	b, 0
  402 E3:0A38 09 -  -  -  	add	hl, bc
  403 E3:0A39 FD 2F F4 -  	ld	(iy+VX_FDVDY), hl
  404 E3:0A3C -  -  -  -  ; de = du/dy
  405 E3:0A3C -  -  -  -  ; now do hl*(y1-y0)/256
  406 E3:0A3C -  -  -  -  ; hl is fixed point 8.8 signed, a is unsigned.
  407 E3:0A3C EB -  -  -  	ex	de, hl
  408 E3:0A3D E3 -  -  -  	ex	(sp), hl
  409 E3:0A3E EB -  -  -  	ex	de, hl
  410 E3:0A3F CB 7C -  -  	bit	7, h		;check sign of ratio
  411 E3:0A41 -  -  -  -  ; de = new ratio
  412 E3:0A41 -  -  -  -  vxRegisterDerivativeDY1=$+1
  413 E3:0A41 3E 00 -  -  	ld	a, 0
  414 E3:0A43 47 -  -  -  	ld	b, a
  415 E3:0A44 4C -  -  -  	ld	c, h
  416 E3:0A45 ED 4C -  -  	mlt	bc
  417 E3:0A47 CB 14 -  -  	rl	h
  418 E3:0A49 67 -  -  -  	ld	h, a
  419 E3:0A4A 30 03 -  -  	jr	nc, $+5
  420 E3:0A4C 2F -  -  -  	cpl
  421 E3:0A4D 88 -  -  -  	adc	a, b
  422 E3:0A4E 47 -  -  -  	ld	b, a
  423 E3:0A4F ED 6C -  -  	mlt	hl
  424 E3:0A51 6C -  -  -  	ld	l, h
  425 E3:0A52 26 00 -  -  	ld	h, 0
  426 E3:0A54 09 -  -  -  	add	hl, bc
  427 E3:0A55 -  -  -  -  ; interesting value is l
  428 E3:0A55 FD 4E E4 -  	ld	c, (iy+VX_REGISTER_V0)
  429 E3:0A58 06 00 -  -  	ld	b, 0
  430 E3:0A5A 09 -  -  -  	add	hl, bc
  431 E3:0A5B CB 7C -  -  	bit	7, h
  432 E3:0A5D 28 02 -  -  	jr	z, $+4
  433 E3:0A5F 2E 00 -  -  	ld	l, 0
  434 E3:0A61 -  -  -  -  ; in theory the value here is >0
  435 E3:0A61 FD 7E EA -  	ld	a, (iy+VX_REGISTER_V1)
  436 E3:0A64 95 -  -  -  	sub	a, l
  437 E3:0A65 62 -  -  -  	ld	h, d
  438 E3:0A66 6F -  -  -  	ld	l, a
  439 E3:0A67 ED 6C -  -  	mlt	hl
  440 E3:0A69 30 03 -  -  	jr	nc, $+5
  441 E3:0A6B B7 -  -  -  	or	a, a
  442 E3:0A6C ED 52 -  -  	sbc	hl, de
  443 E3:0A6E 43 -  -  -  	ld	b, e
  444 E3:0A6F 4F -  -  -  	ld	c, a
  445 E3:0A70 ED 4C -  -  	mlt	bc
  446 E3:0A72 -  -  -  -  ; divide by 256
  447 E3:0A72 48 -  -  -  	ld	c, b
  448 E3:0A73 06 00 -  -  	ld	b, 0
  449 E3:0A75 09 -  -  -  	add	hl, bc
  450 E3:0A76 FD 2F FA -  	ld	(iy+VX_FDVDX), hl
  451 E3:0A79 -  -  -  -  
  452 E3:0A79 EB -  -  -  	ex	de, hl
  453 E3:0A7A E3 -  -  -  	ex	(sp), hl
  454 E3:0A7B EB -  -  -  	ex	de, hl
  455 E3:0A7C -  -  -  -  ; now compute gradient for v paramater
  456 E3:0A7C FD 7E EF -  	ld	a, (iy+VX_REGISTER_U2)
  457 E3:0A7F FD 96 E3 -  	sub	(iy+VX_REGISTER_U0)
  458 E3:0A82 62 -  -  -  	ld	h, d
  459 E3:0A83 6F -  -  -  	ld	l, a
  460 E3:0A84 ED 6C -  -  	mlt	hl
  461 E3:0A86 30 03 -  -  	jr	nc, $+5
  462 E3:0A88 B7 -  -  -  	or	a, a
  463 E3:0A89 ED 52 -  -  	sbc	hl, de
  464 E3:0A8B 43 -  -  -  	ld	b, e
  465 E3:0A8C 4F -  -  -  	ld	c, a
  466 E3:0A8D ED 4C -  -  	mlt	bc
  467 E3:0A8F 48 -  -  -  	ld	c, b
  468 E3:0A90 06 00 -  -  	ld	b, 0
  469 E3:0A92 52 09 -  -  	add.s	hl, bc
  470 E3:0A94 FD 17 F4 -  	ld	de, (iy+VX_FDVDY)
  471 E3:0A97 CB 7A -  -  	bit	7, d
  472 E3:0A99 28 02 -  -  	jr	z, $+4
  473 E3:0A9B 52 2B -  -  	dec.s	hl
  474 E3:0A9D FD 2F F6 -  	ld	(iy+VX_FDUDY), hl
  475 E3:0AA0 D1 -  -  -  	pop	de
  476 E3:0AA1 -  -  -  -  ; hl = dv/dy
  477 E3:0AA1 -  -  -  -  ; now do hl*(y1-y0)/256
  478 E3:0AA1 -  -  -  -  ; hl is fixed point 8.8 signed, a is unsigned.
  479 E3:0AA1 -  -  -  -  ; de = new ratio
  480 E3:0AA1 -  -  -  -  vxRegisterDerivativeDY2=$+1
  481 E3:0AA1 3E 00 -  -  	ld	a, 0
  482 E3:0AA3 -  -  -  -  
  483 E3:0AA3 47 -  -  -  	ld	b, a
  484 E3:0AA4 4C -  -  -  	ld	c, h
  485 E3:0AA5 ED 4C -  -  	mlt	bc
  486 E3:0AA7 CB 14 -  -  	rl	h
  487 E3:0AA9 67 -  -  -  	ld	h, a
  488 E3:0AAA 30 03 -  -  	jr	nc, $+5
  489 E3:0AAC 2F -  -  -  	cpl
  490 E3:0AAD 88 -  -  -  	adc	a, b
  491 E3:0AAE 47 -  -  -  	ld	b, a
  492 E3:0AAF ED 6C -  -  	mlt	hl
  493 E3:0AB1 6C -  -  -  	ld	l, h
  494 E3:0AB2 26 00 -  -  	ld	h, 0
  495 E3:0AB4 09 -  -  -  	add	hl, bc
  496 E3:0AB5 -  -  -  -  ; interesting value is l
  497 E3:0AB5 FD 4E E3 -  	ld	c, (iy+VX_REGISTER_U0)
  498 E3:0AB8 06 00 -  -  	ld	b, 0
  499 E3:0ABA 09 -  -  -  	add	hl, bc
  500 E3:0ABB CB 7C -  -  	bit	7, h
  501 E3:0ABD 28 02 -  -  	jr	z, $+4
  502 E3:0ABF 2E 00 -  -  	ld	l, 0
  503 E3:0AC1 FD 7E E9 -  	ld	a, (iy+VX_REGISTER_U1)
  504 E3:0AC4 95 -  -  -  	sub	a, l
  505 E3:0AC5 62 -  -  -  	ld	h, d
  506 E3:0AC6 6F -  -  -  	ld	l, a
  507 E3:0AC7 ED 6C -  -  	mlt	hl
  508 E3:0AC9 30 03 -  -  	jr	nc, $+5
  509 E3:0ACB B7 -  -  -  	or	a, a
  510 E3:0ACC ED 52 -  -  	sbc	hl, de
  511 E3:0ACE 43 -  -  -  	ld	b, e
  512 E3:0ACF 4F -  -  -  	ld	c, a
  513 E3:0AD0 ED 4C -  -  	mlt	bc
  514 E3:0AD2 -  -  -  -  ; divide by 256
  515 E3:0AD2 48 -  -  -  	ld	c, b
  516 E3:0AD3 06 00 -  -  	ld	b, 0
  517 E3:0AD5 52 09 -  -  	add.s	hl, bc
  518 E3:0AD7 -  -  -  -  ; sign correction for interpolation
  519 E3:0AD7 FD 17 FA -  	ld	de, (iy+VX_FDVDX)
  520 E3:0ADA CB 7A -  -  	bit	7, d
  521 E3:0ADC 28 02 -  -  	jr	z, $+4
  522 E3:0ADE 52 2B -  -  	dec.s	hl
  523 E3:0AE0 FD 2F FC -  	ld	(iy+VX_FDUDX), hl
  524 E3:0AE3 -  -  -  -  ; interpolate u,v register2 and register3, and initialise drawing
  525 E3:0AE3 -  -  -  -  
  526 E3:0AE3 -  -  -  -  ; hl = u0*256+(dudy+dudx)/2, ix=v0*256+(dvdy+dvdx)/2
  527 E3:0AE3 FD 27 F4 -  	ld	hl, (iy+VX_FDVDY)
  528 E3:0AE6 FD 17 FA -  	ld	de, (iy+VX_FDVDX)
  529 E3:0AE9 52 19 -  -  	add.s	hl, de
  530 E3:0AEB CB 2C CB 1D 	sra	h \ rr l
  531 E3:0AEF EB -  -  -  	ex	de, hl
  532 E3:0AF0 FD 27 F6 -  	ld	hl, (iy+VX_FDUDY)
  533 E3:0AF3 FD 07 FC -  	ld	bc, (iy+VX_FDUDX)
  534 E3:0AF6 52 09 -  -  	add.s	hl, bc
  535 E3:0AF8 CB 2C CB 1D 	sra	h \ rr  l
  536 E3:0AFC 7D -  -  -  	ld	a, l
  537 E3:0AFD 32 0F 0B E3 	ld	(vxShaderOffset+2), a
  538 E3:0B01 7C -  -  -  	ld	a, h
  539 E3:0B02 -  -  -  -  
  540 E3:0B02 -  -  -  -  vxShaderTexturePage=$+1
  541 E3:0B02 21 00 00 D3 	ld	hl, $D30000
  542 E3:0B06 FD 6E E3 -  	ld	l, (iy+VX_REGISTER_U0)
  543 E3:0B09 85 -  -  -  	add	a, l
  544 E3:0B0A 6F -  -  -  	ld	l, a
  545 E3:0B0B -  -  -  -  vxShaderOffset=$+2
  546 E3:0B0B DD 21 00 00 
              00 -  -  -  	ld	ix, $000000
  547 E3:0B10 FD 7E E4 -  	ld	a, (iy+VX_REGISTER_V0)
  548 E3:0B13 82 -  -  -  	add	a, d
  549 E3:0B14 DD 67 -  -  	ld	ixh, a
  550 E3:0B16 DD 6B -  -  	ld	ixl, e
  551 E3:0B18 -  -  -  -  ; load de and bc
  552 E3:0B18 FD 07 F4 -  	ld	bc, (iy+VX_FDVDY)
  553 E3:0B1B FD 17 F7 -  	ld	de, (iy+VX_FDUDY+1)
  554 E3:0B1E -  -  -  -  ; ready to interpolate
  555 E3:0B1E F1 -  -  -  	pop	af
  556 E3:0B1F -  -  -  -  vxRegisterGradientLoop:
  557 E3:0B1F FD 3E 06 -  	ld	(iy+VX_REGISTER2), ix
  558 E3:0B22 FD 2F 09 -  	ld	(iy+VX_REGISTER3), hl
  559 E3:0B25 DD 09 -  -  	add	ix, bc	; v interpolation on y
  560 E3:0B27 ED 5A -  -  	adc	hl, de	; u interpolation on y
  561 E3:0B29 3D -  -  -  	dec	a
  562 E3:0B2A 28 10 -  -  	jr	z, vxRegisterGradientEnd
  563 E3:0B2C FD 3E 12 -  	ld	(iy+VX_REGISTER2+VX_REGISTER_SIZE), ix
  564 E3:0B2F FD 2F 15 -  	ld	(iy+VX_REGISTER3+VX_REGISTER_SIZE), hl
  565 E3:0B32 DD 09 -  -  	add	ix, bc	; v interpolation on y
  566 E3:0B34 ED 5A -  -  	adc	hl, de	; u interpolation on y
  567 E3:0B36 ED 33 18 -  	lea	iy, iy+(VX_REGISTER_SIZE*2)
  568 E3:0B39 3D -  -  -  	dec	a
  569 E3:0B3A 20 E3 -  -  	jr	nz, vxRegisterGradientLoop
  570 E3:0B3C -  -  -  -  vxRegisterGradientEnd:
  571 E3:0B3C -  -  -  -  ; initialise drawing
  572 E3:0B3C DD 21 10 00 
              E1 -  -  -  	ld	ix, VX_PIXEL_SHADER_CODE
  573 E3:0B41 FD 21 1F C8 
              D1 -  -  -  	ld	iy, VX_PIXEL_SHADER_DATA
  574 E3:0B46 -  -  -  -  ; hl'= texture page and accumulator for dux	LOADED
  575 E3:0B46 -  -  -  -  ; de'= low byte is dux											INIT
  576 E3:0B46 -  -  -  -  ; sp = dux*65536+dvx												INIT
  577 E3:0B46 -  -  -  -  ; bc'= undefined														INIT
  578 E3:0B46 -  -  -  -  ; hl = accumulator for dux									LOADED
  579 E3:0B46 -  -  -  -  ; de = screen adress												LOADED
  580 E3:0B46 -  -  -  -  ; bc = djnz size														LOADED
  581 E3:0B46 ED 73 5C 0B 
              E3 -  -  -  	ld	(vxPixelShaderExit+1), sp
  582 E3:0B4B -  -  -  -  vxShaderUniform0=$+1
  583 E3:0B4B 01 00 00 D0 	ld	bc, VX_PIXEL_SHADER_CONSTANT
  584 E3:0B4F FD 27 FA -  	ld	hl, (iy+VX_FDVDX)
  585 E3:0B52 F9 -  -  -  	ld	sp, hl
  586 E3:0B53 FD 17 FD -  	ld	de, (iy+VX_FDUDX+1)
  587 E3:0B56 D9 -  -  -  	exx
  588 E3:0B57 C3 26 00 E1 	jp	vxShaderGeneralInterpolation
  589 E3:0B5B -  -  -  -  vxPixelShaderExit:
  590 E3:0B5B 31 00 00 00 	ld	sp, $000000
  591 E3:0B5F C9 -  -  -  	ret
  592 E3:0B60 -  -  -  -  
  593 E3:0B60 -  -  -  -  .endrelocate
Listing for file "include\\relocate.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxShaderInterpolation.ez80"
  594 D1:D77F -  -  -  -  
  595 D1:D77F -  -  -  -  #include "vxPixelShader.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPixelShader.inc"
    1 D1:D77F -  -  -  -  #define	VX_PIXEL_SHADER_CODE		$E10010
    2 D1:D77F -  -  -  -  #define	VX_PIXEL_SHADER_SIZE		64
    3 D1:D77F -  -  -  -  #define	VX_PIXEL_SHADER_CONSTANT	$D00000
    4 D1:D77F -  -  -  -  #define	VX_PIXEL_SHADER_SUBSIZE	10
    5 D1:D77F -  -  -  -  
    6 D1:D77F -  -  -  -  #define	VX_REGISTER_SIZE			12
    7 D1:D77F -  -  -  -  #define	VX_REGISTER0			0
    8 D1:D77F -  -  -  -  #define	VX_REGISTER1			3
    9 D1:D77F -  -  -  -  #define	VX_REGISTER2			6
   10 D1:D77F -  -  -  -  #define	VX_REGISTER3			9
   11 D1:D77F -  -  -  -  
   12 D1:D77F -  -  -  -  ; locate write area as vxPixelShader + SUB_SIZE - 1, 1 byte to write
   13 D1:D77F -  -  -  -  ; for killing pixel, do a jr cc,$+3 for ld, jr cc, $+5 for other
   14 D1:D77F -  -  -  -  
   15 D1:D77F -  -  -  -  
   16 D1:D77F -  -  -  -  VX_PIXEL_SHADER_COPY:
   17 D1:D77F -  -  -  -  
   18 D1:D77F -  -  -  -  .relocate	VX_PIXEL_SHADER_CODE
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPixelShader.inc"
   19 E1:0010 -  -  -  -  
   20 E1:0010 -  -  -  -  vxPixelShader:
   21 E1:0010 7C -  -  -  	ld	a, h
   22 E1:0011 39 -  -  -  	add	hl, sp
   23 E1:0012 D9 -  -  -  	exx
   24 E1:0013 67 -  -  -  	ld	h, a
   25 E1:0014 -  -  -  -  ;	ld	c, (hl)
   26 E1:0014 7E -  -  -  	ld	a, (hl)
   27 E1:0015 ED 5A -  -  	adc	hl, de
   28 E1:0017 -  -  -  -  ;	ld	a, c
   29 E1:0017 -  -  -  -  ;	cp	$FF
   30 E1:0017 -  -  -  -  ;	ld	a, (bc)
   31 E1:0017 D9 -  -  -  	exx
   32 E1:0018 -  -  -  -  ;	jr	z, $+3
   33 E1:0018 12 13 -  -  	ldi	(de), a
   34 E1:001A 7C -  -  -  	ld	a, h
   35 E1:001B 39 -  -  -  	add	hl, sp
   36 E1:001C D9 -  -  -  	exx
   37 E1:001D 67 -  -  -  	ld	h, a
   38 E1:001E -  -  -  -  ;	ld	c, (hl)
   39 E1:001E 7E -  -  -  	ld	a, (hl)
   40 E1:001F ED 5A -  -  	adc	hl, de
   41 E1:0021 -  -  -  -  ;	ld	a, c
   42 E1:0021 -  -  -  -  ;	cp	$FF
   43 E1:0021 -  -  -  -  ;	ld	a, (bc)
   44 E1:0021 D9 -  -  -  	exx
   45 E1:0022 -  -  -  -  ;	jr	z, $+3
   46 E1:0022 12 13 -  -  	ldi	(de), a
   47 E1:0024 10 EA -  -  	djnz	vxPixelShader
   48 E1:0026 -  -  -  -  vxShaderGeneralInterpolation:
   49 E1:0026 FD 27 03 -  	ld	hl, (iy+VX_REGISTER1)
   50 E1:0029 FD 17 00 -  	ld	de, (iy+VX_REGISTER0)
   51 E1:002C 19 -  -  -  	add	hl, de
   52 E1:002D 29 -  -  -  	add	hl, hl
   53 E1:002E 7E -  -  -  	ld	a, (hl)
   54 E1:002F DD 6F -  -  	ld	ixl, a
   55 E1:0031 23 -  -  -  	inc	hl
   56 E1:0032 46 -  -  -  	ld	b, (hl)
   57 E1:0033 FD 27 06 -  	ld	hl, (iy+VX_REGISTER2)	; v
   58 E1:0036 D9 -  -  -  	exx
   59 E1:0037 FD 27 09 -  	ld	hl, (iy+VX_REGISTER3)	; u
   60 E1:003A D9 -  -  -  	exx
   61 E1:003B ED 33 0C -  	lea	iy, iy+VX_REGISTER_SIZE
   62 E1:003E DD E9 -  -  	jp	(ix)
   63 E1:0040 00 00 00 00 
              00 00 00 00 
              00 00 00 00 .align $E1004C
   64 E1:004C C3 5B 0B E3 	jp	vxPixelShaderExit
   65 E1:0050 -  -  -  -  ; exactly 64 bytes
   66 E1:0050 -  -  -  -  
   67 E1:0050 -  -  -  -  .endrelocate
Listing for file "include\\relocate.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxPixelShader.inc"
   68 D1:D7BF -  -  -  -  
   69 D1:D7BF -  -  -  -  #define	VX_CALL0_POS	(VX_PIXEL_SHADER_SUBSIZE*2-1+VX_PIXEL_SHADER_CODE)%256
   70 D1:D7BF -  -  -  -  #define	VX_CALL1_POS	(VX_PIXEL_SHADER_SUBSIZE-1+VX_PIXEL_SHADER_CODE)%256
   71 D1:D7BF -  -  -  -  #define	VX_CALL_NULL	((VX_PIXEL_SHADER_SUBSIZE+1)*2+VX_PIXEL_SHADER_CODE)%256
   72 D1:D7BF -  -  -  -  #define	VX_CALL1_NEG	(VX_PIXEL_SHADER_SUBSIZE+VX_PIXEL_SHADER_CODE)%256
   73 D1:D7BF -  -  -  -  #define	VX_CALL0_NEG	(VX_PIXEL_SHADER_CODE)%256
   74 D1:D7BF -  -  -  -  #define	VX_CALL_EXIT	(VX_PIXEL_SHADER_CODE+60)%256
   75 D1:D7BF -  -  -  -  
   76 D1:D7BF -  -  -  -  ; pad to two bytes
   77 D1:D7BF 00 -  -  -     .align  2
   78 D1:D7C0 1A A1 -  -     .db VX_CALL1_NEG, 161
   79 D1:D7C2 10 A0 -  -     .db VX_CALL0_NEG, 160
   80 D1:D7C4 1A A0 -  -     .db VX_CALL1_NEG, 160
   81 D1:D7C6 10 9F -  -     .db VX_CALL0_NEG, 159
   82 D1:D7C8 1A 9F -  -     .db VX_CALL1_NEG, 159
   83 D1:D7CA 10 9E -  -     .db VX_CALL0_NEG, 158
   84 D1:D7CC 1A 9E -  -     .db VX_CALL1_NEG, 158
   85 D1:D7CE 10 9D -  -     .db VX_CALL0_NEG, 157
   86 D1:D7D0 1A 9D -  -     .db VX_CALL1_NEG, 157
   87 D1:D7D2 10 9C -  -     .db VX_CALL0_NEG, 156
   88 D1:D7D4 1A 9C -  -     .db VX_CALL1_NEG, 156
   89 D1:D7D6 10 9B -  -     .db VX_CALL0_NEG, 155
   90 D1:D7D8 1A 9B -  -     .db VX_CALL1_NEG, 155
   91 D1:D7DA 10 9A -  -     .db VX_CALL0_NEG, 154
   92 D1:D7DC 1A 9A -  -     .db VX_CALL1_NEG, 154
   93 D1:D7DE 10 99 -  -     .db VX_CALL0_NEG, 153
   94 D1:D7E0 1A 99 -  -     .db VX_CALL1_NEG, 153
   95 D1:D7E2 10 98 -  -     .db VX_CALL0_NEG, 152
   96 D1:D7E4 1A 98 -  -     .db VX_CALL1_NEG, 152
   97 D1:D7E6 10 97 -  -     .db VX_CALL0_NEG, 151
   98 D1:D7E8 1A 97 -  -     .db VX_CALL1_NEG, 151
   99 D1:D7EA 10 96 -  -     .db VX_CALL0_NEG, 150
  100 D1:D7EC 1A 96 -  -     .db VX_CALL1_NEG, 150
  101 D1:D7EE 10 95 -  -     .db VX_CALL0_NEG, 149
  102 D1:D7F0 1A 95 -  -     .db VX_CALL1_NEG, 149
  103 D1:D7F2 10 94 -  -     .db VX_CALL0_NEG, 148
  104 D1:D7F4 1A 94 -  -     .db VX_CALL1_NEG, 148
  105 D1:D7F6 10 93 -  -     .db VX_CALL0_NEG, 147
  106 D1:D7F8 1A 93 -  -     .db VX_CALL1_NEG, 147
  107 D1:D7FA 10 92 -  -     .db VX_CALL0_NEG, 146
  108 D1:D7FC 1A 92 -  -     .db VX_CALL1_NEG, 146
  109 D1:D7FE 10 91 -  -     .db VX_CALL0_NEG, 145
  110 D1:D800 1A 91 -  -     .db VX_CALL1_NEG, 145
  111 D1:D802 10 90 -  -     .db VX_CALL0_NEG, 144
  112 D1:D804 1A 90 -  -     .db VX_CALL1_NEG, 144
  113 D1:D806 10 8F -  -     .db VX_CALL0_NEG, 143
  114 D1:D808 1A 8F -  -     .db VX_CALL1_NEG, 143
  115 D1:D80A 10 8E -  -     .db VX_CALL0_NEG, 142
  116 D1:D80C 1A 8E -  -     .db VX_CALL1_NEG, 142
  117 D1:D80E 10 8D -  -     .db VX_CALL0_NEG, 141
  118 D1:D810 1A 8D -  -     .db VX_CALL1_NEG, 141
  119 D1:D812 10 8C -  -     .db VX_CALL0_NEG, 140
  120 D1:D814 1A 8C -  -     .db VX_CALL1_NEG, 140
  121 D1:D816 10 8B -  -     .db VX_CALL0_NEG, 139
  122 D1:D818 1A 8B -  -     .db VX_CALL1_NEG, 139
  123 D1:D81A 10 8A -  -     .db VX_CALL0_NEG, 138
  124 D1:D81C 1A 8A -  -     .db VX_CALL1_NEG, 138
  125 D1:D81E 10 89 -  -     .db VX_CALL0_NEG, 137
  126 D1:D820 1A 89 -  -     .db VX_CALL1_NEG, 137
  127 D1:D822 10 88 -  -     .db VX_CALL0_NEG, 136
  128 D1:D824 1A 88 -  -     .db VX_CALL1_NEG, 136
  129 D1:D826 10 87 -  -     .db VX_CALL0_NEG, 135
  130 D1:D828 1A 87 -  -     .db VX_CALL1_NEG, 135
  131 D1:D82A 10 86 -  -     .db VX_CALL0_NEG, 134
  132 D1:D82C 1A 86 -  -     .db VX_CALL1_NEG, 134
  133 D1:D82E 10 85 -  -     .db VX_CALL0_NEG, 133
  134 D1:D830 1A 85 -  -     .db VX_CALL1_NEG, 133
  135 D1:D832 10 84 -  -     .db VX_CALL0_NEG, 132
  136 D1:D834 1A 84 -  -     .db VX_CALL1_NEG, 132
  137 D1:D836 10 83 -  -     .db VX_CALL0_NEG, 131
  138 D1:D838 1A 83 -  -     .db VX_CALL1_NEG, 131
  139 D1:D83A 10 82 -  -     .db VX_CALL0_NEG, 130
  140 D1:D83C 1A 82 -  -     .db VX_CALL1_NEG, 130
  141 D1:D83E 10 81 -  -     .db VX_CALL0_NEG, 129
  142 D1:D840 1A 81 -  -     .db VX_CALL1_NEG, 129
  143 D1:D842 10 80 -  -     .db VX_CALL0_NEG, 128
  144 D1:D844 1A 80 -  -     .db VX_CALL1_NEG, 128
  145 D1:D846 10 7F -  -     .db VX_CALL0_NEG, 127
  146 D1:D848 1A 7F -  -     .db VX_CALL1_NEG, 127
  147 D1:D84A 10 7E -  -     .db VX_CALL0_NEG, 126
  148 D1:D84C 1A 7E -  -     .db VX_CALL1_NEG, 126
  149 D1:D84E 10 7D -  -     .db VX_CALL0_NEG, 125
  150 D1:D850 1A 7D -  -     .db VX_CALL1_NEG, 125
  151 D1:D852 10 7C -  -     .db VX_CALL0_NEG, 124
  152 D1:D854 1A 7C -  -     .db VX_CALL1_NEG, 124
  153 D1:D856 10 7B -  -     .db VX_CALL0_NEG, 123
  154 D1:D858 1A 7B -  -     .db VX_CALL1_NEG, 123
  155 D1:D85A 10 7A -  -     .db VX_CALL0_NEG, 122
  156 D1:D85C 1A 7A -  -     .db VX_CALL1_NEG, 122
  157 D1:D85E 10 79 -  -     .db VX_CALL0_NEG, 121
  158 D1:D860 1A 79 -  -     .db VX_CALL1_NEG, 121
  159 D1:D862 10 78 -  -     .db VX_CALL0_NEG, 120
  160 D1:D864 1A 78 -  -     .db VX_CALL1_NEG, 120
  161 D1:D866 10 77 -  -     .db VX_CALL0_NEG, 119
  162 D1:D868 1A 77 -  -     .db VX_CALL1_NEG, 119
  163 D1:D86A 10 76 -  -     .db VX_CALL0_NEG, 118
  164 D1:D86C 1A 76 -  -     .db VX_CALL1_NEG, 118
  165 D1:D86E 10 75 -  -     .db VX_CALL0_NEG, 117
  166 D1:D870 1A 75 -  -     .db VX_CALL1_NEG, 117
  167 D1:D872 10 74 -  -     .db VX_CALL0_NEG, 116
  168 D1:D874 1A 74 -  -     .db VX_CALL1_NEG, 116
  169 D1:D876 10 73 -  -     .db VX_CALL0_NEG, 115
  170 D1:D878 1A 73 -  -     .db VX_CALL1_NEG, 115
  171 D1:D87A 10 72 -  -     .db VX_CALL0_NEG, 114
  172 D1:D87C 1A 72 -  -     .db VX_CALL1_NEG, 114
  173 D1:D87E 10 71 -  -     .db VX_CALL0_NEG, 113
  174 D1:D880 1A 71 -  -     .db VX_CALL1_NEG, 113
  175 D1:D882 10 70 -  -     .db VX_CALL0_NEG, 112
  176 D1:D884 1A 70 -  -     .db VX_CALL1_NEG, 112
  177 D1:D886 10 6F -  -     .db VX_CALL0_NEG, 111
  178 D1:D888 1A 6F -  -     .db VX_CALL1_NEG, 111
  179 D1:D88A 10 6E -  -     .db VX_CALL0_NEG, 110
  180 D1:D88C 1A 6E -  -     .db VX_CALL1_NEG, 110
  181 D1:D88E 10 6D -  -     .db VX_CALL0_NEG, 109
  182 D1:D890 1A 6D -  -     .db VX_CALL1_NEG, 109
  183 D1:D892 10 6C -  -     .db VX_CALL0_NEG, 108
  184 D1:D894 1A 6C -  -     .db VX_CALL1_NEG, 108
  185 D1:D896 10 6B -  -     .db VX_CALL0_NEG, 107
  186 D1:D898 1A 6B -  -     .db VX_CALL1_NEG, 107
  187 D1:D89A 10 6A -  -     .db VX_CALL0_NEG, 106
  188 D1:D89C 1A 6A -  -     .db VX_CALL1_NEG, 106
  189 D1:D89E 10 69 -  -     .db VX_CALL0_NEG, 105
  190 D1:D8A0 1A 69 -  -     .db VX_CALL1_NEG, 105
  191 D1:D8A2 10 68 -  -     .db VX_CALL0_NEG, 104
  192 D1:D8A4 1A 68 -  -     .db VX_CALL1_NEG, 104
  193 D1:D8A6 10 67 -  -     .db VX_CALL0_NEG, 103
  194 D1:D8A8 1A 67 -  -     .db VX_CALL1_NEG, 103
  195 D1:D8AA 10 66 -  -     .db VX_CALL0_NEG, 102
  196 D1:D8AC 1A 66 -  -     .db VX_CALL1_NEG, 102
  197 D1:D8AE 10 65 -  -     .db VX_CALL0_NEG, 101
  198 D1:D8B0 1A 65 -  -     .db VX_CALL1_NEG, 101
  199 D1:D8B2 10 64 -  -     .db VX_CALL0_NEG, 100
  200 D1:D8B4 1A 64 -  -     .db VX_CALL1_NEG, 100
  201 D1:D8B6 10 63 -  -     .db VX_CALL0_NEG, 99
  202 D1:D8B8 1A 63 -  -     .db VX_CALL1_NEG, 99
  203 D1:D8BA 10 62 -  -     .db VX_CALL0_NEG, 98
  204 D1:D8BC 1A 62 -  -     .db VX_CALL1_NEG, 98
  205 D1:D8BE 10 61 -  -     .db VX_CALL0_NEG, 97
  206 D1:D8C0 1A 61 -  -     .db VX_CALL1_NEG, 97
  207 D1:D8C2 10 60 -  -     .db VX_CALL0_NEG, 96
  208 D1:D8C4 1A 60 -  -     .db VX_CALL1_NEG, 96
  209 D1:D8C6 10 5F -  -     .db VX_CALL0_NEG, 95
  210 D1:D8C8 1A 5F -  -     .db VX_CALL1_NEG, 95
  211 D1:D8CA 10 5E -  -     .db VX_CALL0_NEG, 94
  212 D1:D8CC 1A 5E -  -     .db VX_CALL1_NEG, 94
  213 D1:D8CE 10 5D -  -     .db VX_CALL0_NEG, 93
  214 D1:D8D0 1A 5D -  -     .db VX_CALL1_NEG, 93
  215 D1:D8D2 10 5C -  -     .db VX_CALL0_NEG, 92
  216 D1:D8D4 1A 5C -  -     .db VX_CALL1_NEG, 92
  217 D1:D8D6 10 5B -  -     .db VX_CALL0_NEG, 91
  218 D1:D8D8 1A 5B -  -     .db VX_CALL1_NEG, 91
  219 D1:D8DA 10 5A -  -     .db VX_CALL0_NEG, 90
  220 D1:D8DC 1A 5A -  -     .db VX_CALL1_NEG, 90
  221 D1:D8DE 10 59 -  -     .db VX_CALL0_NEG, 89
  222 D1:D8E0 1A 59 -  -     .db VX_CALL1_NEG, 89
  223 D1:D8E2 10 58 -  -     .db VX_CALL0_NEG, 88
  224 D1:D8E4 1A 58 -  -     .db VX_CALL1_NEG, 88
  225 D1:D8E6 10 57 -  -     .db VX_CALL0_NEG, 87
  226 D1:D8E8 1A 57 -  -     .db VX_CALL1_NEG, 87
  227 D1:D8EA 10 56 -  -     .db VX_CALL0_NEG, 86
  228 D1:D8EC 1A 56 -  -     .db VX_CALL1_NEG, 86
  229 D1:D8EE 10 55 -  -     .db VX_CALL0_NEG, 85
  230 D1:D8F0 1A 55 -  -     .db VX_CALL1_NEG, 85
  231 D1:D8F2 10 54 -  -     .db VX_CALL0_NEG, 84
  232 D1:D8F4 1A 54 -  -     .db VX_CALL1_NEG, 84
  233 D1:D8F6 10 53 -  -     .db VX_CALL0_NEG, 83
  234 D1:D8F8 1A 53 -  -     .db VX_CALL1_NEG, 83
  235 D1:D8FA 10 52 -  -     .db VX_CALL0_NEG, 82
  236 D1:D8FC 1A 52 -  -     .db VX_CALL1_NEG, 82
  237 D1:D8FE 10 51 -  -     .db VX_CALL0_NEG, 81
  238 D1:D900 1A 51 -  -     .db VX_CALL1_NEG, 81
  239 D1:D902 10 50 -  -     .db VX_CALL0_NEG, 80
  240 D1:D904 1A 50 -  -     .db VX_CALL1_NEG, 80
  241 D1:D906 10 4F -  -     .db VX_CALL0_NEG, 79
  242 D1:D908 1A 4F -  -     .db VX_CALL1_NEG, 79
  243 D1:D90A 10 4E -  -     .db VX_CALL0_NEG, 78
  244 D1:D90C 1A 4E -  -     .db VX_CALL1_NEG, 78
  245 D1:D90E 10 4D -  -     .db VX_CALL0_NEG, 77
  246 D1:D910 1A 4D -  -     .db VX_CALL1_NEG, 77
  247 D1:D912 10 4C -  -     .db VX_CALL0_NEG, 76
  248 D1:D914 1A 4C -  -     .db VX_CALL1_NEG, 76
  249 D1:D916 10 4B -  -     .db VX_CALL0_NEG, 75
  250 D1:D918 1A 4B -  -     .db VX_CALL1_NEG, 75
  251 D1:D91A 10 4A -  -     .db VX_CALL0_NEG, 74
  252 D1:D91C 1A 4A -  -     .db VX_CALL1_NEG, 74
  253 D1:D91E 10 49 -  -     .db VX_CALL0_NEG, 73
  254 D1:D920 1A 49 -  -     .db VX_CALL1_NEG, 73
  255 D1:D922 10 48 -  -     .db VX_CALL0_NEG, 72
  256 D1:D924 1A 48 -  -     .db VX_CALL1_NEG, 72
  257 D1:D926 10 47 -  -     .db VX_CALL0_NEG, 71
  258 D1:D928 1A 47 -  -     .db VX_CALL1_NEG, 71
  259 D1:D92A 10 46 -  -     .db VX_CALL0_NEG, 70
  260 D1:D92C 1A 46 -  -     .db VX_CALL1_NEG, 70
  261 D1:D92E 10 45 -  -     .db VX_CALL0_NEG, 69
  262 D1:D930 1A 45 -  -     .db VX_CALL1_NEG, 69
  263 D1:D932 10 44 -  -     .db VX_CALL0_NEG, 68
  264 D1:D934 1A 44 -  -     .db VX_CALL1_NEG, 68
  265 D1:D936 10 43 -  -     .db VX_CALL0_NEG, 67
  266 D1:D938 1A 43 -  -     .db VX_CALL1_NEG, 67
  267 D1:D93A 10 42 -  -     .db VX_CALL0_NEG, 66
  268 D1:D93C 1A 42 -  -     .db VX_CALL1_NEG, 66
  269 D1:D93E 10 41 -  -     .db VX_CALL0_NEG, 65
  270 D1:D940 1A 41 -  -     .db VX_CALL1_NEG, 65
  271 D1:D942 10 40 -  -     .db VX_CALL0_NEG, 64
  272 D1:D944 1A 40 -  -     .db VX_CALL1_NEG, 64
  273 D1:D946 10 3F -  -     .db VX_CALL0_NEG, 63
  274 D1:D948 1A 3F -  -     .db VX_CALL1_NEG, 63
  275 D1:D94A 10 3E -  -     .db VX_CALL0_NEG, 62
  276 D1:D94C 1A 3E -  -     .db VX_CALL1_NEG, 62
  277 D1:D94E 10 3D -  -     .db VX_CALL0_NEG, 61
  278 D1:D950 1A 3D -  -     .db VX_CALL1_NEG, 61
  279 D1:D952 10 3C -  -     .db VX_CALL0_NEG, 60
  280 D1:D954 1A 3C -  -     .db VX_CALL1_NEG, 60
  281 D1:D956 10 3B -  -     .db VX_CALL0_NEG, 59
  282 D1:D958 1A 3B -  -     .db VX_CALL1_NEG, 59
  283 D1:D95A 10 3A -  -     .db VX_CALL0_NEG, 58
  284 D1:D95C 1A 3A -  -     .db VX_CALL1_NEG, 58
  285 D1:D95E 10 39 -  -     .db VX_CALL0_NEG, 57
  286 D1:D960 1A 39 -  -     .db VX_CALL1_NEG, 57
  287 D1:D962 10 38 -  -     .db VX_CALL0_NEG, 56
  288 D1:D964 1A 38 -  -     .db VX_CALL1_NEG, 56
  289 D1:D966 10 37 -  -     .db VX_CALL0_NEG, 55
  290 D1:D968 1A 37 -  -     .db VX_CALL1_NEG, 55
  291 D1:D96A 10 36 -  -     .db VX_CALL0_NEG, 54
  292 D1:D96C 1A 36 -  -     .db VX_CALL1_NEG, 54
  293 D1:D96E 10 35 -  -     .db VX_CALL0_NEG, 53
  294 D1:D970 1A 35 -  -     .db VX_CALL1_NEG, 53
  295 D1:D972 10 34 -  -     .db VX_CALL0_NEG, 52
  296 D1:D974 1A 34 -  -     .db VX_CALL1_NEG, 52
  297 D1:D976 10 33 -  -     .db VX_CALL0_NEG, 51
  298 D1:D978 1A 33 -  -     .db VX_CALL1_NEG, 51
  299 D1:D97A 10 32 -  -     .db VX_CALL0_NEG, 50
  300 D1:D97C 1A 32 -  -     .db VX_CALL1_NEG, 50
  301 D1:D97E 10 31 -  -     .db VX_CALL0_NEG, 49
  302 D1:D980 1A 31 -  -     .db VX_CALL1_NEG, 49
  303 D1:D982 10 30 -  -     .db VX_CALL0_NEG, 48
  304 D1:D984 1A 30 -  -     .db VX_CALL1_NEG, 48
  305 D1:D986 10 2F -  -     .db VX_CALL0_NEG, 47
  306 D1:D988 1A 2F -  -     .db VX_CALL1_NEG, 47
  307 D1:D98A 10 2E -  -     .db VX_CALL0_NEG, 46
  308 D1:D98C 1A 2E -  -     .db VX_CALL1_NEG, 46
  309 D1:D98E 10 2D -  -     .db VX_CALL0_NEG, 45
  310 D1:D990 1A 2D -  -     .db VX_CALL1_NEG, 45
  311 D1:D992 10 2C -  -     .db VX_CALL0_NEG, 44
  312 D1:D994 1A 2C -  -     .db VX_CALL1_NEG, 44
  313 D1:D996 10 2B -  -     .db VX_CALL0_NEG, 43
  314 D1:D998 1A 2B -  -     .db VX_CALL1_NEG, 43
  315 D1:D99A 10 2A -  -     .db VX_CALL0_NEG, 42
  316 D1:D99C 1A 2A -  -     .db VX_CALL1_NEG, 42
  317 D1:D99E 10 29 -  -     .db VX_CALL0_NEG, 41
  318 D1:D9A0 1A 29 -  -     .db VX_CALL1_NEG, 41
  319 D1:D9A2 10 28 -  -     .db VX_CALL0_NEG, 40
  320 D1:D9A4 1A 28 -  -     .db VX_CALL1_NEG, 40
  321 D1:D9A6 10 27 -  -     .db VX_CALL0_NEG, 39
  322 D1:D9A8 1A 27 -  -     .db VX_CALL1_NEG, 39
  323 D1:D9AA 10 26 -  -     .db VX_CALL0_NEG, 38
  324 D1:D9AC 1A 26 -  -     .db VX_CALL1_NEG, 38
  325 D1:D9AE 10 25 -  -     .db VX_CALL0_NEG, 37
  326 D1:D9B0 1A 25 -  -     .db VX_CALL1_NEG, 37
  327 D1:D9B2 10 24 -  -     .db VX_CALL0_NEG, 36
  328 D1:D9B4 1A 24 -  -     .db VX_CALL1_NEG, 36
  329 D1:D9B6 10 23 -  -     .db VX_CALL0_NEG, 35
  330 D1:D9B8 1A 23 -  -     .db VX_CALL1_NEG, 35
  331 D1:D9BA 10 22 -  -     .db VX_CALL0_NEG, 34
  332 D1:D9BC 1A 22 -  -     .db VX_CALL1_NEG, 34
  333 D1:D9BE 10 21 -  -     .db VX_CALL0_NEG, 33
  334 D1:D9C0 1A 21 -  -     .db VX_CALL1_NEG, 33
  335 D1:D9C2 10 20 -  -     .db VX_CALL0_NEG, 32
  336 D1:D9C4 1A 20 -  -     .db VX_CALL1_NEG, 32
  337 D1:D9C6 10 1F -  -     .db VX_CALL0_NEG, 31
  338 D1:D9C8 1A 1F -  -     .db VX_CALL1_NEG, 31
  339 D1:D9CA 10 1E -  -     .db VX_CALL0_NEG, 30
  340 D1:D9CC 1A 1E -  -     .db VX_CALL1_NEG, 30
  341 D1:D9CE 10 1D -  -     .db VX_CALL0_NEG, 29
  342 D1:D9D0 1A 1D -  -     .db VX_CALL1_NEG, 29
  343 D1:D9D2 10 1C -  -     .db VX_CALL0_NEG, 28
  344 D1:D9D4 1A 1C -  -     .db VX_CALL1_NEG, 28
  345 D1:D9D6 10 1B -  -     .db VX_CALL0_NEG, 27
  346 D1:D9D8 1A 1B -  -     .db VX_CALL1_NEG, 27
  347 D1:D9DA 10 1A -  -     .db VX_CALL0_NEG, 26
  348 D1:D9DC 1A 1A -  -     .db VX_CALL1_NEG, 26
  349 D1:D9DE 10 19 -  -     .db VX_CALL0_NEG, 25
  350 D1:D9E0 1A 19 -  -     .db VX_CALL1_NEG, 25
  351 D1:D9E2 10 18 -  -     .db VX_CALL0_NEG, 24
  352 D1:D9E4 1A 18 -  -     .db VX_CALL1_NEG, 24
  353 D1:D9E6 10 17 -  -     .db VX_CALL0_NEG, 23
  354 D1:D9E8 1A 17 -  -     .db VX_CALL1_NEG, 23
  355 D1:D9EA 10 16 -  -     .db VX_CALL0_NEG, 22
  356 D1:D9EC 1A 16 -  -     .db VX_CALL1_NEG, 22
  357 D1:D9EE 10 15 -  -     .db VX_CALL0_NEG, 21
  358 D1:D9F0 1A 15 -  -     .db VX_CALL1_NEG, 21
  359 D1:D9F2 10 14 -  -     .db VX_CALL0_NEG, 20
  360 D1:D9F4 1A 14 -  -     .db VX_CALL1_NEG, 20
  361 D1:D9F6 10 13 -  -     .db VX_CALL0_NEG, 19
  362 D1:D9F8 1A 13 -  -     .db VX_CALL1_NEG, 19
  363 D1:D9FA 10 12 -  -     .db VX_CALL0_NEG, 18
  364 D1:D9FC 1A 12 -  -     .db VX_CALL1_NEG, 18
  365 D1:D9FE 10 11 -  -     .db VX_CALL0_NEG, 17
  366 D1:DA00 1A 11 -  -     .db VX_CALL1_NEG, 17
  367 D1:DA02 10 10 -  -     .db VX_CALL0_NEG, 16
  368 D1:DA04 1A 10 -  -     .db VX_CALL1_NEG, 16
  369 D1:DA06 10 0F -  -     .db VX_CALL0_NEG, 15
  370 D1:DA08 1A 0F -  -     .db VX_CALL1_NEG, 15
  371 D1:DA0A 10 0E -  -     .db VX_CALL0_NEG, 14
  372 D1:DA0C 1A 0E -  -     .db VX_CALL1_NEG, 14
  373 D1:DA0E 10 0D -  -     .db VX_CALL0_NEG, 13
  374 D1:DA10 1A 0D -  -     .db VX_CALL1_NEG, 13
  375 D1:DA12 10 0C -  -     .db VX_CALL0_NEG, 12
  376 D1:DA14 1A 0C -  -     .db VX_CALL1_NEG, 12
  377 D1:DA16 10 0B -  -     .db VX_CALL0_NEG, 11
  378 D1:DA18 1A 0B -  -     .db VX_CALL1_NEG, 11
  379 D1:DA1A 10 0A -  -     .db VX_CALL0_NEG, 10
  380 D1:DA1C 1A 0A -  -     .db VX_CALL1_NEG, 10
  381 D1:DA1E 10 09 -  -     .db VX_CALL0_NEG, 9
  382 D1:DA20 1A 09 -  -     .db VX_CALL1_NEG, 9
  383 D1:DA22 10 08 -  -     .db VX_CALL0_NEG, 8
  384 D1:DA24 1A 08 -  -     .db VX_CALL1_NEG, 8
  385 D1:DA26 10 07 -  -     .db VX_CALL0_NEG, 7
  386 D1:DA28 1A 07 -  -     .db VX_CALL1_NEG, 7
  387 D1:DA2A 10 06 -  -     .db VX_CALL0_NEG, 6
  388 D1:DA2C 1A 06 -  -     .db VX_CALL1_NEG, 6
  389 D1:DA2E 10 05 -  -     .db VX_CALL0_NEG, 5
  390 D1:DA30 1A 05 -  -     .db VX_CALL1_NEG, 5
  391 D1:DA32 10 04 -  -     .db VX_CALL0_NEG, 4
  392 D1:DA34 1A 04 -  -     .db VX_CALL1_NEG, 4
  393 D1:DA36 10 03 -  -     .db VX_CALL0_NEG, 3
  394 D1:DA38 1A 03 -  -     .db VX_CALL1_NEG, 3
  395 D1:DA3A 10 02 -  -     .db VX_CALL0_NEG, 2
  396 D1:DA3C 1A 02 -  -     .db VX_CALL1_NEG, 2
  397 D1:DA3E 10 01 -  -     .db VX_CALL0_NEG, 1
  398 D1:DA40 1A 01 -  -  	 .db VX_CALL1_NEG, 1
  399 D1:DA42 -  -  -  -  vxPixelShaderLengthLUT:
  400 D1:DA42 26 01 -  -     .db VX_CALL_NULL, 1
  401 D1:DA44 19 01 -  -     .db VX_CALL1_POS, 1
  402 D1:DA46 23 02 -  -     .db VX_CALL0_POS, 2
  403 D1:DA48 19 02 -  -     .db VX_CALL1_POS, 2
  404 D1:DA4A 23 03 -  -     .db VX_CALL0_POS, 3
  405 D1:DA4C 19 03 -  -     .db VX_CALL1_POS, 3
  406 D1:DA4E 23 04 -  -     .db VX_CALL0_POS, 4
  407 D1:DA50 19 04 -  -     .db VX_CALL1_POS, 4
  408 D1:DA52 23 05 -  -     .db VX_CALL0_POS, 5
  409 D1:DA54 19 05 -  -     .db VX_CALL1_POS, 5
  410 D1:DA56 23 06 -  -     .db VX_CALL0_POS, 6
  411 D1:DA58 19 06 -  -     .db VX_CALL1_POS, 6
  412 D1:DA5A 23 07 -  -     .db VX_CALL0_POS, 7
  413 D1:DA5C 19 07 -  -     .db VX_CALL1_POS, 7
  414 D1:DA5E 23 08 -  -     .db VX_CALL0_POS, 8
  415 D1:DA60 19 08 -  -     .db VX_CALL1_POS, 8
  416 D1:DA62 23 09 -  -     .db VX_CALL0_POS, 9
  417 D1:DA64 19 09 -  -     .db VX_CALL1_POS, 9
  418 D1:DA66 23 0A -  -     .db VX_CALL0_POS, 10
  419 D1:DA68 19 0A -  -     .db VX_CALL1_POS, 10
  420 D1:DA6A 23 0B -  -     .db VX_CALL0_POS, 11
  421 D1:DA6C 19 0B -  -     .db VX_CALL1_POS, 11
  422 D1:DA6E 23 0C -  -     .db VX_CALL0_POS, 12
  423 D1:DA70 19 0C -  -     .db VX_CALL1_POS, 12
  424 D1:DA72 23 0D -  -     .db VX_CALL0_POS, 13
  425 D1:DA74 19 0D -  -     .db VX_CALL1_POS, 13
  426 D1:DA76 23 0E -  -     .db VX_CALL0_POS, 14
  427 D1:DA78 19 0E -  -     .db VX_CALL1_POS, 14
  428 D1:DA7A 23 0F -  -     .db VX_CALL0_POS, 15
  429 D1:DA7C 19 0F -  -     .db VX_CALL1_POS, 15
  430 D1:DA7E 23 10 -  -     .db VX_CALL0_POS, 16
  431 D1:DA80 19 10 -  -     .db VX_CALL1_POS, 16
  432 D1:DA82 23 11 -  -     .db VX_CALL0_POS, 17
  433 D1:DA84 19 11 -  -     .db VX_CALL1_POS, 17
  434 D1:DA86 23 12 -  -     .db VX_CALL0_POS, 18
  435 D1:DA88 19 12 -  -     .db VX_CALL1_POS, 18
  436 D1:DA8A 23 13 -  -     .db VX_CALL0_POS, 19
  437 D1:DA8C 19 13 -  -     .db VX_CALL1_POS, 19
  438 D1:DA8E 23 14 -  -     .db VX_CALL0_POS, 20
  439 D1:DA90 19 14 -  -     .db VX_CALL1_POS, 20
  440 D1:DA92 23 15 -  -     .db VX_CALL0_POS, 21
  441 D1:DA94 19 15 -  -     .db VX_CALL1_POS, 21
  442 D1:DA96 23 16 -  -     .db VX_CALL0_POS, 22
  443 D1:DA98 19 16 -  -     .db VX_CALL1_POS, 22
  444 D1:DA9A 23 17 -  -     .db VX_CALL0_POS, 23
  445 D1:DA9C 19 17 -  -     .db VX_CALL1_POS, 23
  446 D1:DA9E 23 18 -  -     .db VX_CALL0_POS, 24
  447 D1:DAA0 19 18 -  -     .db VX_CALL1_POS, 24
  448 D1:DAA2 23 19 -  -     .db VX_CALL0_POS, 25
  449 D1:DAA4 19 19 -  -     .db VX_CALL1_POS, 25
  450 D1:DAA6 23 1A -  -     .db VX_CALL0_POS, 26
  451 D1:DAA8 19 1A -  -     .db VX_CALL1_POS, 26
  452 D1:DAAA 23 1B -  -     .db VX_CALL0_POS, 27
  453 D1:DAAC 19 1B -  -     .db VX_CALL1_POS, 27
  454 D1:DAAE 23 1C -  -     .db VX_CALL0_POS, 28
  455 D1:DAB0 19 1C -  -     .db VX_CALL1_POS, 28
  456 D1:DAB2 23 1D -  -     .db VX_CALL0_POS, 29
  457 D1:DAB4 19 1D -  -     .db VX_CALL1_POS, 29
  458 D1:DAB6 23 1E -  -     .db VX_CALL0_POS, 30
  459 D1:DAB8 19 1E -  -     .db VX_CALL1_POS, 30
  460 D1:DABA 23 1F -  -     .db VX_CALL0_POS, 31
  461 D1:DABC 19 1F -  -     .db VX_CALL1_POS, 31
  462 D1:DABE 23 20 -  -     .db VX_CALL0_POS, 32
  463 D1:DAC0 19 20 -  -     .db VX_CALL1_POS, 32
  464 D1:DAC2 23 21 -  -     .db VX_CALL0_POS, 33
  465 D1:DAC4 19 21 -  -     .db VX_CALL1_POS, 33
  466 D1:DAC6 23 22 -  -     .db VX_CALL0_POS, 34
  467 D1:DAC8 19 22 -  -     .db VX_CALL1_POS, 34
  468 D1:DACA 23 23 -  -     .db VX_CALL0_POS, 35
  469 D1:DACC 19 23 -  -     .db VX_CALL1_POS, 35
  470 D1:DACE 23 24 -  -     .db VX_CALL0_POS, 36
  471 D1:DAD0 19 24 -  -     .db VX_CALL1_POS, 36
  472 D1:DAD2 23 25 -  -     .db VX_CALL0_POS, 37
  473 D1:DAD4 19 25 -  -     .db VX_CALL1_POS, 37
  474 D1:DAD6 23 26 -  -     .db VX_CALL0_POS, 38
  475 D1:DAD8 19 26 -  -     .db VX_CALL1_POS, 38
  476 D1:DADA 23 27 -  -     .db VX_CALL0_POS, 39
  477 D1:DADC 19 27 -  -     .db VX_CALL1_POS, 39
  478 D1:DADE 23 28 -  -     .db VX_CALL0_POS, 40
  479 D1:DAE0 19 28 -  -     .db VX_CALL1_POS, 40
  480 D1:DAE2 23 29 -  -     .db VX_CALL0_POS, 41
  481 D1:DAE4 19 29 -  -     .db VX_CALL1_POS, 41
  482 D1:DAE6 23 2A -  -     .db VX_CALL0_POS, 42
  483 D1:DAE8 19 2A -  -     .db VX_CALL1_POS, 42
  484 D1:DAEA 23 2B -  -     .db VX_CALL0_POS, 43
  485 D1:DAEC 19 2B -  -     .db VX_CALL1_POS, 43
  486 D1:DAEE 23 2C -  -     .db VX_CALL0_POS, 44
  487 D1:DAF0 19 2C -  -     .db VX_CALL1_POS, 44
  488 D1:DAF2 23 2D -  -     .db VX_CALL0_POS, 45
  489 D1:DAF4 19 2D -  -     .db VX_CALL1_POS, 45
  490 D1:DAF6 23 2E -  -     .db VX_CALL0_POS, 46
  491 D1:DAF8 19 2E -  -     .db VX_CALL1_POS, 46
  492 D1:DAFA 23 2F -  -     .db VX_CALL0_POS, 47
  493 D1:DAFC 19 2F -  -     .db VX_CALL1_POS, 47
  494 D1:DAFE 23 30 -  -     .db VX_CALL0_POS, 48
  495 D1:DB00 19 30 -  -     .db VX_CALL1_POS, 48
  496 D1:DB02 23 31 -  -     .db VX_CALL0_POS, 49
  497 D1:DB04 19 31 -  -     .db VX_CALL1_POS, 49
  498 D1:DB06 23 32 -  -     .db VX_CALL0_POS, 50
  499 D1:DB08 19 32 -  -     .db VX_CALL1_POS, 50
  500 D1:DB0A 23 33 -  -     .db VX_CALL0_POS, 51
  501 D1:DB0C 19 33 -  -     .db VX_CALL1_POS, 51
  502 D1:DB0E 23 34 -  -     .db VX_CALL0_POS, 52
  503 D1:DB10 19 34 -  -     .db VX_CALL1_POS, 52
  504 D1:DB12 23 35 -  -     .db VX_CALL0_POS, 53
  505 D1:DB14 19 35 -  -     .db VX_CALL1_POS, 53
  506 D1:DB16 23 36 -  -     .db VX_CALL0_POS, 54
  507 D1:DB18 19 36 -  -     .db VX_CALL1_POS, 54
  508 D1:DB1A 23 37 -  -     .db VX_CALL0_POS, 55
  509 D1:DB1C 19 37 -  -     .db VX_CALL1_POS, 55
  510 D1:DB1E 23 38 -  -     .db VX_CALL0_POS, 56
  511 D1:DB20 19 38 -  -     .db VX_CALL1_POS, 56
  512 D1:DB22 23 39 -  -     .db VX_CALL0_POS, 57
  513 D1:DB24 19 39 -  -     .db VX_CALL1_POS, 57
  514 D1:DB26 23 3A -  -     .db VX_CALL0_POS, 58
  515 D1:DB28 19 3A -  -     .db VX_CALL1_POS, 58
  516 D1:DB2A 23 3B -  -     .db VX_CALL0_POS, 59
  517 D1:DB2C 19 3B -  -     .db VX_CALL1_POS, 59
  518 D1:DB2E 23 3C -  -     .db VX_CALL0_POS, 60
  519 D1:DB30 19 3C -  -     .db VX_CALL1_POS, 60
  520 D1:DB32 23 3D -  -     .db VX_CALL0_POS, 61
  521 D1:DB34 19 3D -  -     .db VX_CALL1_POS, 61
  522 D1:DB36 23 3E -  -     .db VX_CALL0_POS, 62
  523 D1:DB38 19 3E -  -     .db VX_CALL1_POS, 62
  524 D1:DB3A 23 3F -  -     .db VX_CALL0_POS, 63
  525 D1:DB3C 19 3F -  -     .db VX_CALL1_POS, 63
  526 D1:DB3E 23 40 -  -     .db VX_CALL0_POS, 64
  527 D1:DB40 19 40 -  -     .db VX_CALL1_POS, 64
  528 D1:DB42 23 41 -  -     .db VX_CALL0_POS, 65
  529 D1:DB44 19 41 -  -     .db VX_CALL1_POS, 65
  530 D1:DB46 23 42 -  -     .db VX_CALL0_POS, 66
  531 D1:DB48 19 42 -  -     .db VX_CALL1_POS, 66
  532 D1:DB4A 23 43 -  -     .db VX_CALL0_POS, 67
  533 D1:DB4C 19 43 -  -     .db VX_CALL1_POS, 67
  534 D1:DB4E 23 44 -  -     .db VX_CALL0_POS, 68
  535 D1:DB50 19 44 -  -     .db VX_CALL1_POS, 68
  536 D1:DB52 23 45 -  -     .db VX_CALL0_POS, 69
  537 D1:DB54 19 45 -  -     .db VX_CALL1_POS, 69
  538 D1:DB56 23 46 -  -     .db VX_CALL0_POS, 70
  539 D1:DB58 19 46 -  -     .db VX_CALL1_POS, 70
  540 D1:DB5A 23 47 -  -     .db VX_CALL0_POS, 71
  541 D1:DB5C 19 47 -  -     .db VX_CALL1_POS, 71
  542 D1:DB5E 23 48 -  -     .db VX_CALL0_POS, 72
  543 D1:DB60 19 48 -  -     .db VX_CALL1_POS, 72
  544 D1:DB62 23 49 -  -     .db VX_CALL0_POS, 73
  545 D1:DB64 19 49 -  -     .db VX_CALL1_POS, 73
  546 D1:DB66 23 4A -  -     .db VX_CALL0_POS, 74
  547 D1:DB68 19 4A -  -     .db VX_CALL1_POS, 74
  548 D1:DB6A 23 4B -  -     .db VX_CALL0_POS, 75
  549 D1:DB6C 19 4B -  -     .db VX_CALL1_POS, 75
  550 D1:DB6E 23 4C -  -     .db VX_CALL0_POS, 76
  551 D1:DB70 19 4C -  -     .db VX_CALL1_POS, 76
  552 D1:DB72 23 4D -  -     .db VX_CALL0_POS, 77
  553 D1:DB74 19 4D -  -     .db VX_CALL1_POS, 77
  554 D1:DB76 23 4E -  -     .db VX_CALL0_POS, 78
  555 D1:DB78 19 4E -  -     .db VX_CALL1_POS, 78
  556 D1:DB7A 23 4F -  -     .db VX_CALL0_POS, 79
  557 D1:DB7C 19 4F -  -     .db VX_CALL1_POS, 79
  558 D1:DB7E 23 50 -  -     .db VX_CALL0_POS, 80
  559 D1:DB80 19 50 -  -     .db VX_CALL1_POS, 80
  560 D1:DB82 23 51 -  -     .db VX_CALL0_POS, 81
  561 D1:DB84 19 51 -  -     .db VX_CALL1_POS, 81
  562 D1:DB86 23 52 -  -     .db VX_CALL0_POS, 82
  563 D1:DB88 19 52 -  -     .db VX_CALL1_POS, 82
  564 D1:DB8A 23 53 -  -     .db VX_CALL0_POS, 83
  565 D1:DB8C 19 53 -  -     .db VX_CALL1_POS, 83
  566 D1:DB8E 23 54 -  -     .db VX_CALL0_POS, 84
  567 D1:DB90 19 54 -  -     .db VX_CALL1_POS, 84
  568 D1:DB92 23 55 -  -     .db VX_CALL0_POS, 85
  569 D1:DB94 19 55 -  -     .db VX_CALL1_POS, 85
  570 D1:DB96 23 56 -  -     .db VX_CALL0_POS, 86
  571 D1:DB98 19 56 -  -     .db VX_CALL1_POS, 86
  572 D1:DB9A 23 57 -  -     .db VX_CALL0_POS, 87
  573 D1:DB9C 19 57 -  -     .db VX_CALL1_POS, 87
  574 D1:DB9E 23 58 -  -     .db VX_CALL0_POS, 88
  575 D1:DBA0 19 58 -  -     .db VX_CALL1_POS, 88
  576 D1:DBA2 23 59 -  -     .db VX_CALL0_POS, 89
  577 D1:DBA4 19 59 -  -     .db VX_CALL1_POS, 89
  578 D1:DBA6 23 5A -  -     .db VX_CALL0_POS, 90
  579 D1:DBA8 19 5A -  -     .db VX_CALL1_POS, 90
  580 D1:DBAA 23 5B -  -     .db VX_CALL0_POS, 91
  581 D1:DBAC 19 5B -  -     .db VX_CALL1_POS, 91
  582 D1:DBAE 23 5C -  -     .db VX_CALL0_POS, 92
  583 D1:DBB0 19 5C -  -     .db VX_CALL1_POS, 92
  584 D1:DBB2 23 5D -  -     .db VX_CALL0_POS, 93
  585 D1:DBB4 19 5D -  -     .db VX_CALL1_POS, 93
  586 D1:DBB6 23 5E -  -     .db VX_CALL0_POS, 94
  587 D1:DBB8 19 5E -  -     .db VX_CALL1_POS, 94
  588 D1:DBBA 23 5F -  -     .db VX_CALL0_POS, 95
  589 D1:DBBC 19 5F -  -     .db VX_CALL1_POS, 95
  590 D1:DBBE 23 60 -  -     .db VX_CALL0_POS, 96
  591 D1:DBC0 19 60 -  -     .db VX_CALL1_POS, 96
  592 D1:DBC2 23 61 -  -     .db VX_CALL0_POS, 97
  593 D1:DBC4 19 61 -  -     .db VX_CALL1_POS, 97
  594 D1:DBC6 23 62 -  -     .db VX_CALL0_POS, 98
  595 D1:DBC8 19 62 -  -     .db VX_CALL1_POS, 98
  596 D1:DBCA 23 63 -  -     .db VX_CALL0_POS, 99
  597 D1:DBCC 19 63 -  -     .db VX_CALL1_POS, 99
  598 D1:DBCE 23 64 -  -     .db VX_CALL0_POS, 100
  599 D1:DBD0 19 64 -  -     .db VX_CALL1_POS, 100
  600 D1:DBD2 23 65 -  -     .db VX_CALL0_POS, 101
  601 D1:DBD4 19 65 -  -     .db VX_CALL1_POS, 101
  602 D1:DBD6 23 66 -  -     .db VX_CALL0_POS, 102
  603 D1:DBD8 19 66 -  -     .db VX_CALL1_POS, 102
  604 D1:DBDA 23 67 -  -     .db VX_CALL0_POS, 103
  605 D1:DBDC 19 67 -  -     .db VX_CALL1_POS, 103
  606 D1:DBDE 23 68 -  -     .db VX_CALL0_POS, 104
  607 D1:DBE0 19 68 -  -     .db VX_CALL1_POS, 104
  608 D1:DBE2 23 69 -  -     .db VX_CALL0_POS, 105
  609 D1:DBE4 19 69 -  -     .db VX_CALL1_POS, 105
  610 D1:DBE6 23 6A -  -     .db VX_CALL0_POS, 106
  611 D1:DBE8 19 6A -  -     .db VX_CALL1_POS, 106
  612 D1:DBEA 23 6B -  -     .db VX_CALL0_POS, 107
  613 D1:DBEC 19 6B -  -     .db VX_CALL1_POS, 107
  614 D1:DBEE 23 6C -  -     .db VX_CALL0_POS, 108
  615 D1:DBF0 19 6C -  -     .db VX_CALL1_POS, 108
  616 D1:DBF2 23 6D -  -     .db VX_CALL0_POS, 109
  617 D1:DBF4 19 6D -  -     .db VX_CALL1_POS, 109
  618 D1:DBF6 23 6E -  -     .db VX_CALL0_POS, 110
  619 D1:DBF8 19 6E -  -     .db VX_CALL1_POS, 110
  620 D1:DBFA 23 6F -  -     .db VX_CALL0_POS, 111
  621 D1:DBFC 19 6F -  -     .db VX_CALL1_POS, 111
  622 D1:DBFE 23 70 -  -     .db VX_CALL0_POS, 112
  623 D1:DC00 19 70 -  -     .db VX_CALL1_POS, 112
  624 D1:DC02 23 71 -  -     .db VX_CALL0_POS, 113
  625 D1:DC04 19 71 -  -     .db VX_CALL1_POS, 113
  626 D1:DC06 23 72 -  -     .db VX_CALL0_POS, 114
  627 D1:DC08 19 72 -  -     .db VX_CALL1_POS, 114
  628 D1:DC0A 23 73 -  -     .db VX_CALL0_POS, 115
  629 D1:DC0C 19 73 -  -     .db VX_CALL1_POS, 115
  630 D1:DC0E 23 74 -  -     .db VX_CALL0_POS, 116
  631 D1:DC10 19 74 -  -     .db VX_CALL1_POS, 116
  632 D1:DC12 23 75 -  -     .db VX_CALL0_POS, 117
  633 D1:DC14 19 75 -  -     .db VX_CALL1_POS, 117
  634 D1:DC16 23 76 -  -     .db VX_CALL0_POS, 118
  635 D1:DC18 19 76 -  -     .db VX_CALL1_POS, 118
  636 D1:DC1A 23 77 -  -     .db VX_CALL0_POS, 119
  637 D1:DC1C 19 77 -  -     .db VX_CALL1_POS, 119
  638 D1:DC1E 23 78 -  -     .db VX_CALL0_POS, 120
  639 D1:DC20 19 78 -  -     .db VX_CALL1_POS, 120
  640 D1:DC22 23 79 -  -     .db VX_CALL0_POS, 121
  641 D1:DC24 19 79 -  -     .db VX_CALL1_POS, 121
  642 D1:DC26 23 7A -  -     .db VX_CALL0_POS, 122
  643 D1:DC28 19 7A -  -     .db VX_CALL1_POS, 122
  644 D1:DC2A 23 7B -  -     .db VX_CALL0_POS, 123
  645 D1:DC2C 19 7B -  -     .db VX_CALL1_POS, 123
  646 D1:DC2E 23 7C -  -     .db VX_CALL0_POS, 124
  647 D1:DC30 19 7C -  -     .db VX_CALL1_POS, 124
  648 D1:DC32 23 7D -  -     .db VX_CALL0_POS, 125
  649 D1:DC34 19 7D -  -     .db VX_CALL1_POS, 125
  650 D1:DC36 23 7E -  -     .db VX_CALL0_POS, 126
  651 D1:DC38 19 7E -  -     .db VX_CALL1_POS, 126
  652 D1:DC3A 23 7F -  -     .db VX_CALL0_POS, 127
  653 D1:DC3C 19 7F -  -     .db VX_CALL1_POS, 127
  654 D1:DC3E 23 80 -  -     .db VX_CALL0_POS, 128
  655 D1:DC40 19 80 -  -     .db VX_CALL1_POS, 128
  656 D1:DC42 23 81 -  -     .db VX_CALL0_POS, 129
  657 D1:DC44 19 81 -  -     .db VX_CALL1_POS, 129
  658 D1:DC46 23 82 -  -     .db VX_CALL0_POS, 130
  659 D1:DC48 19 82 -  -     .db VX_CALL1_POS, 130
  660 D1:DC4A 23 83 -  -     .db VX_CALL0_POS, 131
  661 D1:DC4C 19 83 -  -     .db VX_CALL1_POS, 131
  662 D1:DC4E 23 84 -  -     .db VX_CALL0_POS, 132
  663 D1:DC50 19 84 -  -     .db VX_CALL1_POS, 132
  664 D1:DC52 23 85 -  -     .db VX_CALL0_POS, 133
  665 D1:DC54 19 85 -  -     .db VX_CALL1_POS, 133
  666 D1:DC56 23 86 -  -     .db VX_CALL0_POS, 134
  667 D1:DC58 19 86 -  -     .db VX_CALL1_POS, 134
  668 D1:DC5A 23 87 -  -     .db VX_CALL0_POS, 135
  669 D1:DC5C 19 87 -  -     .db VX_CALL1_POS, 135
  670 D1:DC5E 23 88 -  -     .db VX_CALL0_POS, 136
  671 D1:DC60 19 88 -  -     .db VX_CALL1_POS, 136
  672 D1:DC62 23 89 -  -     .db VX_CALL0_POS, 137
  673 D1:DC64 19 89 -  -     .db VX_CALL1_POS, 137
  674 D1:DC66 23 8A -  -     .db VX_CALL0_POS, 138
  675 D1:DC68 19 8A -  -     .db VX_CALL1_POS, 138
  676 D1:DC6A 23 8B -  -     .db VX_CALL0_POS, 139
  677 D1:DC6C 19 8B -  -     .db VX_CALL1_POS, 139
  678 D1:DC6E 23 8C -  -     .db VX_CALL0_POS, 140
  679 D1:DC70 19 8C -  -     .db VX_CALL1_POS, 140
  680 D1:DC72 23 8D -  -     .db VX_CALL0_POS, 141
  681 D1:DC74 19 8D -  -     .db VX_CALL1_POS, 141
  682 D1:DC76 23 8E -  -     .db VX_CALL0_POS, 142
  683 D1:DC78 19 8E -  -     .db VX_CALL1_POS, 142
  684 D1:DC7A 23 8F -  -     .db VX_CALL0_POS, 143
  685 D1:DC7C 19 8F -  -     .db VX_CALL1_POS, 143
  686 D1:DC7E 23 90 -  -     .db VX_CALL0_POS, 144
  687 D1:DC80 19 90 -  -     .db VX_CALL1_POS, 144
  688 D1:DC82 23 91 -  -     .db VX_CALL0_POS, 145
  689 D1:DC84 19 91 -  -     .db VX_CALL1_POS, 145
  690 D1:DC86 23 92 -  -     .db VX_CALL0_POS, 146
  691 D1:DC88 19 92 -  -     .db VX_CALL1_POS, 146
  692 D1:DC8A 23 93 -  -     .db VX_CALL0_POS, 147
  693 D1:DC8C 19 93 -  -     .db VX_CALL1_POS, 147
  694 D1:DC8E 23 94 -  -     .db VX_CALL0_POS, 148
  695 D1:DC90 19 94 -  -     .db VX_CALL1_POS, 148
  696 D1:DC92 23 95 -  -     .db VX_CALL0_POS, 149
  697 D1:DC94 19 95 -  -     .db VX_CALL1_POS, 149
  698 D1:DC96 23 96 -  -     .db VX_CALL0_POS, 150
  699 D1:DC98 19 96 -  -     .db VX_CALL1_POS, 150
  700 D1:DC9A 23 97 -  -     .db VX_CALL0_POS, 151
  701 D1:DC9C 19 97 -  -     .db VX_CALL1_POS, 151
  702 D1:DC9E 23 98 -  -     .db VX_CALL0_POS, 152
  703 D1:DCA0 19 98 -  -     .db VX_CALL1_POS, 152
  704 D1:DCA2 23 99 -  -     .db VX_CALL0_POS, 153
  705 D1:DCA4 19 99 -  -     .db VX_CALL1_POS, 153
  706 D1:DCA6 23 9A -  -     .db VX_CALL0_POS, 154
  707 D1:DCA8 19 9A -  -     .db VX_CALL1_POS, 154
  708 D1:DCAA 23 9B -  -     .db VX_CALL0_POS, 155
  709 D1:DCAC 19 9B -  -     .db VX_CALL1_POS, 155
  710 D1:DCAE 23 9C -  -     .db VX_CALL0_POS, 156
  711 D1:DCB0 19 9C -  -     .db VX_CALL1_POS, 156
  712 D1:DCB2 23 9D -  -     .db VX_CALL0_POS, 157
  713 D1:DCB4 19 9D -  -     .db VX_CALL1_POS, 157
  714 D1:DCB6 23 9E -  -     .db VX_CALL0_POS, 158
  715 D1:DCB8 19 9E -  -     .db VX_CALL1_POS, 158
  716 D1:DCBA 23 9F -  -     .db VX_CALL0_POS, 159
  717 D1:DCBC 19 9F -  -     .db VX_CALL1_POS, 159
  718 D1:DCBE 23 A0 -  -     .db VX_CALL0_POS, 160
  719 D1:DCC0 19 A0 -  -     .db VX_CALL1_POS, 160
  720 D1:DCC2 -  -  -  -  vxPixelShaderExitLUT:
  721 D1:DCC2 4C 00 -  -     .db VX_CALL_EXIT, 0
  722 D1:DCC4 -  -  -  -  #comment
  723 D1:DCC4             
  724 D1:DCC4             lut table :
  725 D1:DCC4             ; aligned to 2 boundary
  726 D1:DCC4             ; call is within vxPixelShader and vxPixelShader+VX_PIXEL_SHADER_SUBSIZE
  727 D1:DCC4             ; for length = 0 jump to vxPixelShader+VX_PIXEL_SHADER_SUBSIZE*2+2
  728 D1:DCC4             ; for length < 0 jump to vxPixelShader+VX_PIXEL_SHADER_SUBSIZE-1 and VX_PIXEL_SHADER_SUBSIZE*2+vxPixelShader-1
  729 D1:DCC4             
  730 D1:DCC4             
  731 D1:DCC4             
  732 D1:DCC4             define	ld (de+)	ld (de),a \ inc de
  733 D1:DCC4             #define	or (de+)	ex de,hl \ or (hl) \ ex de,hl \ inc de
  734 D1:DCC4             #define	and (de+)	ex de,hl \ and (hl) \ ex de,hl \ inc de
  735 D1:DCC4             #define	xor (de+)	ex de,hl \ xor (hl) \ ex de,hl \ inc de
  736 D1:DCC4             
  737 D1:DCC4             ; lightning : 11 bytes, 32 cycles/pixel
  738 D1:DCC4                 ld  a, h    ; get v to pass to next part
  739 D1:DCC4                 add hl, sp  ; v=v+dv (du on high)
  740 D1:DCC4                 exx		; swap
  741 D1:DCC4                 ld  h, a    ; paste v on high byte
  742 D1:DCC4                 ld  c, (hl) ; fetch texture, and get index to color table in same time
  743 D1:DCC4                 adc hl, de  ; u=u+du (on low)
  744 D1:DCC4                 ld  a, (bc) ; fetch lighted color
  745 D1:DCC4                 exx		; swap
  746 D1:DCC4                 ldpx		; write pixel and next
  747 D1:DCC4             
  748 D1:DCC4             
  749 D1:DCC4             vxRegister0Interpolation:
  750 D1:DCC4             ; bc = y-size, ix = adress
  751 D1:DCC4             ; de= error , iy = position
  752 D1:DCC4             ; sp= 320, sps = stack
  753 D1:DCC4             	ld	a, c
  754 D1:DCC4             ; compute error
  755 D1:DCC4             	scf
  756 D1:DCC4             	sbc	hl, hl
  757 D1:DCC4             	ld	l, a
  758 D1:DCC4             	sbc	hl, de
  759 D1:DCC4             	sra	h
  760 D1:DCC4             	rr	l
  761 D1:DCC4             	neg
  762 D1:DCC4             vxRegister0Loop:
  763 D1:DCC4             	add	hl, de
  764 D1:DCC4             	jr	nc, vxRegister0Next
  765 D1:DCC4             vxRegister0Restore:
  766 D1:DCC4             	.db	$DD
  767 D1:DCC4             vxRegister0Increment=$
  768 D1:DCC4             	nop
  769 D1:DCC4             	add	hl, bc
  770 D1:DCC4             	jr	c, vxRegister0Restore
  771 D1:DCC4             vxRegister0Next:
  772 D1:DCC4             	ld	(iy+VX_REGISTER0), ix		; this is framebuffer adress
  773 D1:DCC4             	add	ix, sp
  774 D1:DCC4             	lea	iy, iy+12
  775 D1:DCC4             	dec	a
  776 D1:DCC4             	jr	nz, vxRegister0Loop
  777 D1:DCC4             ; magic end bytes
  778 D1:DCC4             	ld	bc, vxPixelShaderExitLUT/2+1
  779 D1:DCC4             	ld	(iy+VX_REGISTER1), bc
  780 D1:DCC4             	ld	bc, -1
  781 D1:DCC4             	ld	(iy+VX_REGISTER0), bc
  782 D1:DCC4             
  783 D1:DCC4             ;; lutadress = (-fb_reg1+LUTbase/2+fb_reg0)*2 = (fb_reg0-fb_reg1)*2+LUTbase
  784 D1:DCC4             
  785 D1:DCC4             ; do calculation for longest-smallest
  786 D1:DCC4             ; if length > 0, longest is at right, so draw right to left
  787 D1:DCC4             
  788 D1:DCC4             
  789 D1:DCC4             #endcomment
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxShaderInterpolation.ez80"
  596 D1:DCC4 -  -  -  -  
  597 D1:DCC4 -  -  -  -  
  598 D1:DCC4 -  -  -  -  vxTexturePolygon:
  599 D1:DCC4 D6 02 -  -  	sub	a, 2
  600 D1:DCC6 47 -  -  -  	ld	b, a
  601 D1:DCC7 FD 27 00 -  	ld	hl, (iy+0)
  602 D1:DCCA -  -  -  -  vxTextureCyclicLoop:
  603 D1:DCCA C5 -  -  -  	push	bc
  604 D1:DCCB FD 17 03 -  	ld	de, (iy+3)
  605 D1:DCCE FD 07 06 -  	ld	bc, (iy+6)
  606 D1:DCD1 E5 -  -  -  	push	hl
  607 D1:DCD2 FD E5 -  -  	push	iy
  608 D1:DCD4 E5 -  -  -  	push	hl
  609 D1:DCD5 C5 -  -  -  	push	bc
  610 D1:DCD6 D5 -  -  -  	push	de
  611 D1:DCD7 CD 37 BD D1 	call	vxNClip
  612 D1:DCDB D1 -  -  -  	pop	de
  613 D1:DCDC C1 -  -  -  	pop	bc
  614 D1:DCDD E1 -  -  -  	pop	hl
  615 D1:DCDE D4 0D 08 E3 	call	nc,vxTextureTriangleNoClip
  616 D1:DCE2 FD E1 -  -  	pop	iy
  617 D1:DCE4 ED 33 03 -  	lea	iy, iy+3
  618 D1:DCE7 E1 -  -  -  	pop	hl
  619 D1:DCE8 C1 -  -  -  	pop	bc
  620 D1:DCE9 05 -  -  -  	dec	b
  621 D1:DCEA C2 CA DC D1 	jp	nz, vxTextureCyclicLoop
  622 D1:DCEE C9 -  -  -  	ret
  623 D1:DCEF -  -  -  -  
  624 D1:DCEF -  -  -  -  VX_INVERSE_TABLE:
  625 D1:DCEF FE FF -  -  .dw 65534	; position 0, so nothing in fact (div by 0)
  626 D1:DCF1 FE FF -  -  .dw 65534	; corrected
  627 D1:DCF3 FF 7F -  -  .dw 32767
  628 D1:DCF5 54 55 -  -  .dw 21844
  629 D1:DCF7 FF 3F -  -  .dw 16383
  630 D1:DCF9 32 33 -  -  .dw 13106
  631 D1:DCFB A9 2A -  -  .dw 10921
  632 D1:DCFD 91 24 -  -  .dw 9361
  633 D1:DCFF FF 1F -  -  .dw 8191
  634 D1:DD01 70 1C -  -  .dw 7280
  635 D1:DD03 98 19 -  -  .dw 6552
  636 D1:DD05 44 17 -  -  .dw 5956
  637 D1:DD07 54 15 -  -  .dw 5460
  638 D1:DD09 B0 13 -  -  .dw 5040
  639 D1:DD0B 48 12 -  -  .dw 4680
  640 D1:DD0D 10 11 -  -  .dw 4368
  641 D1:DD0F FF 0F -  -  .dw 4095
  642 D1:DD11 0E 0F -  -  .dw 3854
  643 D1:DD13 37 0E -  -  .dw 3639
  644 D1:DD15 78 0D -  -  .dw 3448
  645 D1:DD17 CB 0C -  -  .dw 3275
  646 D1:DD19 2F 0C -  -  .dw 3119
  647 D1:DD1B A1 0B -  -  .dw 2977
  648 D1:DD1D 20 0B -  -  .dw 2848
  649 D1:DD1F A9 0A -  -  .dw 2729
  650 D1:DD21 3C 0A -  -  .dw 2620
  651 D1:DD23 D7 09 -  -  .dw 2519
  652 D1:DD25 7A 09 -  -  .dw 2426
  653 D1:DD27 23 09 -  -  .dw 2339
  654 D1:DD29 D2 08 -  -  .dw 2258
  655 D1:DD2B 87 08 -  -  .dw 2183
  656 D1:DD2D 41 08 -  -  .dw 2113
  657 D1:DD2F FF 07 -  -  .dw 2047
  658 D1:DD31 C0 07 -  -  .dw 1984
  659 D1:DD33 86 07 -  -  .dw 1926
  660 D1:DD35 4F 07 -  -  .dw 1871
  661 D1:DD37 1B 07 -  -  .dw 1819
  662 D1:DD39 EA 06 -  -  .dw 1770
  663 D1:DD3B BB 06 -  -  .dw 1723
  664 D1:DD3D 8F 06 -  -  .dw 1679
  665 D1:DD3F 65 06 -  -  .dw 1637
  666 D1:DD41 3D 06 -  -  .dw 1597
  667 D1:DD43 17 06 -  -  .dw 1559
  668 D1:DD45 F3 05 -  -  .dw 1523
  669 D1:DD47 D0 05 -  -  .dw 1488
  670 D1:DD49 AF 05 -  -  .dw 1455
  671 D1:DD4B 8F 05 -  -  .dw 1423
  672 D1:DD4D 71 05 -  -  .dw 1393
  673 D1:DD4F 54 05 -  -  .dw 1364
  674 D1:DD51 38 05 -  -  .dw 1336
  675 D1:DD53 1D 05 -  -  .dw 1309
  676 D1:DD55 04 05 -  -  .dw 1284
  677 D1:DD57 EB 04 -  -  .dw 1259
  678 D1:DD59 D3 04 -  -  .dw 1235
  679 D1:DD5B BC 04 -  -  .dw 1212
  680 D1:DD5D A6 04 -  -  .dw 1190
  681 D1:DD5F 91 04 -  -  .dw 1169
  682 D1:DD61 7C 04 -  -  .dw 1148
  683 D1:DD63 68 04 -  -  .dw 1128
  684 D1:DD65 55 04 -  -  .dw 1109
  685 D1:DD67 43 04 -  -  .dw 1091
  686 D1:DD69 31 04 -  -  .dw 1073
  687 D1:DD6B 20 04 -  -  .dw 1056
  688 D1:DD6D 0F 04 -  -  .dw 1039
  689 D1:DD6F FF 03 -  -  .dw 1023
  690 D1:DD71 EF 03 -  -  .dw 1007
  691 D1:DD73 DF 03 -  -  .dw 991
  692 D1:DD75 D1 03 -  -  .dw 977
  693 D1:DD77 C2 03 -  -  .dw 962
  694 D1:DD79 B4 03 -  -  .dw 948
  695 D1:DD7B A7 03 -  -  .dw 935
  696 D1:DD7D 9A 03 -  -  .dw 922
  697 D1:DD7F 8D 03 -  -  .dw 909
  698 D1:DD81 80 03 -  -  .dw 896
  699 D1:DD83 74 03 -  -  .dw 884
  700 D1:DD85 68 03 -  -  .dw 872
  701 D1:DD87 5D 03 -  -  .dw 861
  702 D1:DD89 52 03 -  -  .dw 850
  703 D1:DD8B 47 03 -  -  .dw 839
  704 D1:DD8D 3C 03 -  -  .dw 828
  705 D1:DD8F 32 03 -  -  .dw 818
  706 D1:DD91 28 03 -  -  .dw 808
  707 D1:DD93 1E 03 -  -  .dw 798
  708 D1:DD95 14 03 -  -  .dw 788
  709 D1:DD97 0B 03 -  -  .dw 779
  710 D1:DD99 02 03 -  -  .dw 770
  711 D1:DD9B F9 02 -  -  .dw 761
  712 D1:DD9D F0 02 -  -  .dw 752
  713 D1:DD9F E7 02 -  -  .dw 743
  714 D1:DDA1 DF 02 -  -  .dw 735
  715 D1:DDA3 D7 02 -  -  .dw 727
  716 D1:DDA5 CF 02 -  -  .dw 719
  717 D1:DDA7 C7 02 -  -  .dw 711
  718 D1:DDA9 BF 02 -  -  .dw 703
  719 D1:DDAB B8 02 -  -  .dw 696
  720 D1:DDAD B0 02 -  -  .dw 688
  721 D1:DDAF A9 02 -  -  .dw 681
  722 D1:DDB1 A2 02 -  -  .dw 674
  723 D1:DDB3 9B 02 -  -  .dw 667
  724 D1:DDB5 94 02 -  -  .dw 660
  725 D1:DDB7 8E 02 -  -  .dw 654
  726 D1:DDB9 87 02 -  -  .dw 647
  727 D1:DDBB 81 02 -  -  .dw 641
  728 D1:DDBD 7B 02 -  -  .dw 635
  729 D1:DDBF 75 02 -  -  .dw 629
  730 D1:DDC1 6F 02 -  -  .dw 623
  731 D1:DDC3 69 02 -  -  .dw 617
  732 D1:DDC5 63 02 -  -  .dw 611
  733 D1:DDC7 5D 02 -  -  .dw 605
  734 D1:DDC9 58 02 -  -  .dw 600
  735 D1:DDCB 52 02 -  -  .dw 594
  736 D1:DDCD 4D 02 -  -  .dw 589
  737 D1:DDCF 48 02 -  -  .dw 584
  738 D1:DDD1 42 02 -  -  .dw 578
  739 D1:DDD3 3D 02 -  -  .dw 573
  740 D1:DDD5 38 02 -  -  .dw 568
  741 D1:DDD7 33 02 -  -  .dw 563
  742 D1:DDD9 2F 02 -  -  .dw 559
  743 D1:DDDB 2A 02 -  -  .dw 554
  744 D1:DDDD 25 02 -  -  .dw 549
  745 D1:DDDF 21 02 -  -  .dw 545
  746 D1:DDE1 1C 02 -  -  .dw 540
  747 D1:DDE3 18 02 -  -  .dw 536
  748 D1:DDE5 13 02 -  -  .dw 531
  749 D1:DDE7 0F 02 -  -  .dw 527
  750 D1:DDE9 0B 02 -  -  .dw 523
  751 D1:DDEB 07 02 -  -  .dw 519
  752 D1:DDED 03 02 -  -  .dw 515
  753 D1:DDEF FF 01 -  -  .dw 511
  754 D1:DDF1 FB 01 -  -  .dw 507
  755 D1:DDF3 F7 01 -  -  .dw 503
  756 D1:DDF5 F3 01 -  -  .dw 499
  757 D1:DDF7 EF 01 -  -  .dw 495
  758 D1:DDF9 EB 01 -  -  .dw 491
  759 D1:DDFB E8 01 -  -  .dw 488
  760 D1:DDFD E4 01 -  -  .dw 484
  761 D1:DDFF E0 01 -  -  .dw 480
  762 D1:DE01 DD 01 -  -  .dw 477
  763 D1:DE03 D9 01 -  -  .dw 473
  764 D1:DE05 D6 01 -  -  .dw 470
  765 D1:DE07 D3 01 -  -  .dw 467
  766 D1:DE09 CF 01 -  -  .dw 463
  767 D1:DE0B CC 01 -  -  .dw 460
  768 D1:DE0D C9 01 -  -  .dw 457
  769 D1:DE0F C6 01 -  -  .dw 454
  770 D1:DE11 C2 01 -  -  .dw 450
  771 D1:DE13 BF 01 -  -  .dw 447
  772 D1:DE15 BC 01 -  -  .dw 444
  773 D1:DE17 B9 01 -  -  .dw 441
  774 D1:DE19 B6 01 -  -  .dw 438
  775 D1:DE1B B3 01 -  -  .dw 435
  776 D1:DE1D B1 01 -  -  .dw 433
  777 D1:DE1F AE 01 -  -  .dw 430
  778 D1:DE21 AB 01 -  -  .dw 427
  779 D1:DE23 A8 01 -  -  .dw 424
  780 D1:DE25 A5 01 -  -  .dw 421
  781 D1:DE27 A3 01 -  -  .dw 419
  782 D1:DE29 A0 01 -  -  .dw 416
  783 D1:DE2B 9D 01 -  -  .dw 413
  784 D1:DE2D 9B 01 -  -  .dw 411
  785 D1:DE2F 98 01 -  -  .dw 408
  786 D1:DE31 96 01 -  -  .dw 406
  787 D1:DE33 93 01 -  -  .dw 403
  788 D1:DE35 91 01 -  -  .dw 401
  789 D1:DE37 8E 01 -  -  .dw 398
  790 D1:DE39 8C 01 -  -  .dw 396
  791 D1:DE3B 89 01 -  -  .dw 393
  792 D1:DE3D 87 01 -  -  .dw 391
  793 D1:DE3F 85 01 -  -  .dw 389
  794 D1:DE41 82 01 -  -  .dw 386
  795 D1:DE43 80 01 -  -  .dw 384
  796 D1:DE45 7E 01 -  -  .dw 382
  797 D1:DE47 7C 01 -  -  .dw 380
  798 D1:DE49 79 01 -  -  .dw 377
  799 D1:DE4B 77 01 -  -  .dw 375
  800 D1:DE4D 75 01 -  -  .dw 373
  801 D1:DE4F 73 01 -  -  .dw 371
  802 D1:DE51 71 01 -  -  .dw 369
  803 D1:DE53 6F 01 -  -  .dw 367
  804 D1:DE55 6D 01 -  -  .dw 365
  805 D1:DE57 6B 01 -  -  .dw 363
  806 D1:DE59 69 01 -  -  .dw 361
  807 D1:DE5B 67 01 -  -  .dw 359
  808 D1:DE5D 65 01 -  -  .dw 357
  809 D1:DE5F 63 01 -  -  .dw 355
  810 D1:DE61 61 01 -  -  .dw 353
  811 D1:DE63 5F 01 -  -  .dw 351
  812 D1:DE65 5D 01 -  -  .dw 349
  813 D1:DE67 5B 01 -  -  .dw 347
  814 D1:DE69 59 01 -  -  .dw 345
  815 D1:DE6B 57 01 -  -  .dw 343
  816 D1:DE6D 56 01 -  -  .dw 342
  817 D1:DE6F 54 01 -  -  .dw 340
  818 D1:DE71 52 01 -  -  .dw 338
  819 D1:DE73 50 01 -  -  .dw 336
  820 D1:DE75 4F 01 -  -  .dw 335
  821 D1:DE77 4D 01 -  -  .dw 333
  822 D1:DE79 4B 01 -  -  .dw 331
  823 D1:DE7B 49 01 -  -  .dw 329
  824 D1:DE7D 48 01 -  -  .dw 328
  825 D1:DE7F 46 01 -  -  .dw 326
  826 D1:DE81 45 01 -  -  .dw 325
  827 D1:DE83 43 01 -  -  .dw 323
  828 D1:DE85 41 01 -  -  .dw 321
  829 D1:DE87 40 01 -  -  .dw 320
  830 D1:DE89 3E 01 -  -  .dw 318
  831 D1:DE8B 3D 01 -  -  .dw 317
  832 D1:DE8D 3B 01 -  -  .dw 315
  833 D1:DE8F 3A 01 -  -  .dw 314
  834 D1:DE91 38 01 -  -  .dw 312
  835 D1:DE93 37 01 -  -  .dw 311
  836 D1:DE95 35 01 -  -  .dw 309
  837 D1:DE97 34 01 -  -  .dw 308
  838 D1:DE99 32 01 -  -  .dw 306
  839 D1:DE9B 31 01 -  -  .dw 305
  840 D1:DE9D 2F 01 -  -  .dw 303
  841 D1:DE9F 2E 01 -  -  .dw 302
  842 D1:DEA1 2D 01 -  -  .dw 301
  843 D1:DEA3 2B 01 -  -  .dw 299
  844 D1:DEA5 2A 01 -  -  .dw 298
  845 D1:DEA7 28 01 -  -  .dw 296
  846 D1:DEA9 27 01 -  -  .dw 295
  847 D1:DEAB 26 01 -  -  .dw 294
  848 D1:DEAD 24 01 -  -  .dw 292
  849 D1:DEAF 23 01 -  -  .dw 291
  850 D1:DEB1 22 01 -  -  .dw 290
  851 D1:DEB3 20 01 -  -  .dw 288
  852 D1:DEB5 1F 01 -  -  .dw 287
  853 D1:DEB7 1E 01 -  -  .dw 286
  854 D1:DEB9 1D 01 -  -  .dw 285
  855 D1:DEBB 1B 01 -  -  .dw 283
  856 D1:DEBD 1A 01 -  -  .dw 282
  857 D1:DEBF 19 01 -  -  .dw 281
  858 D1:DEC1 18 01 -  -  .dw 280
  859 D1:DEC3 17 01 -  -  .dw 279
  860 D1:DEC5 15 01 -  -  .dw 277
  861 D1:DEC7 14 01 -  -  .dw 276
  862 D1:DEC9 13 01 -  -  .dw 275
  863 D1:DECB 12 01 -  -  .dw 274
  864 D1:DECD 11 01 -  -  .dw 273
  865 D1:DECF 10 01 -  -  .dw 272
  866 D1:DED1 0E 01 -  -  .dw 270
  867 D1:DED3 0D 01 -  -  .dw 269
  868 D1:DED5 0C 01 -  -  .dw 268
  869 D1:DED7 0B 01 -  -  .dw 267
  870 D1:DED9 0A 01 -  -  .dw 266
  871 D1:DEDB 09 01 -  -  .dw 265
  872 D1:DEDD 08 01 -  -  .dw 264
  873 D1:DEDF 07 01 -  -  .dw 263
  874 D1:DEE1 06 01 -  -  .dw 262
  875 D1:DEE3 05 01 -  -  .dw 261
  876 D1:DEE5 04 01 -  -  .dw 260
  877 D1:DEE7 03 01 -  -  .dw 259
  878 D1:DEE9 02 01 -  -  .dw 258
  879 D1:DEEB 01 01 -  -  .dw 257
  880 D1:DEED 00 01 -  -  .dw 256
  881 D1:DEEF FF 00 -  -  .dw 255
  882 D1:DEF1 FE 00 -  -  .dw 254
  883 D1:DEF3 FD 00 -  -  .dw 253
  884 D1:DEF5 FC 00 -  -  .dw 252
  885 D1:DEF7 FB 00 -  -  .dw 251
  886 D1:DEF9 FA 00 -  -  .dw 250
  887 D1:DEFB F9 00 -  -  .dw 249
  888 D1:DEFD F8 00 -  -  .dw 248
  889 D1:DEFF F7 00 -  -  .dw 247
  890 D1:DF01 F6 00 -  -  .dw 246
  891 D1:DF03 F5 00 -  -  .dw 245
  892 D1:DF05 F4 00 -  -  .dw 244
  893 D1:DF07 F3 00 -  -  .dw 243
  894 D1:DF09 F2 00 -  -  .dw 242
  895 D1:DF0B F1 00 -  -  .dw 241
  896 D1:DF0D F0 00 -  -  .dw 240
  897 D1:DF0F EF 00 -  -  .dw 239
  898 D1:DF11 EF 00 -  -  .dw 239
  899 D1:DF13 EE 00 -  -  .dw 238
  900 D1:DF15 ED 00 -  -  .dw 237
  901 D1:DF17 EC 00 -  -  .dw 236
  902 D1:DF19 EB 00 -  -  .dw 235
  903 D1:DF1B EA 00 -  -  .dw 234
  904 D1:DF1D E9 00 -  -  .dw 233
  905 D1:DF1F E9 00 -  -  .dw 233
  906 D1:DF21 E8 00 -  -  .dw 232
  907 D1:DF23 E7 00 -  -  .dw 231
  908 D1:DF25 E6 00 -  -  .dw 230
  909 D1:DF27 E5 00 -  -  .dw 229
  910 D1:DF29 E4 00 -  -  .dw 228
  911 D1:DF2B E4 00 -  -  .dw 228
  912 D1:DF2D E3 00 -  -  .dw 227
  913 D1:DF2F E2 00 -  -  .dw 226
  914 D1:DF31 E1 00 -  -  .dw 225
  915 D1:DF33 E0 00 -  -  .dw 224
  916 D1:DF35 E0 00 -  -  .dw 224
  917 D1:DF37 DF 00 -  -  .dw 223
  918 D1:DF39 DE 00 -  -  .dw 222
  919 D1:DF3B DD 00 -  -  .dw 221
  920 D1:DF3D DD 00 -  -  .dw 221
  921 D1:DF3F DC 00 -  -  .dw 220
  922 D1:DF41 DB 00 -  -  .dw 219
  923 D1:DF43 DA 00 -  -  .dw 218
  924 D1:DF45 DA 00 -  -  .dw 218
  925 D1:DF47 D9 00 -  -  .dw 217
  926 D1:DF49 D8 00 -  -  .dw 216
  927 D1:DF4B D8 00 -  -  .dw 216
  928 D1:DF4D D7 00 -  -  .dw 215
  929 D1:DF4F D6 00 -  -  .dw 214
  930 D1:DF51 D5 00 -  -  .dw 213
  931 D1:DF53 D5 00 -  -  .dw 213
  932 D1:DF55 D4 00 -  -  .dw 212
  933 D1:DF57 D3 00 -  -  .dw 211
  934 D1:DF59 D3 00 -  -  .dw 211
  935 D1:DF5B D2 00 -  -  .dw 210
  936 D1:DF5D D1 00 -  -  .dw 209
  937 D1:DF5F D1 00 -  -  .dw 209
  938 D1:DF61 D0 00 -  -  .dw 208
  939 D1:DF63 CF 00 -  -  .dw 207
  940 D1:DF65 CF 00 -  -  .dw 207
  941 D1:DF67 CE 00 -  -  .dw 206
  942 D1:DF69 CD 00 -  -  .dw 205
  943 D1:DF6B CD 00 -  -  .dw 205
  944 D1:DF6D CC 00 -  -  .dw 204
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
   13 D1:DF6F -  -  -  -  #include	"vxData.inc"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxData.inc"
    1 D1:DF6F -  -  -  -  ; lightmap
    2 D1:DF6F -  -  -  -  #define	db	.db
    3 D1:DF6F -  -  -  -  VX_COLOR_LUT_DATA:
    4 D1:DF6F 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              00 00 00 00 
              00 00 00 01 
              20 20 20 20 
              20 20 20 21 
              20 20 20 20 
              20 20 20 21 
              20 20 20 20 
              20 20 20 21 
              20 20 20 20 
              20 20 20 21 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              00 00 00 00 
              00 01 01 01 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              20 20 20 20 
              20 21 21 21 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              00 00 00 00 
              01 01 01 01 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              20 20 20 20 
              21 21 21 21 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              08 08 08 09 
              09 09 0A 0A 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              08 08 08 09 
              09 09 0A 0A 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              00 00 00 01 
              01 01 02 02 
              08 08 08 09 
              09 09 0A 0A 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              28 28 28 29 
              29 29 2A 2A 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              28 28 28 29 
              29 29 2A 2A 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              20 20 20 21 
              21 21 22 22 
              28 28 28 29 
              29 29 2A 2A 
              40 40 40 41 
              41 41 42 42 
              40 40 40 41 
              41 41 42 42 
              40 40 40 41 
              41 41 42 42 
              48 48 48 49 
              49 49 4A 4A 
              40 40 40 41 
              41 41 42 42 
              40 40 40 41 
              41 41 42 42 
              40 40 40 41 
              41 41 42 42 
              48 48 48 49 
              49 49 4A 4A 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              08 08 08 09 
              09 0A 0A 0A 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              08 08 08 09 
              09 0A 0A 0A 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              00 00 00 01 
              01 02 02 02 
              08 08 08 09 
              09 0A 0A 0A 
              20 20 20 21 
              21 22 22 22 
              20 20 20 21 
              21 22 22 22 
              20 20 20 21 
              21 22 22 22 
              28 28 28 29 
              29 2A 2A 2A 
              20 20 20 21 
              21 22 22 22 
              20 20 20 21 
              21 22 22 22 
              20 20 20 21 
              21 22 22 22 
              28 28 28 29 
              29 2A 2A 2A 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              48 48 48 49 
              49 4A 4A 4A 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              48 48 48 49 
              49 4A 4A 4A 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              40 40 40 41 
              41 42 42 42 
              48 48 48 49 
              49 4A 4A 4A 
              00 00 01 01 
              01 02 02 03 
              00 00 01 01 
              01 02 02 03 
              08 08 09 09 
              09 0A 0A 0B 
              08 08 09 09 
              09 0A 0A 0B 
              00 00 01 01 
              01 02 02 03 
              00 00 01 01 
              01 02 02 03 
              08 08 09 09 
              09 0A 0A 0B 
              08 08 09 09 
              09 0A 0A 0B 
              20 20 21 21 
              21 22 22 23 
              20 20 21 21 
              21 22 22 23 
              28 28 29 29 
              29 2A 2A 2B 
              28 28 29 29 
              29 2A 2A 2B 
              20 20 21 21 
              21 22 22 23 
              20 20 21 21 
              21 22 22 23 
              28 28 29 29 
              29 2A 2A 2B 
              28 28 29 29 
              29 2A 2A 2B 
              20 20 21 21 
              21 22 22 23 
              20 20 21 21 
              21 22 22 23 
              28 28 29 29 
              29 2A 2A 2B 
              28 28 29 29 
              29 2A 2A 2B 
              40 40 41 41 
              41 42 42 43 
              40 40 41 41 
              41 42 42 43 
              48 48 49 49 
              49 4A 4A 4B 
              48 48 49 49 
              49 4A 4A 4B 
              40 40 41 41 
              41 42 42 43 
              40 40 41 41 
              41 42 42 43 
              48 48 49 49 
              49 4A 4A 4B 
              48 48 49 49 
              49 4A 4A 4B 
              60 60 61 61 
              61 62 62 63 
              60 60 61 61 
              61 62 62 63 
              68 68 69 69 
              69 6A 6A 6B 
              68 68 69 69 
              69 6A 6A 6B 
              00 00 01 01 
              02 02 03 03 
              00 00 01 01 
              02 02 03 03 
              08 08 09 09 
              0A 0A 0B 0B 
              08 08 09 09 
              0A 0A 0B 0B 
              00 00 01 01 
              02 02 03 03 
              00 00 01 01 
              02 02 03 03 
              08 08 09 09 
              0A 0A 0B 0B 
              08 08 09 09 
              0A 0A 0B 0B 
              20 20 21 21 
              22 22 23 23 
              20 20 21 21 
              22 22 23 23 
              28 28 29 29 
              2A 2A 2B 2B 
              28 28 29 29 
              2A 2A 2B 2B 
              20 20 21 21 
              22 22 23 23 
              20 20 21 21 
              22 22 23 23 
              28 28 29 29 
              2A 2A 2B 2B 
              28 28 29 29 
              2A 2A 2B 2B 
              40 40 41 41 
              42 42 43 43 
              40 40 41 41 
              42 42 43 43 
              48 48 49 49 
              4A 4A 4B 4B 
              48 48 49 49 
              4A 4A 4B 4B 
              40 40 41 41 
              42 42 43 43 
              40 40 41 41 
              42 42 43 43 
              48 48 49 49 
              4A 4A 4B 4B 
              48 48 49 49 
              4A 4A 4B 4B 
              60 60 61 61 
              62 62 63 63 
              60 60 61 61 
              62 62 63 63 
              68 68 69 69 
              6A 6A 6B 6B 
              68 68 69 69 
              6A 6A 6B 6B 
              60 60 61 61 
              62 62 63 63 
              60 60 61 61 
              62 62 63 63 
              68 68 69 69 
              6A 6A 6B 6B 
              68 68 69 69 
              6A 6A 6B 6B 
              00 00 01 01 
              02 02 03 04 
              00 00 01 01 
              02 02 03 04 
              08 08 09 09 
              0A 0A 0B 0C 
              08 08 09 09 
              0A 0A 0B 0C 
              00 00 01 01 
              02 02 03 04 
              00 00 01 01 
              02 02 03 04 
              08 08 09 09 
              0A 0A 0B 0C 
              08 08 09 09 
              0A 0A 0B 0C 
              20 20 21 21 
              22 22 23 24 
              20 20 21 21 
              22 22 23 24 
              28 28 29 29 
              2A 2A 2B 2C 
              28 28 29 29 
              2A 2A 2B 2C 
              20 20 21 21 
              22 22 23 24 
              20 20 21 21 
              22 22 23 24 
              28 28 29 29 
              2A 2A 2B 2C 
              28 28 29 29 
              2A 2A 2B 2C 
              40 40 41 41 
              42 42 43 44 
              40 40 41 41 
              42 42 43 44 
              48 48 49 49 
              4A 4A 4B 4C 
              48 48 49 49 
              4A 4A 4B 4C 
              40 40 41 41 
              42 42 43 44 
              40 40 41 41 
              42 42 43 44 
              48 48 49 49 
              4A 4A 4B 4C 
              48 48 49 49 
              4A 4A 4B 4C 
              60 60 61 61 
              62 62 63 64 
              60 60 61 61 
              62 62 63 64 
              68 68 69 69 
              6A 6A 6B 6C 
              68 68 69 69 
              6A 6A 6B 6C 
              80 80 81 81 
              82 82 83 84 
              80 80 81 81 
              82 82 83 84 
              88 88 89 89 
              8A 8A 8B 8C 
              88 88 89 89 
              8A 8A 8B 8C 
              00 00 01 02 
              02 03 03 04 
              00 00 01 02 
              02 03 03 04 
              08 08 09 0A 
              0A 0B 0B 0C 
              10 10 11 12 
              12 13 13 14 
              00 00 01 02 
              02 03 03 04 
              00 00 01 02 
              02 03 03 04 
              08 08 09 0A 
              0A 0B 0B 0C 
              10 10 11 12 
              12 13 13 14 
              20 20 21 22 
              22 23 23 24 
              20 20 21 22 
              22 23 23 24 
              28 28 29 2A 
              2A 2B 2B 2C 
              30 30 31 32 
              32 33 33 34 
              40 40 41 42 
              42 43 43 44 
              40 40 41 42 
              42 43 43 44 
              48 48 49 4A 
              4A 4B 4B 4C 
              50 50 51 52 
              52 53 53 54 
              40 40 41 42 
              42 43 43 44 
              40 40 41 42 
              42 43 43 44 
              48 48 49 4A 
              4A 4B 4B 4C 
              50 50 51 52 
              52 53 53 54 
              60 60 61 62 
              62 63 63 64 
              60 60 61 62 
              62 63 63 64 
              68 68 69 6A 
              6A 6B 6B 6C 
              70 70 71 72 
              72 73 73 74 
              60 60 61 62 
              62 63 63 64 
              60 60 61 62 
              62 63 63 64 
              68 68 69 6A 
              6A 6B 6B 6C 
              70 70 71 72 
              72 73 73 74 
              80 80 81 82 
              82 83 83 84 
              80 80 81 82 
              82 83 83 84 
              88 88 89 8A 
              8A 8B 8B 8C 
              90 90 91 92 
              92 93 93 94 
              00 00 01 02 
              02 03 04 04 
              00 00 01 02 
              02 03 04 04 
              08 08 09 0A 
              0A 0B 0C 0C 
              10 10 11 12 
              12 13 14 14 
              00 00 01 02 
              02 03 04 04 
              00 00 01 02 
              02 03 04 04 
              08 08 09 0A 
              0A 0B 0C 0C 
              10 10 11 12 
              12 13 14 14 
              20 20 21 22 
              22 23 24 24 
              20 20 21 22 
              22 23 24 24 
              28 28 29 2A 
              2A 2B 2C 2C 
              30 30 31 32 
              32 33 34 34 
              40 40 41 42 
              42 43 44 44 
              40 40 41 42 
              42 43 44 44 
              48 48 49 4A 
              4A 4B 4C 4C 
              50 50 51 52 
              52 53 54 54 
              40 40 41 42 
              42 43 44 44 
              40 40 41 42 
              42 43 44 44 
              48 48 49 4A 
              4A 4B 4C 4C 
              50 50 51 52 
              52 53 54 54 
              60 60 61 62 
              62 63 64 64 
              60 60 61 62 
              62 63 64 64 
              68 68 69 6A 
              6A 6B 6C 6C 
              70 70 71 72 
              72 73 74 74 
              80 80 81 82 
              82 83 84 84 
              80 80 81 82 
              82 83 84 84 
              88 88 89 8A 
              8A 8B 8C 8C 
              90 90 91 92 
              92 93 94 94 
              80 80 81 82 
              82 83 84 84 
              80 80 81 82 
              82 83 84 84 
              88 88 89 8A 
              8A 8B 8C 8C 
              90 90 91 92 
              92 93 94 94 
              00 00 01 02 
              03 03 04 05 
              00 00 01 02 
              03 03 04 05 
              08 08 09 0A 
              0B 0B 0C 0D 
              10 10 11 12 
              13 13 14 15 
              00 00 01 02 
              03 03 04 05 
              00 00 01 02 
              03 03 04 05 
              08 08 09 0A 
              0B 0B 0C 0D 
              10 10 11 12 
              13 13 14 15 
              20 20 21 22 
              23 23 24 25 
              20 20 21 22 
              23 23 24 25 
              28 28 29 2A 
              2B 2B 2C 2D 
              30 30 31 32 
              33 33 34 35 
              40 40 41 42 
              43 43 44 45 
              40 40 41 42 
              43 43 44 45 
              48 48 49 4A 
              4B 4B 4C 4D 
              50 50 51 52 
              53 53 54 55 
              60 60 61 62 
              63 63 64 65 
              60 60 61 62 
              63 63 64 65 
              68 68 69 6A 
              6B 6B 6C 6D 
              70 70 71 72 
              73 73 74 75 
              60 60 61 62 
              63 63 64 65 
              60 60 61 62 
              63 63 64 65 
              68 68 69 6A 
              6B 6B 6C 6D 
              70 70 71 72 
              73 73 74 75 
              80 80 81 82 
              83 83 84 85 
              80 80 81 82 
              83 83 84 85 
              88 88 89 8A 
              8B 8B 8C 8D 
              90 90 91 92 
              93 93 94 95 
              A0 A0 A1 A2 
              A3 A3 A4 A5 
              A0 A0 A1 A2 
              A3 A3 A4 A5 
              A8 A8 A9 AA 
              AB AB AC AD 
              B0 B0 B1 B2 
              B3 B3 B4 B5 
              00 00 01 02 
              03 04 05 05 
              00 00 01 02 
              03 04 05 05 
              08 08 09 0A 
              0B 0C 0D 0D 
              10 10 11 12 
              13 14 15 15 
              00 00 01 02 
              03 04 05 05 
              00 00 01 02 
              03 04 05 05 
              08 08 09 0A 
              0B 0C 0D 0D 
              10 10 11 12 
              13 14 15 15 
              20 20 21 22 
              23 24 25 25 
              20 20 21 22 
              23 24 25 25 
              28 28 29 2A 
              2B 2C 2D 2D 
              30 30 31 32 
              33 34 35 35 
              40 40 41 42 
              43 44 45 45 
              40 40 41 42 
              43 44 45 45 
              48 48 49 4A 
              4B 4C 4D 4D 
              50 50 51 52 
              53 54 55 55 
              60 60 61 62 
              63 64 65 65 
              60 60 61 62 
              63 64 65 65 
              68 68 69 6A 
              6B 6C 6D 6D 
              70 70 71 72 
              73 74 75 75 
              80 80 81 82 
              83 84 85 85 
              80 80 81 82 
              83 84 85 85 
              88 88 89 8A 
              8B 8C 8D 8D 
              90 90 91 92 
              93 94 95 95 
              A0 A0 A1 A2 
              A3 A4 A5 A5 
              A0 A0 A1 A2 
              A3 A4 A5 A5 
              A8 A8 A9 AA 
              AB AC AD AD 
              B0 B0 B1 B2 
              B3 B4 B5 B5 
              A0 A0 A1 A2 
              A3 A4 A5 A5 
              A0 A0 A1 A2 
              A3 A4 A5 A5 
              A8 A8 A9 AA 
              AB AC AD AD 
              B0 B0 B1 B2 
              B3 B4 B5 B5 
              00 01 01 02 
              03 04 05 06 
              08 09 09 0A 
              0B 0C 0D 0E 
              08 09 09 0A 
              0B 0C 0D 0E 
              10 11 11 12 
              13 14 15 16 
              20 21 21 22 
              23 24 25 26 
              28 29 29 2A 
              2B 2C 2D 2E 
              28 29 29 2A 
              2B 2C 2D 2E 
              30 31 31 32 
              33 34 35 36 
              20 21 21 22 
              23 24 25 26 
              28 29 29 2A 
              2B 2C 2D 2E 
              28 29 29 2A 
              2B 2C 2D 2E 
              30 31 31 32 
              33 34 35 36 
              40 41 41 42 
              43 44 45 46 
              48 49 49 4A 
              4B 4C 4D 4E 
              48 49 49 4A 
              4B 4C 4D 4E 
              50 51 51 52 
              53 54 55 56 
              60 61 61 62 
              63 64 65 66 
              68 69 69 6A 
              6B 6C 6D 6E 
              68 69 69 6A 
              6B 6C 6D 6E 
              70 71 71 72 
              73 74 75 76 
              80 81 81 82 
              83 84 85 86 
              88 89 89 8A 
              8B 8C 8D 8E 
              88 89 89 8A 
              8B 8C 8D 8E 
              90 91 91 92 
              93 94 95 96 
              A0 A1 A1 A2 
              A3 A4 A5 A6 
              A8 A9 A9 AA 
              AB AC AD AE 
              A8 A9 A9 AA 
              AB AC AD AE 
              B0 B1 B1 B2 
              B3 B4 B5 B6 
              C0 C1 C1 C2 
              C3 C4 C5 C6 
              C8 C9 C9 CA 
              CB CC CD CE 
              C8 C9 C9 CA 
              CB CC CD CE 
              D0 D1 D1 D2 
              D3 D4 D5 D6 
              00 01 02 02 
              03 04 05 06 
              08 09 0A 0A 
              0B 0C 0D 0E 
              10 11 12 12 
              13 14 15 16 
              10 11 12 12 
              13 14 15 16 
              20 21 22 22 
              23 24 25 26 
              28 29 2A 2A 
              2B 2C 2D 2E 
              30 31 32 32 
              33 34 35 36 
              30 31 32 32 
              33 34 35 36 
              40 41 42 42 
              43 44 45 46 
              48 49 4A 4A 
              4B 4C 4D 4E 
              50 51 52 52 
              53 54 55 56 
              50 51 52 52 
              53 54 55 56 
              40 41 42 42 
              43 44 45 46 
              48 49 4A 4A 
              4B 4C 4D 4E 
              50 51 52 52 
              53 54 55 56 
              50 51 52 52 
              53 54 55 56 
              60 61 62 62 
              63 64 65 66 
              68 69 6A 6A 
              6B 6C 6D 6E 
              70 71 72 72 
              73 74 75 76 
              70 71 72 72 
              73 74 75 76 
              80 81 82 82 
              83 84 85 86 
              88 89 8A 8A 
              8B 8C 8D 8E 
              90 91 92 92 
              93 94 95 96 
              90 91 92 92 
              93 94 95 96 
              A0 A1 A2 A2 
              A3 A4 A5 A6 
              A8 A9 AA AA 
              AB AC AD AE 
              B0 B1 B2 B2 
              B3 B4 B5 B6 
              B0 B1 B2 B2 
              B3 B4 B5 B6 
              C0 C1 C2 C2 
              C3 C4 C5 C6 
              C8 C9 CA CA 
              CB CC CD CE 
              D0 D1 D2 D2 
              D3 D4 D5 D6 
              D0 D1 D2 D2 
              D3 D4 D5 D6 
              00 01 02 03 
              04 05 06 07 
              08 09 0A 0B 
              0C 0D 0E 0F 
              10 11 12 13 
              14 15 16 17 
              18 19 1A 1B 
              1C 1D 1E 1F 
              20 21 22 23 
              24 25 26 27 
              28 29 2A 2B 
              2C 2D 2E 2F 
              30 31 32 33 
              34 35 36 37 
              38 39 3A 3B 
              3C 3D 3E 3F 
              40 41 42 43 
              44 45 46 47 
              48 49 4A 4B 
              4C 4D 4E 4F 
              50 51 52 53 
              54 55 56 57 
              58 59 5A 5B 
              5C 5D 5E 5F 
              60 61 62 63 
              64 65 66 67 
              68 69 6A 6B 
              6C 6D 6E 6F 
              70 71 72 73 
              74 75 76 77 
              78 79 7A 7B 
              7C 7D 7E 7F 
              80 81 82 83 
              84 85 86 87 
              88 89 8A 8B 
              8C 8D 8E 8F 
              90 91 92 93 
              94 95 96 97 
              98 99 9A 9B 
              9C 9D 9E 9F 
              A0 A1 A2 A3 
              A4 A5 A6 A7 
              A8 A9 AA AB 
              AC AD AE AF 
              B0 B1 B2 B3 
              B4 B5 B6 B7 
              B8 B9 BA BB 
              BC BD BE BF 
              C0 C1 C2 C3 
              C4 C5 C6 C7 
              C8 C9 CA CB 
              CC CD CE CF 
              D0 D1 D2 D3 
              D4 D5 D6 D7 
              D8 D9 DA DB 
              DC DD DE DF 
              E0 E1 E2 E3 
              E4 E5 E6 E7 
              E8 E9 EA EB 
              EC ED EE EF 
              F0 F1 F2 F3 
              F4 F5 F6 F7 
              F8 F9 FA FB 
              FC FD FE FF 
              00 01 02 03 
              04 05 06 07 
              08 09 0A 0B 
              0C 0D 0E 0F 
              10 11 12 13 
              14 15 16 17 
              18 19 1A 1B 
              1C 1D 1E 1F 
              20 21 22 23 
              24 25 26 27 
              28 29 2A 2B 
              2C 2D 2E 2F 
              30 31 32 33 
              34 35 36 37 
              38 39 3A 3B 
              3C 3D 3E 3F 
              40 41 42 43 
              44 45 46 47 
              48 49 4A 4B 
              4C 4D 4E 4F 
              50 51 52 53 
              54 55 56 57 
              58 59 5A 5B 
              5C 5D 5E 5F 
              60 61 62 63 
              64 65 66 67 
              68 69 6A 6B 
              6C 6D 6E 6F 
              70 71 72 73 
              74 75 76 77 
              78 79 7A 7B 
              7C 7D 7E 7F 
              80 81 82 83 
              84 85 86 87 
              88 89 8A 8B 
              8C 8D 8E 8F 
              90 91 92 93 
              94 95 96 97 
              98 99 9A 9B 
              9C 9D 9E 9F 
              A0 A1 A2 A3 
              A4 A5 A6 A7 
              A8 A9 AA AB 
              AC AD AE AF 
              B0 B1 B2 B3 
              B4 B5 B6 B7 
              B8 B9 BA BB 
              BC BD BE BF 
              C0 C1 C2 C3 
              C4 C5 C6 C7 
              C8 C9 CA CB 
              CC CD CE CF 
              D0 D1 D2 D3 
              D4 D5 D6 D7 
              D8 D9 DA DB 
              DC DD DE DF 
              E0 E1 E2 E3 
              E4 E5 E6 E7 
              E8 E9 EA EB 
              EC ED EE EF 
              F0 F1 F2 F3 
              F4 F5 F6 F7 
              F8 F9 FA FB 
              FC FD FE FF 
              00 01 02 03 
              04 05 06 07 
              08 09 0A 0B 
              0C 0D 0E 0F 
              10 11 12 13 
              14 15 16 17 
              18 19 1A 1B 
              1C 1D 1E 1F 
              20 21 22 23 
              24 25 26 27 
              28 29 2A 2B 
              2C 2D 2E 2F 
              30 31 32 33 
              34 35 36 37 
              38 39 3A 3B 
              3C 3D 3E 3F 
              40 41 42 43 
              44 45 46 47 
              48 49 4A 4B 
              4C 4D 4E 4F 
              50 51 52 53 
              54 55 56 57 
              58 59 5A 5B 
              5C 5D 5E 5F 
              60 61 62 63 
              64 65 66 67 
              68 69 6A 6B 
              6C 6D 6E 6F 
              70 71 72 73 
              74 75 76 77 
              78 79 7A 7B 
              7C 7D 7E 7F 
              80 81 82 83 
              84 85 86 87 
              88 89 8A 8B 
              8C 8D 8E 8F 
              90 91 92 93 
              94 95 96 97 
              98 99 9A 9B 
              9C 9D 9E 9F 
              A0 A1 A2 A3 
              A4 A5 A6 A7 
              A8 A9 AA AB 
              AC AD AE AF 
              B0 B1 B2 B3 
              B4 B5 B6 B7 
              B8 B9 BA BB 
              BC BD BE BF 
              C0 C1 C2 C3 
              C4 C5 C6 C7 
              C8 C9 CA CB 
              CC CD CE CF 
              D0 D1 D2 D3 
              D4 D5 D6 D7 
              D8 D9 DA DB 
              DC DD DE DF 
              E0 E1 E2 E3 
              E4 E5 E6 E7 
              E8 E9 EA EB 
              EC ED EE EF 
              F0 F1 F2 F3 
              F4 F5 F6 F7 
              F8 F9 FA FB 
              FC FD FE FF 
              00 01 02 03 
              04 06 07 07 
              08 09 0A 0B 
              0C 0E 0F 0F 
              10 11 12 13 
              14 16 17 17 
              18 19 1A 1B 
              1C 1E 1F 1F 
              20 21 22 23 
              24 26 27 27 
              28 29 2A 2B 
              2C 2E 2F 2F 
              30 31 32 33 
              34 36 37 37 
              38 39 3A 3B 
              3C 3E 3F 3F 
              40 41 42 43 
              44 46 47 47 
              48 49 4A 4B 
              4C 4E 4F 4F 
              50 51 52 53 
              54 56 57 57 
              58 59 5A 5B 
              5C 5E 5F 5F 
              60 61 62 63 
              64 66 67 67 
              68 69 6A 6B 
              6C 6E 6F 6F 
              70 71 72 73 
              74 76 77 77 
              78 79 7A 7B 
              7C 7E 7F 7F 
              80 81 82 83 
              84 86 87 87 
              88 89 8A 8B 
              8C 8E 8F 8F 
              90 91 92 93 
              94 96 97 97 
              98 99 9A 9B 
              9C 9E 9F 9F 
              C0 C1 C2 C3 
              C4 C6 C7 C7 
              C8 C9 CA CB 
              CC CE CF CF 
              D0 D1 D2 D3 
              D4 D6 D7 D7 
              D8 D9 DA DB 
              DC DE DF DF 
              E0 E1 E2 E3 
              E4 E6 E7 E7 
              E8 E9 EA EB 
              EC EE EF EF 
              F0 F1 F2 F3 
              F4 F6 F7 F7 
              F8 F9 FA FB 
              FC FE FF FF 
              E0 E1 E2 E3 
              E4 E6 E7 E7 
              E8 E9 EA EB 
              EC EE EF EF 
              F0 F1 F2 F3 
              F4 F6 F7 F7 
              F8 F9 FA FB 
              FC FE FF FF 
              00 01 02 03 
              05 06 07 07 
              08 09 0A 0B 
              0D 0E 0F 0F 
              10 11 12 13 
              15 16 17 17 
              18 19 1A 1B 
              1D 1E 1F 1F 
              20 21 22 23 
              25 26 27 27 
              28 29 2A 2B 
              2D 2E 2F 2F 
              30 31 32 33 
              35 36 37 37 
              38 39 3A 3B 
              3D 3E 3F 3F 
              40 41 42 43 
              45 46 47 47 
              48 49 4A 4B 
              4D 4E 4F 4F 
              50 51 52 53 
              55 56 57 57 
              58 59 5A 5B 
              5D 5E 5F 5F 
              60 61 62 63 
              65 66 67 67 
              68 69 6A 6B 
              6D 6E 6F 6F 
              70 71 72 73 
              75 76 77 77 
              78 79 7A 7B 
              7D 7E 7F 7F 
              A0 A1 A2 A3 
              A5 A6 A7 A7 
              A8 A9 AA AB 
              AD AE AF AF 
              B0 B1 B2 B3 
              B5 B6 B7 B7 
              B8 B9 BA BB 
              BD BE BF BF 
              C0 C1 C2 C3 
              C5 C6 C7 C7 
              C8 C9 CA CB 
              CD CE CF CF 
              D0 D1 D2 D3 
              D5 D6 D7 D7 
              D8 D9 DA DB 
              DD DE DF DF 
              E0 E1 E2 E3 
              E5 E6 E7 E7 
              E8 E9 EA EB 
              ED EE EF EF 
              F0 F1 F2 F3 
              F5 F6 F7 F7 
              F8 F9 FA FB 
              FD FE FF FF 
              E0 E1 E2 E3 
              E5 E6 E7 E7 
              E8 E9 EA EB 
              ED EE EF EF 
              F0 F1 F2 F3 
              F5 F6 F7 F7 
              F8 F9 FA FB 
              FD FE FF FF 
              00 01 02 04 
              05 06 07 07 
              08 09 0A 0C 
              0D 0E 0F 0F 
              10 11 12 14 
              15 16 17 17 
              18 19 1A 1C 
              1D 1E 1F 1F 
              20 21 22 24 
              25 26 27 27 
              28 29 2A 2C 
              2D 2E 2F 2F 
              30 31 32 34 
              35 36 37 37 
              38 39 3A 3C 
              3D 3E 3F 3F 
              40 41 42 44 
              45 46 47 47 
              48 49 4A 4C 
              4D 4E 4F 4F 
              50 51 52 54 
              55 56 57 57 
              58 59 5A 5C 
              5D 5E 5F 5F 
              80 81 82 84 
              85 86 87 87 
              88 89 8A 8C 
              8D 8E 8F 8F 
              90 91 92 94 
              95 96 97 97 
              98 99 9A 9C 
              9D 9E 9F 9F 
              A0 A1 A2 A4 
              A5 A6 A7 A7 
              A8 A9 AA AC 
              AD AE AF AF 
              B0 B1 B2 B4 
              B5 B6 B7 B7 
              B8 B9 BA BC 
              BD BE BF BF 
              C0 C1 C2 C4 
              C5 C6 C7 C7 
              C8 C9 CA CC 
              CD CE CF CF 
              D0 D1 D2 D4 
              D5 D6 D7 D7 
              D8 D9 DA DC 
              DD DE DF DF 
              E0 E1 E2 E4 
              E5 E6 E7 E7 
              E8 E9 EA EC 
              ED EE EF EF 
              F0 F1 F2 F4 
              F5 F6 F7 F7 
              F8 F9 FA FC 
              FD FE FF FF 
              E0 E1 E2 E4 
              E5 E6 E7 E7 
              E8 E9 EA EC 
              ED EE EF EF 
              F0 F1 F2 F4 
              F5 F6 F7 F7 
              F8 F9 FA FC 
              FD FE FF FF 
              00 01 02 04 
              05 07 07 07 
              08 09 0A 0C 
              0D 0F 0F 0F 
              10 11 12 14 
              15 17 17 17 
              18 19 1A 1C 
              1D 1F 1F 1F 
              20 21 22 24 
              25 27 27 27 
              28 29 2A 2C 
              2D 2F 2F 2F 
              30 31 32 34 
              35 37 37 37 
              38 39 3A 3C 
              3D 3F 3F 3F 
              40 41 42 44 
              45 47 47 47 
              48 49 4A 4C 
              4D 4F 4F 4F 
              50 51 52 54 
              55 57 57 57 
              58 59 5A 5C 
              5D 5F 5F 5F 
              80 81 82 84 
              85 87 87 87 
              88 89 8A 8C 
              8D 8F 8F 8F 
              90 91 92 94 
              95 97 97 97 
              98 99 9A 9C 
              9D 9F 9F 9F 
              A0 A1 A2 A4 
              A5 A7 A7 A7 
              A8 A9 AA AC 
              AD AF AF AF 
              B0 B1 B2 B4 
              B5 B7 B7 B7 
              B8 B9 BA BC 
              BD BF BF BF 
              E0 E1 E2 E4 
              E5 E7 E7 E7 
              E8 E9 EA EC 
              ED EF EF EF 
              F0 F1 F2 F4 
              F5 F7 F7 F7 
              F8 F9 FA FC 
              FD FF FF FF 
              E0 E1 E2 E4 
              E5 E7 E7 E7 
              E8 E9 EA EC 
              ED EF EF EF 
              F0 F1 F2 F4 
              F5 F7 F7 F7 
              F8 F9 FA FC 
              FD FF FF FF 
              E0 E1 E2 E4 
              E5 E7 E7 E7 
              E8 E9 EA EC 
              ED EF EF EF 
              F0 F1 F2 F4 
              F5 F7 F7 F7 
              F8 F9 FA FC 
              FD FF FF FF 
              00 01 03 04 
              05 07 07 07 
              08 09 0B 0C 
              0D 0F 0F 0F 
              18 19 1B 1C 
              1D 1F 1F 1F 
              18 19 1B 1C 
              1D 1F 1F 1F 
              20 21 23 24 
              25 27 27 27 
              28 29 2B 2C 
              2D 2F 2F 2F 
              38 39 3B 3C 
              3D 3F 3F 3F 
              38 39 3B 3C 
              3D 3F 3F 3F 
              60 61 63 64 
              65 67 67 67 
              68 69 6B 6C 
              6D 6F 6F 6F 
              78 79 7B 7C 
              7D 7F 7F 7F 
              78 79 7B 7C 
              7D 7F 7F 7F 
              80 81 83 84 
              85 87 87 87 
              88 89 8B 8C 
              8D 8F 8F 8F 
              98 99 9B 9C 
              9D 9F 9F 9F 
              98 99 9B 9C 
              9D 9F 9F 9F 
              A0 A1 A3 A4 
              A5 A7 A7 A7 
              A8 A9 AB AC 
              AD AF AF AF 
              B8 B9 BB BC 
              BD BF BF BF 
              B8 B9 BB BC 
              BD BF BF BF 
              E0 E1 E3 E4 
              E5 E7 E7 E7 
              E8 E9 EB EC 
              ED EF EF EF 
              F8 F9 FB FC 
              FD FF FF FF 
              F8 F9 FB FC 
              FD FF FF FF 
              E0 E1 E3 E4 
              E5 E7 E7 E7 
              E8 E9 EB EC 
              ED EF EF EF 
              F8 F9 FB FC 
              FD FF FF FF 
              F8 F9 FB FC 
              FD FF FF FF 
              E0 E1 E3 E4 
              E5 E7 E7 E7 
              E8 E9 EB EC 
              ED EF EF EF 
              F8 F9 FB FC 
              FD FF FF FF 
              F8 F9 FB FC 
              FD FF FF FF 
              00 01 03 04 
              06 07 07 07 
              08 09 0B 0C 
              0E 0F 0F 0F 
              18 19 1B 1C 
              1E 1F 1F 1F 
              18 19 1B 1C 
              1E 1F 1F 1F 
              20 21 23 24 
              26 27 27 27 
              28 29 2B 2C 
              2E 2F 2F 2F 
              38 39 3B 3C 
              3E 3F 3F 3F 
              38 39 3B 3C 
              3E 3F 3F 3F 
              60 61 63 64 
              66 67 67 67 
              68 69 6B 6C 
              6E 6F 6F 6F 
              78 79 7B 7C 
              7E 7F 7F 7F 
              78 79 7B 7C 
              7E 7F 7F 7F 
              80 81 83 84 
              86 87 87 87 
              88 89 8B 8C 
              8E 8F 8F 8F 
              98 99 9B 9C 
              9E 9F 9F 9F 
              98 99 9B 9C 
              9E 9F 9F 9F 
              C0 C1 C3 C4 
              C6 C7 C7 C7 
              C8 C9 CB CC 
              CE CF CF CF 
              D8 D9 DB DC 
              DE DF DF DF 
              D8 D9 DB DC 
              DE DF DF DF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              00 01 03 04 
              06 07 07 07 
              08 09 0B 0C 
              0E 0F 0F 0F 
              18 19 1B 1C 
              1E 1F 1F 1F 
              18 19 1B 1C 
              1E 1F 1F 1F 
              20 21 23 24 
              26 27 27 27 
              28 29 2B 2C 
              2E 2F 2F 2F 
              38 39 3B 3C 
              3E 3F 3F 3F 
              38 39 3B 3C 
              3E 3F 3F 3F 
              60 61 63 64 
              66 67 67 67 
              68 69 6B 6C 
              6E 6F 6F 6F 
              78 79 7B 7C 
              7E 7F 7F 7F 
              78 79 7B 7C 
              7E 7F 7F 7F 
              80 81 83 84 
              86 87 87 87 
              88 89 8B 8C 
              8E 8F 8F 8F 
              98 99 9B 9C 
              9E 9F 9F 9F 
              98 99 9B 9C 
              9E 9F 9F 9F 
              C0 C1 C3 C4 
              C6 C7 C7 C7 
              C8 C9 CB CC 
              CE CF CF CF 
              D8 D9 DB DC 
              DE DF DF DF 
              D8 D9 DB DC 
              DE DF DF DF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              E0 E1 E3 E4 
              E6 E7 E7 E7 
              E8 E9 EB EC 
              EE EF EF EF 
              F8 F9 FB FC 
              FE FF FF FF 
              F8 F9 FB FC 
              FE FF FF FF 
              00 01 03 05 
              06 07 07 07 
              08 09 0B 0D 
              0E 0F 0F 0F 
              18 19 1B 1D 
              1E 1F 1F 1F 
              18 19 1B 1D 
              1E 1F 1F 1F 
              20 21 23 25 
              26 27 27 27 
              28 29 2B 2D 
              2E 2F 2F 2F 
              38 39 3B 3D 
              3E 3F 3F 3F 
              38 39 3B 3D 
              3E 3F 3F 3F 
              60 61 63 65 
              66 67 67 67 
              68 69 6B 6D 
              6E 6F 6F 6F 
              78 79 7B 7D 
              7E 7F 7F 7F 
              78 79 7B 7D 
              7E 7F 7F 7F 
              A0 A1 A3 A5 
              A6 A7 A7 A7 
              A8 A9 AB AD 
              AE AF AF AF 
              B8 B9 BB BD 
              BE BF BF BF 
              B8 B9 BB BD 
              BE BF BF BF 
              C0 C1 C3 C5 
              C6 C7 C7 C7 
              C8 C9 CB CD 
              CE CF CF CF 
              D8 D9 DB DD 
              DE DF DF DF 
              D8 D9 DB DD 
              DE DF DF DF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              00 01 03 05 
              06 07 07 07 
              08 09 0B 0D 
              0E 0F 0F 0F 
              18 19 1B 1D 
              1E 1F 1F 1F 
              18 19 1B 1D 
              1E 1F 1F 1F 
              20 21 23 25 
              26 27 27 27 
              28 29 2B 2D 
              2E 2F 2F 2F 
              38 39 3B 3D 
              3E 3F 3F 3F 
              38 39 3B 3D 
              3E 3F 3F 3F 
              60 61 63 65 
              66 67 67 67 
              68 69 6B 6D 
              6E 6F 6F 6F 
              78 79 7B 7D 
              7E 7F 7F 7F 
              78 79 7B 7D 
              7E 7F 7F 7F 
              A0 A1 A3 A5 
              A6 A7 A7 A7 
              A8 A9 AB AD 
              AE AF AF AF 
              B8 B9 BB BD 
              BE BF BF BF 
              B8 B9 BB BD 
              BE BF BF BF 
              C0 C1 C3 C5 
              C6 C7 C7 C7 
              C8 C9 CB CD 
              CE CF CF CF 
              D8 D9 DB DD 
              DE DF DF DF 
              D8 D9 DB DD 
              DE DF DF DF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              E0 E1 E3 E5 
              E6 E7 E7 E7 
              E8 E9 EB ED 
              EE EF EF EF 
              F8 F9 FB FD 
              FE FF FF FF 
              F8 F9 FB FD 
              FE FF FF FF 
              00 01 03 05 
              07 07 07 07 
              08 09 0B 0D 
              0F 0F 0F 0F 
              18 19 1B 1D 
              1F 1F 1F 1F 
              18 19 1B 1D 
              1F 1F 1F 1F 
              20 21 23 25 
              27 27 27 27 
              28 29 2B 2D 
              2F 2F 2F 2F 
              38 39 3B 3D 
              3F 3F 3F 3F 
              38 39 3B 3D 
              3F 3F 3F 3F 
              60 61 63 65 
              67 67 67 67 
              68 69 6B 6D 
              6F 6F 6F 6F 
              78 79 7B 7D 
              7F 7F 7F 7F 
              78 79 7B 7D 
              7F 7F 7F 7F 
              A0 A1 A3 A5 
              A7 A7 A7 A7 
              A8 A9 AB AD 
              AF AF AF AF 
              B8 B9 BB BD 
              BF BF BF BF 
              B8 B9 BB BD 
              BF BF BF BF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              00 01 03 05 
              07 07 07 07 
              08 09 0B 0D 
              0F 0F 0F 0F 
              18 19 1B 1D 
              1F 1F 1F 1F 
              18 19 1B 1D 
              1F 1F 1F 1F 
              20 21 23 25 
              27 27 27 27 
              28 29 2B 2D 
              2F 2F 2F 2F 
              38 39 3B 3D 
              3F 3F 3F 3F 
              38 39 3B 3D 
              3F 3F 3F 3F 
              60 61 63 65 
              67 67 67 67 
              68 69 6B 6D 
              6F 6F 6F 6F 
              78 79 7B 7D 
              7F 7F 7F 7F 
              78 79 7B 7D 
              7F 7F 7F 7F 
              A0 A1 A3 A5 
              A7 A7 A7 A7 
              A8 A9 AB AD 
              AF AF AF AF 
              B8 B9 BB BD 
              BF BF BF BF 
              B8 B9 BB BD 
              BF BF BF BF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              E0 E1 E3 E5 
              E7 E7 E7 E7 
              E8 E9 EB ED 
              EF EF EF EF 
              F8 F9 FB FD 
              FF FF FF FF 
              F8 F9 FB FD 
              FF FF FF FF 
              00 02 03 05 
              07 07 07 07 
              10 12 13 15 
              17 17 17 17 
              18 1A 1B 1D 
              1F 1F 1F 1F 
              18 1A 1B 1D 
              1F 1F 1F 1F 
              40 42 43 45 
              47 47 47 47 
              50 52 53 55 
              57 57 57 57 
              58 5A 5B 5D 
              5F 5F 5F 5F 
              58 5A 5B 5D 
              5F 5F 5F 5F 
              60 62 63 65 
              67 67 67 67 
              70 72 73 75 
              77 77 77 77 
              78 7A 7B 7D 
              7F 7F 7F 7F 
              78 7A 7B 7D 
              7F 7F 7F 7F 
              A0 A2 A3 A5 
              A7 A7 A7 A7 
              B0 B2 B3 B5 
              B7 B7 B7 B7 
              B8 BA BB BD 
              BF BF BF BF 
              B8 BA BB BD 
              BF BF BF BF 
              E0 E2 E3 E5 
              E7 E7 E7 E7 
              F0 F2 F3 F5 
              F7 F7 F7 F7 
              F8 FA FB FD 
              FF FF FF FF 
              F8 FA FB FD 
              FF FF FF FF 
              E0 E2 E3 E5 
              E7 E7 E7 E7 
              F0 F2 F3 F5 
              F7 F7 F7 F7 
              F8 FA FB FD 
              FF FF FF FF 
              F8 FA FB FD 
              FF FF FF FF 
              E0 E2 E3 E5 
              E7 E7 E7 E7 
              F0 F2 F3 F5 
              F7 F7 F7 F7 
              F8 FA FB FD 
              FF FF FF FF 
              F8 FA FB FD 
              FF FF FF FF 
              E0 E2 E3 E5 
              E7 E7 E7 E7 
              F0 F2 F3 F5 
              F7 F7 F7 F7 
              F8 FA FB FD 
              FF FF FF FF 
              F8 FA FB FD 
              FF FF FF FF 
              00 02 04 05 
              07 07 07 07 
              10 12 14 15 
              17 17 17 17 
              18 1A 1C 1D 
              1F 1F 1F 1F 
              18 1A 1C 1D 
              1F 1F 1F 1F 
              40 42 44 45 
              47 47 47 47 
              50 52 54 55 
              57 57 57 57 
              58 5A 5C 5D 
              5F 5F 5F 5F 
              58 5A 5C 5D 
              5F 5F 5F 5F 
              80 82 84 85 
              87 87 87 87 
              90 92 94 95 
              97 97 97 97 
              98 9A 9C 9D 
              9F 9F 9F 9F 
              98 9A 9C 9D 
              9F 9F 9F 9F 
              A0 A2 A4 A5 
              A7 A7 A7 A7 
              B0 B2 B4 B5 
              B7 B7 B7 B7 
              B8 BA BC BD 
              BF BF BF BF 
              B8 BA BC BD 
              BF BF BF BF 
              E0 E2 E4 E5 
              E7 E7 E7 E7 
              F0 F2 F4 F5 
              F7 F7 F7 F7 
              F8 FA FC FD 
              FF FF FF FF 
              F8 FA FC FD 
              FF FF FF FF 
              E0 E2 E4 E5 
              E7 E7 E7 E7 
              F0 F2 F4 F5 
              F7 F7 F7 F7 
              F8 FA FC FD 
              FF FF FF FF 
              F8 FA FC FD 
              FF FF FF FF 
              E0 E2 E4 E5 
              E7 E7 E7 E7 
              F0 F2 F4 F5 
              F7 F7 F7 F7 
              F8 FA FC FD 
              FF FF FF FF 
              F8 FA FC FD 
              FF FF FF FF 
              E0 E2 E4 E5 
              E7 E7 E7 E7 
              F0 F2 F4 F5 
              F7 F7 F7 F7 
              F8 FA FC FD 
              FF FF FF FF 
              F8 FA FC FD 
              FF FF FF FF .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,32,32,32,32,32,32,32,33,32,32,32,32,32,32,32,33,32,32,32,32,32,32,32,33,32,32,32,32,32,32,32,33,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,32,32,32,32,32,33,33,33,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,32,32,32,32,33,33,33,33,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,8,8,8,9,9,9,10,10,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,8,8,8,9,9,9,10,10,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,0,0,0,1,1,1,2,2,8,8,8,9,9,9,10,10,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,40,40,40,41,41,41,42,42,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,40,40,40,41,41,41,42,42,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,32,32,32,33,33,33,34,34,40,40,40,41,41,41,42,42,64,64,64,65,65,65,66,66,64,64,64,65,65,65,66,66,64,64,64,65,65,65,66,66,72,72,72,73,73,73,74,74,64,64,64,65,65,65,66,66,64,64,64,65,65,65,66,66,64,64,64,65,65,65,66,66,72,72,72,73,73,73,74,74,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,8,8,8,9,9,10,10,10,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,8,8,8,9,9,10,10,10,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,0,0,0,1,1,2,2,2,8,8,8,9,9,10,10,10,32,32,32,33,33,34,34,34,32,32,32,33,33,34,34,34,32,32,32,33,33,34,34,34,40,40,40,41,41,42,42,42,32,32,32,33,33,34,34,34,32,32,32,33,33,34,34,34,32,32,32,33,33,34,34,34,40,40,40,41,41,42,42,42,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,72,72,72,73,73,74,74,74,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,72,72,72,73,73,74,74,74,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,64,64,64,65,65,66,66,66,72,72,72,73,73,74,74,74,0,0,1,1,1,2,2,3,0,0,1,1,1,2,2,3,8,8,9,9,9,10,10,11,8,8,9,9,9,10,10,11,0,0,1,1,1,2,2,3,0,0,1,1,1,2,2,3,8,8,9,9,9,10,10,11,8,8,9,9,9,10,10,11,32,32,33,33,33,34,34,35,32,32,33,33,33,34,34,35,40,40,41,41,41,42,42,43,40,40,41,41,41,42,42,43,32,32,33,33,33,34,34,35,32,32,33,33,33,34,34,35,40,40,41,41,41,42,42,43,40,40,41,41,41,42,42,43,32,32,33,33,33,34,34,35,32,32,33,33,33,34,34,35,40,40,41,41,41,42,42,43,40,40,41,41,41,42,42,43,64,64,65,65,65,66,66,67,64,64,65,65,65,66,66,67,72,72,73,73,73,74,74,75,72,72,73,73,73,74,74,75,64,64,65,65,65,66,66,67,64,64,65,65,65,66,66,67,72,72,73,73,73,74,74,75,72,72,73,73,73,74,74,75,96,96,97,97,97,98,98,99,96,96,97,97,97,98,98,99,104,104,105,105,105,106,106,107,104,104,105,105,105,106,106,107,0,0,1,1,2,2,3,3,0,0,1,1,2,2,3,3,8,8,9,9,10,10,11,11,8,8,9,9,10,10,11,11,0,0,1,1,2,2,3,3,0,0,1,1,2,2,3,3,8,8,9,9,10,10,11,11,8,8,9,9,10,10,11,11,32,32,33,33,34,34,35,35,32,32,33,33,34,34,35,35,40,40,41,41,42,42,43,43,40,40,41,41,42,42,43,43,32,32,33,33,34,34,35,35,32,32,33,33,34,34,35,35,40,40,41,41,42,42,43,43,40,40,41,41,42,42,43,43,64,64,65,65,66,66,67,67,64,64,65,65,66,66,67,67,72,72,73,73,74,74,75,75,72,72,73,73,74,74,75,75,64,64,65,65,66,66,67,67,64,64,65,65,66,66,67,67,72,72,73,73,74,74,75,75,72,72,73,73,74,74,75,75,96,96,97,97,98,98,99,99,96,96,97,97,98,98,99,99,104,104,105,105,106,106,107,107,104,104,105,105,106,106,107,107,96,96,97,97,98,98,99,99,96,96,97,97,98,98,99,99,104,104,105,105,106,106,107,107,104,104,105,105,106,106,107,107,0,0,1,1,2,2,3,4,0,0,1,1,2,2,3,4,8,8,9,9,10,10,11,12,8,8,9,9,10,10,11,12,0,0,1,1,2,2,3,4,0,0,1,1,2,2,3,4,8,8,9,9,10,10,11,12,8,8,9,9,10,10,11,12,32,32,33,33,34,34,35,36,32,32,33,33,34,34,35,36,40,40,41,41,42,42,43,44,40,40,41,41,42,42,43,44,32,32,33,33,34,34,35,36,32,32,33,33,34,34,35,36,40,40,41,41,42,42,43,44,40,40,41,41,42,42,43,44,64,64,65,65,66,66,67,68,64,64,65,65,66,66,67,68,72,72,73,73,74,74,75,76,72,72,73,73,74,74,75,76,64,64,65,65,66,66,67,68,64,64,65,65,66,66,67,68,72,72,73,73,74,74,75,76,72,72,73,73,74,74,75,76,96,96,97,97,98,98,99,100,96,96,97,97,98,98,99,100,104,104,105,105,106,106,107,108,104,104,105,105,106,106,107,108,128,128,129,129,130,130,131,132,128,128,129,129,130,130,131,132,136,136,137,137,138,138,139,140,136,136,137,137,138,138,139,140,0,0,1,2,2,3,3,4,0,0,1,2,2,3,3,4,8,8,9,10,10,11,11,12,16,16,17,18,18,19,19,20,0,0,1,2,2,3,3,4,0,0,1,2,2,3,3,4,8,8,9,10,10,11,11,12,16,16,17,18,18,19,19,20,32,32,33,34,34,35,35,36,32,32,33,34,34,35,35,36,40,40,41,42,42,43,43,44,48,48,49,50,50,51,51,52,64,64,65,66,66,67,67,68,64,64,65,66,66,67,67,68,72,72,73,74,74,75,75,76,80,80,81,82,82,83,83,84,64,64,65,66,66,67,67,68,64,64,65,66,66,67,67,68,72,72,73,74,74,75,75,76,80,80,81,82,82,83,83,84,96,96,97,98,98,99,99,100,96,96,97,98,98,99,99,100,104,104,105,106,106,107,107,108,112,112,113,114,114,115,115,116,96,96,97,98,98,99,99,100,96,96,97,98,98,99,99,100,104,104,105,106,106,107,107,108,112,112,113,114,114,115,115,116,128,128,129,130,130,131,131,132,128,128,129,130,130,131,131,132,136,136,137,138,138,139,139,140,144,144,145,146,146,147,147,148,0,0,1,2,2,3,4,4,0,0,1,2,2,3,4,4,8,8,9,10,10,11,12,12,16,16,17,18,18,19,20,20,0,0,1,2,2,3,4,4,0,0,1,2,2,3,4,4,8,8,9,10,10,11,12,12,16,16,17,18,18,19,20,20,32,32,33,34,34,35,36,36,32,32,33,34,34,35,36,36,40,40,41,42,42,43,44,44,48,48,49,50,50,51,52,52,64,64,65,66,66,67,68,68,64,64,65,66,66,67,68,68,72,72,73,74,74,75,76,76,80,80,81,82,82,83,84,84,64,64,65,66,66,67,68,68,64,64,65,66,66,67,68,68,72,72,73,74,74,75,76,76,80,80,81,82,82,83,84,84,96,96,97,98,98,99,100,100,96,96,97,98,98,99,100,100,104,104,105,106,106,107,108,108,112,112,113,114,114,115,116,116,128,128,129,130,130,131,132,132,128,128,129,130,130,131,132,132,136,136,137,138,138,139,140,140,144,144,145,146,146,147,148,148,128,128,129,130,130,131,132,132,128,128,129,130,130,131,132,132,136,136,137,138,138,139,140,140,144,144,145,146,146,147,148,148,0,0,1,2,3,3,4,5,0,0,1,2,3,3,4,5,8,8,9,10,11,11,12,13,16,16,17,18,19,19,20,21,0,0,1,2,3,3,4,5,0,0,1,2,3,3,4,5,8,8,9,10,11,11,12,13,16,16,17,18,19,19,20,21,32,32,33,34,35,35,36,37,32,32,33,34,35,35,36,37,40,40,41,42,43,43,44,45,48,48,49,50,51,51,52,53,64,64,65,66,67,67,68,69,64,64,65,66,67,67,68,69,72,72,73,74,75,75,76,77,80,80,81,82,83,83,84,85,96,96,97,98,99,99,100,101,96,96,97,98,99,99,100,101,104,104,105,106,107,107,108,109,112,112,113,114,115,115,116,117,96,96,97,98,99,99,100,101,96,96,97,98,99,99,100,101,104,104,105,106,107,107,108,109,112,112,113,114,115,115,116,117,128,128,129,130,131,131,132,133,128,128,129,130,131,131,132,133,136,136,137,138,139,139,140,141,144,144,145,146,147,147,148,149,160,160,161,162,163,163,164,165,160,160,161,162,163,163,164,165,168,168,169,170,171,171,172,173,176,176,177,178,179,179,180,181,0,0,1,2,3,4,5,5,0,0,1,2,3,4,5,5,8,8,9,10,11,12,13,13,16,16,17,18,19,20,21,21,0,0,1,2,3,4,5,5,0,0,1,2,3,4,5,5,8,8,9,10,11,12,13,13,16,16,17,18,19,20,21,21,32,32,33,34,35,36,37,37,32,32,33,34,35,36,37,37,40,40,41,42,43,44,45,45,48,48,49,50,51,52,53,53,64,64,65,66,67,68,69,69,64,64,65,66,67,68,69,69,72,72,73,74,75,76,77,77,80,80,81,82,83,84,85,85,96,96,97,98,99,100,101,101,96,96,97,98,99,100,101,101,104,104,105,106,107,108,109,109,112,112,113,114,115,116,117,117,128,128,129,130,131,132,133,133,128,128,129,130,131,132,133,133,136,136,137,138,139,140,141,141,144,144,145,146,147,148,149,149,160,160,161,162,163,164,165,165,160,160,161,162,163,164,165,165,168,168,169,170,171,172,173,173,176,176,177,178,179,180,181,181,160,160,161,162,163,164,165,165,160,160,161,162,163,164,165,165,168,168,169,170,171,172,173,173,176,176,177,178,179,180,181,181,0,1,1,2,3,4,5,6,8,9,9,10,11,12,13,14,8,9,9,10,11,12,13,14,16,17,17,18,19,20,21,22,32,33,33,34,35,36,37,38,40,41,41,42,43,44,45,46,40,41,41,42,43,44,45,46,48,49,49,50,51,52,53,54,32,33,33,34,35,36,37,38,40,41,41,42,43,44,45,46,40,41,41,42,43,44,45,46,48,49,49,50,51,52,53,54,64,65,65,66,67,68,69,70,72,73,73,74,75,76,77,78,72,73,73,74,75,76,77,78,80,81,81,82,83,84,85,86,96,97,97,98,99,100,101,102,104,105,105,106,107,108,109,110,104,105,105,106,107,108,109,110,112,113,113,114,115,116,117,118,128,129,129,130,131,132,133,134,136,137,137,138,139,140,141,142,136,137,137,138,139,140,141,142,144,145,145,146,147,148,149,150,160,161,161,162,163,164,165,166,168,169,169,170,171,172,173,174,168,169,169,170,171,172,173,174,176,177,177,178,179,180,181,182,192,193,193,194,195,196,197,198,200,201,201,202,203,204,205,206,200,201,201,202,203,204,205,206,208,209,209,210,211,212,213,214,0,1,2,2,3,4,5,6,8,9,10,10,11,12,13,14,16,17,18,18,19,20,21,22,16,17,18,18,19,20,21,22,32,33,34,34,35,36,37,38,40,41,42,42,43,44,45,46,48,49,50,50,51,52,53,54,48,49,50,50,51,52,53,54,64,65,66,66,67,68,69,70,72,73,74,74,75,76,77,78,80,81,82,82,83,84,85,86,80,81,82,82,83,84,85,86,64,65,66,66,67,68,69,70,72,73,74,74,75,76,77,78,80,81,82,82,83,84,85,86,80,81,82,82,83,84,85,86,96,97,98,98,99,100,101,102,104,105,106,106,107,108,109,110,112,113,114,114,115,116,117,118,112,113,114,114,115,116,117,118,128,129,130,130,131,132,133,134,136,137,138,138,139,140,141,142,144,145,146,146,147,148,149,150,144,145,146,146,147,148,149,150,160,161,162,162,163,164,165,166,168,169,170,170,171,172,173,174,176,177,178,178,179,180,181,182,176,177,178,178,179,180,181,182,192,193,194,194,195,196,197,198,200,201,202,202,203,204,205,206,208,209,210,210,211,212,213,214,208,209,210,210,211,212,213,214,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,0,1,2,3,4,6,7,7,8,9,10,11,12,14,15,15,16,17,18,19,20,22,23,23,24,25,26,27,28,30,31,31,32,33,34,35,36,38,39,39,40,41,42,43,44,46,47,47,48,49,50,51,52,54,55,55,56,57,58,59,60,62,63,63,64,65,66,67,68,70,71,71,72,73,74,75,76,78,79,79,80,81,82,83,84,86,87,87,88,89,90,91,92,94,95,95,96,97,98,99,100,102,103,103,104,105,106,107,108,110,111,111,112,113,114,115,116,118,119,119,120,121,122,123,124,126,127,127,128,129,130,131,132,134,135,135,136,137,138,139,140,142,143,143,144,145,146,147,148,150,151,151,152,153,154,155,156,158,159,159,192,193,194,195,196,198,199,199,200,201,202,203,204,206,207,207,208,209,210,211,212,214,215,215,216,217,218,219,220,222,223,223,224,225,226,227,228,230,231,231,232,233,234,235,236,238,239,239,240,241,242,243,244,246,247,247,248,249,250,251,252,254,255,255,224,225,226,227,228,230,231,231,232,233,234,235,236,238,239,239,240,241,242,243,244,246,247,247,248,249,250,251,252,254,255,255,0,1,2,3,5,6,7,7,8,9,10,11,13,14,15,15,16,17,18,19,21,22,23,23,24,25,26,27,29,30,31,31,32,33,34,35,37,38,39,39,40,41,42,43,45,46,47,47,48,49,50,51,53,54,55,55,56,57,58,59,61,62,63,63,64,65,66,67,69,70,71,71,72,73,74,75,77,78,79,79,80,81,82,83,85,86,87,87,88,89,90,91,93,94,95,95,96,97,98,99,101,102,103,103,104,105,106,107,109,110,111,111,112,113,114,115,117,118,119,119,120,121,122,123,125,126,127,127,160,161,162,163,165,166,167,167,168,169,170,171,173,174,175,175,176,177,178,179,181,182,183,183,184,185,186,187,189,190,191,191,192,193,194,195,197,198,199,199,200,201,202,203,205,206,207,207,208,209,210,211,213,214,215,215,216,217,218,219,221,222,223,223,224,225,226,227,229,230,231,231,232,233,234,235,237,238,239,239,240,241,242,243,245,246,247,247,248,249,250,251,253,254,255,255,224,225,226,227,229,230,231,231,232,233,234,235,237,238,239,239,240,241,242,243,245,246,247,247,248,249,250,251,253,254,255,255,0,1,2,4,5,6,7,7,8,9,10,12,13,14,15,15,16,17,18,20,21,22,23,23,24,25,26,28,29,30,31,31,32,33,34,36,37,38,39,39,40,41,42,44,45,46,47,47,48,49,50,52,53,54,55,55,56,57,58,60,61,62,63,63,64,65,66,68,69,70,71,71,72,73,74,76,77,78,79,79,80,81,82,84,85,86,87,87,88,89,90,92,93,94,95,95,128,129,130,132,133,134,135,135,136,137,138,140,141,142,143,143,144,145,146,148,149,150,151,151,152,153,154,156,157,158,159,159,160,161,162,164,165,166,167,167,168,169,170,172,173,174,175,175,176,177,178,180,181,182,183,183,184,185,186,188,189,190,191,191,192,193,194,196,197,198,199,199,200,201,202,204,205,206,207,207,208,209,210,212,213,214,215,215,216,217,218,220,221,222,223,223,224,225,226,228,229,230,231,231,232,233,234,236,237,238,239,239,240,241,242,244,245,246,247,247,248,249,250,252,253,254,255,255,224,225,226,228,229,230,231,231,232,233,234,236,237,238,239,239,240,241,242,244,245,246,247,247,248,249,250,252,253,254,255,255,0,1,2,4,5,7,7,7,8,9,10,12,13,15,15,15,16,17,18,20,21,23,23,23,24,25,26,28,29,31,31,31,32,33,34,36,37,39,39,39,40,41,42,44,45,47,47,47,48,49,50,52,53,55,55,55,56,57,58,60,61,63,63,63,64,65,66,68,69,71,71,71,72,73,74,76,77,79,79,79,80,81,82,84,85,87,87,87,88,89,90,92,93,95,95,95,128,129,130,132,133,135,135,135,136,137,138,140,141,143,143,143,144,145,146,148,149,151,151,151,152,153,154,156,157,159,159,159,160,161,162,164,165,167,167,167,168,169,170,172,173,175,175,175,176,177,178,180,181,183,183,183,184,185,186,188,189,191,191,191,224,225,226,228,229,231,231,231,232,233,234,236,237,239,239,239,240,241,242,244,245,247,247,247,248,249,250,252,253,255,255,255,224,225,226,228,229,231,231,231,232,233,234,236,237,239,239,239,240,241,242,244,245,247,247,247,248,249,250,252,253,255,255,255,224,225,226,228,229,231,231,231,232,233,234,236,237,239,239,239,240,241,242,244,245,247,247,247,248,249,250,252,253,255,255,255,0,1,3,4,5,7,7,7,8,9,11,12,13,15,15,15,24,25,27,28,29,31,31,31,24,25,27,28,29,31,31,31,32,33,35,36,37,39,39,39,40,41,43,44,45,47,47,47,56,57,59,60,61,63,63,63,56,57,59,60,61,63,63,63,96,97,99,100,101,103,103,103,104,105,107,108,109,111,111,111,120,121,123,124,125,127,127,127,120,121,123,124,125,127,127,127,128,129,131,132,133,135,135,135,136,137,139,140,141,143,143,143,152,153,155,156,157,159,159,159,152,153,155,156,157,159,159,159,160,161,163,164,165,167,167,167,168,169,171,172,173,175,175,175,184,185,187,188,189,191,191,191,184,185,187,188,189,191,191,191,224,225,227,228,229,231,231,231,232,233,235,236,237,239,239,239,248,249,251,252,253,255,255,255,248,249,251,252,253,255,255,255,224,225,227,228,229,231,231,231,232,233,235,236,237,239,239,239,248,249,251,252,253,255,255,255,248,249,251,252,253,255,255,255,224,225,227,228,229,231,231,231,232,233,235,236,237,239,239,239,248,249,251,252,253,255,255,255,248,249,251,252,253,255,255,255,0,1,3,4,6,7,7,7,8,9,11,12,14,15,15,15,24,25,27,28,30,31,31,31,24,25,27,28,30,31,31,31,32,33,35,36,38,39,39,39,40,41,43,44,46,47,47,47,56,57,59,60,62,63,63,63,56,57,59,60,62,63,63,63,96,97,99,100,102,103,103,103,104,105,107,108,110,111,111,111,120,121,123,124,126,127,127,127,120,121,123,124,126,127,127,127,128,129,131,132,134,135,135,135,136,137,139,140,142,143,143,143,152,153,155,156,158,159,159,159,152,153,155,156,158,159,159,159,192,193,195,196,198,199,199,199,200,201,203,204,206,207,207,207,216,217,219,220,222,223,223,223,216,217,219,220,222,223,223,223,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,0,1,3,4,6,7,7,7,8,9,11,12,14,15,15,15,24,25,27,28,30,31,31,31,24,25,27,28,30,31,31,31,32,33,35,36,38,39,39,39,40,41,43,44,46,47,47,47,56,57,59,60,62,63,63,63,56,57,59,60,62,63,63,63,96,97,99,100,102,103,103,103,104,105,107,108,110,111,111,111,120,121,123,124,126,127,127,127,120,121,123,124,126,127,127,127,128,129,131,132,134,135,135,135,136,137,139,140,142,143,143,143,152,153,155,156,158,159,159,159,152,153,155,156,158,159,159,159,192,193,195,196,198,199,199,199,200,201,203,204,206,207,207,207,216,217,219,220,222,223,223,223,216,217,219,220,222,223,223,223,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,224,225,227,228,230,231,231,231,232,233,235,236,238,239,239,239,248,249,251,252,254,255,255,255,248,249,251,252,254,255,255,255,0,1,3,5,6,7,7,7,8,9,11,13,14,15,15,15,24,25,27,29,30,31,31,31,24,25,27,29,30,31,31,31,32,33,35,37,38,39,39,39,40,41,43,45,46,47,47,47,56,57,59,61,62,63,63,63,56,57,59,61,62,63,63,63,96,97,99,101,102,103,103,103,104,105,107,109,110,111,111,111,120,121,123,125,126,127,127,127,120,121,123,125,126,127,127,127,160,161,163,165,166,167,167,167,168,169,171,173,174,175,175,175,184,185,187,189,190,191,191,191,184,185,187,189,190,191,191,191,192,193,195,197,198,199,199,199,200,201,203,205,206,207,207,207,216,217,219,221,222,223,223,223,216,217,219,221,222,223,223,223,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,0,1,3,5,6,7,7,7,8,9,11,13,14,15,15,15,24,25,27,29,30,31,31,31,24,25,27,29,30,31,31,31,32,33,35,37,38,39,39,39,40,41,43,45,46,47,47,47,56,57,59,61,62,63,63,63,56,57,59,61,62,63,63,63,96,97,99,101,102,103,103,103,104,105,107,109,110,111,111,111,120,121,123,125,126,127,127,127,120,121,123,125,126,127,127,127,160,161,163,165,166,167,167,167,168,169,171,173,174,175,175,175,184,185,187,189,190,191,191,191,184,185,187,189,190,191,191,191,192,193,195,197,198,199,199,199,200,201,203,205,206,207,207,207,216,217,219,221,222,223,223,223,216,217,219,221,222,223,223,223,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,224,225,227,229,230,231,231,231,232,233,235,237,238,239,239,239,248,249,251,253,254,255,255,255,248,249,251,253,254,255,255,255,0,1,3,5,7,7,7,7,8,9,11,13,15,15,15,15,24,25,27,29,31,31,31,31,24,25,27,29,31,31,31,31,32,33,35,37,39,39,39,39,40,41,43,45,47,47,47,47,56,57,59,61,63,63,63,63,56,57,59,61,63,63,63,63,96,97,99,101,103,103,103,103,104,105,107,109,111,111,111,111,120,121,123,125,127,127,127,127,120,121,123,125,127,127,127,127,160,161,163,165,167,167,167,167,168,169,171,173,175,175,175,175,184,185,187,189,191,191,191,191,184,185,187,189,191,191,191,191,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,0,1,3,5,7,7,7,7,8,9,11,13,15,15,15,15,24,25,27,29,31,31,31,31,24,25,27,29,31,31,31,31,32,33,35,37,39,39,39,39,40,41,43,45,47,47,47,47,56,57,59,61,63,63,63,63,56,57,59,61,63,63,63,63,96,97,99,101,103,103,103,103,104,105,107,109,111,111,111,111,120,121,123,125,127,127,127,127,120,121,123,125,127,127,127,127,160,161,163,165,167,167,167,167,168,169,171,173,175,175,175,175,184,185,187,189,191,191,191,191,184,185,187,189,191,191,191,191,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,224,225,227,229,231,231,231,231,232,233,235,237,239,239,239,239,248,249,251,253,255,255,255,255,248,249,251,253,255,255,255,255,0,2,3,5,7,7,7,7,16,18,19,21,23,23,23,23,24,26,27,29,31,31,31,31,24,26,27,29,31,31,31,31,64,66,67,69,71,71,71,71,80,82,83,85,87,87,87,87,88,90,91,93,95,95,95,95,88,90,91,93,95,95,95,95,96,98,99,101,103,103,103,103,112,114,115,117,119,119,119,119,120,122,123,125,127,127,127,127,120,122,123,125,127,127,127,127,160,162,163,165,167,167,167,167,176,178,179,181,183,183,183,183,184,186,187,189,191,191,191,191,184,186,187,189,191,191,191,191,224,226,227,229,231,231,231,231,240,242,243,245,247,247,247,247,248,250,251,253,255,255,255,255,248,250,251,253,255,255,255,255,224,226,227,229,231,231,231,231,240,242,243,245,247,247,247,247,248,250,251,253,255,255,255,255,248,250,251,253,255,255,255,255,224,226,227,229,231,231,231,231,240,242,243,245,247,247,247,247,248,250,251,253,255,255,255,255,248,250,251,253,255,255,255,255,224,226,227,229,231,231,231,231,240,242,243,245,247,247,247,247,248,250,251,253,255,255,255,255,248,250,251,253,255,255,255,255,0,2,4,5,7,7,7,7,16,18,20,21,23,23,23,23,24,26,28,29,31,31,31,31,24,26,28,29,31,31,31,31,64,66,68,69,71,71,71,71,80,82,84,85,87,87,87,87,88,90,92,93,95,95,95,95,88,90,92,93,95,95,95,95,128,130,132,133,135,135,135,135,144,146,148,149,151,151,151,151,152,154,156,157,159,159,159,159,152,154,156,157,159,159,159,159,160,162,164,165,167,167,167,167,176,178,180,181,183,183,183,183,184,186,188,189,191,191,191,191,184,186,188,189,191,191,191,191,224,226,228,229,231,231,231,231,240,242,244,245,247,247,247,247,248,250,252,253,255,255,255,255,248,250,252,253,255,255,255,255,224,226,228,229,231,231,231,231,240,242,244,245,247,247,247,247,248,250,252,253,255,255,255,255,248,250,252,253,255,255,255,255,224,226,228,229,231,231,231,231,240,242,244,245,247,247,247,247,248,250,252,253,255,255,255,255,248,250,252,253,255,255,255,255,224,226,228,229,231,231,231,231,240,242,244,245,247,247,247,247,248,250,252,253,255,255,255,255,248,250,252,253,255,255,255,255
    5 D1:FF6F -  -  -  -  
    6 D1:FF6F -  -  -  -  ; sin LUT , this lut shouldn't cross 64K boundary !
    7 D1:FF6F -  -  -  -  VX_SIN_LUT_DATA:
    8 D1:FF6F -  -  -  -  VX_SIN_TABLE_SIZE=512
    9 D1:FF6F 00 65 C9 2E 
              92 F7 5B C0 .db 0,101,201,46,146,247,91,192
   10 D1:FF77 24 88 ED 51 
              B5 1A 7E E2 .db 36,136,237,81,181,26,126,226
   11 D1:FF7F 46 AA 0E 72 
              D6 39 9D 01 .db 70,170,14,114,214,57,157,1
   12 D1:FF87 64 C7 2B 8E 
              F1 54 B7 1A .db 100,199,43,142,241,84,183,26
   13 D1:FF8F 7C DF 41 A4 
              06 68 CA 2B .db 124,223,65,164,6,104,202,43
   14 D1:FF97 8D EE 50 B1 
              12 73 D3 34 .db 141,238,80,177,18,115,211,52
   15 D1:FF9F 94 F4 54 B4 
              13 73 D2 31 .db 148,244,84,180,19,115,210,49
   16 D1:FFA7 90 EE 4C AB 
              09 66 C4 21 .db 144,238,76,171,9,102,196,33
   17 D1:FFAF 7E DB 37 93 
              EF 4B A7 02 .db 126,219,55,147,239,75,167,2
   18 D1:FFB7 5D B8 12 6C 
              C6 20 79 D3 .db 93,184,18,108,198,32,121,211
   19 D1:FFBF 2B 84 DC 34 
              8C E3 3A 91 .db 43,132,220,52,140,227,58,145
   20 D1:FFC7 E7 3D 93 E8 
              3D 92 E7 3B .db 231,61,147,232,61,146,231,59
   21 D1:FFCF 8E E2 35 88 
              DA 2C 7E CF .db 142,226,53,136,218,44,126,207
   22 D1:FFD7 20 71 C1 11 
              60 AF FE 4C .db 32,113,193,17,96,175,254,76
   23 D1:FFDF 9A E7 35 81 
              CE 1A 65 B0 .db 154,231,53,129,206,26,101,176
   24 D1:FFE7 FB 45 8F D8 
              21 6A B2 FA .db 251,69,143,216,33,106,178,250
   25 D1:FFEF 41 88 CF 15 
              5A 9F E4 28 .db 65,136,207,21,90,159,228,40
   26 D1:FFF7 6C AF F2 34 
              76 B8 F9 39 .db 108,175,242,52,118,184,249,57
   27 D1:FFFF 79 B9 F8 36 
              74 B2 EF 2C .db 121,185,248,54,116,178,239,44
   28 D2:0007 68 A3 DF 19 
              53 8D C6 FF .db 104,163,223,25,83,141,198,255
   29 D2:000F 37 6E A5 DC 
              12 48 7D B1 .db 55,110,165,220,18,72,125,177
   30 D2:0017 E5 18 4B 7E 
              B0 E1 12 42 .db 229,24,75,126,176,225,18,66
   31 D2:001F 71 A1 CF FD 
              2B 58 84 B0 .db 113,161,207,253,43,88,132,176
   32 D2:0027 DB 06 30 59 
              82 AB D3 FA .db 219,6,48,89,130,171,211,250
   33 D2:002F 21 47 6D 92 
              B6 DA FD 20 .db 33,71,109,146,182,218,253,32
   34 D2:0037 42 64 85 A5 
              C5 E4 03 21 .db 66,100,133,165,197,228,3,33
   35 D2:003F 3F 5B 78 93 
              AF C9 E3 FC .db 63,91,120,147,175,201,227,252
   36 D2:0047 15 2D 45 5C 
              72 88 9D B1 .db 21,45,69,92,114,136,157,177
   37 D2:004F C5 D8 EB FD 
              0F 20 30 40 .db 197,216,235,253,15,32,48,64
   38 D2:0057 4F 5D 6B 78 
              85 91 9C A7 .db 79,93,107,120,133,145,156,167
   39 D2:005F B1 BB C4 CC 
              D4 DB E1 E7 .db 177,187,196,204,212,219,225,231
   40 D2:0067 EC F1 F5 F8 
              FB FD FF 00 .db 236,241,245,248,251,253,255,0
   41 D2:006F 00 00 00 01 
              01 01 02 02 .db 0,0,0,1,1,1,2,2
   42 D2:0077 03 03 03 04 
              04 05 05 05 .db 3,3,3,4,4,5,5,5
   43 D2:007F 06 06 07 07 
              07 08 08 09 .db 6,6,7,7,7,8,8,9
   44 D2:0087 09 09 0A 0A 
              0A 0B 0B 0C .db 9,9,10,10,10,11,11,12
   45 D2:008F 0C 0C 0D 0D 
              0E 0E 0E 0F .db 12,12,13,13,14,14,14,15
   46 D2:0097 0F 0F 10 10 
              11 11 11 12 .db 15,15,16,16,17,17,17,18
   47 D2:009F 12 12 13 13 
              14 14 14 15 .db 18,18,19,19,20,20,20,21
   48 D2:00A7 15 15 16 16 
              17 17 17 18 .db 21,21,22,22,23,23,23,24
   49 D2:00AF 18 18 19 19 
              19 1A 1A 1B .db 24,24,25,25,25,26,26,27
   50 D2:00B7 1B 1B 1C 1C 
              1C 1D 1D 1D .db 27,27,28,28,28,29,29,29
   51 D2:00BF 1E 1E 1E 1F 
              1F 1F 20 20 .db 30,30,30,31,31,31,32,32
   52 D2:00C7 20 21 21 21 
              22 22 22 23 .db 32,33,33,33,34,34,34,35
   53 D2:00CF 23 23 24 24 
              24 25 25 25 .db 35,35,36,36,36,37,37,37
   54 D2:00D7 26 26 26 27 
              27 27 27 28 .db 38,38,38,39,39,39,39,40
   55 D2:00DF 28 28 29 29 
              29 2A 2A 2A .db 40,40,41,41,41,42,42,42
   56 D2:00E7 2A 2B 2B 2B 
              2C 2C 2C 2C .db 42,43,43,43,44,44,44,44
   57 D2:00EF 2D 2D 2D 2E 
              2E 2E 2E 2F .db 45,45,45,46,46,46,46,47
   58 D2:00F7 2F 2F 2F 30 
              30 30 30 31 .db 47,47,47,48,48,48,48,49
   59 D2:00FF 31 31 31 32 
              32 32 32 33 .db 49,49,49,50,50,50,50,51
   60 D2:0107 33 33 33 34 
              34 34 34 34 .db 51,51,51,52,52,52,52,52
   61 D2:010F 35 35 35 35 
              36 36 36 36 .db 53,53,53,53,54,54,54,54
   62 D2:0117 36 37 37 37 
              37 37 38 38 .db 54,55,55,55,55,55,56,56
   63 D2:011F 38 38 38 38 
              39 39 39 39 .db 56,56,56,56,57,57,57,57
   64 D2:0127 39 3A 3A 3A 
              3A 3A 3A 3A .db 57,58,58,58,58,58,58,58
   65 D2:012F 3B 3B 3B 3B 
              3B 3B 3B 3C .db 59,59,59,59,59,59,59,60
   66 D2:0137 3C 3C 3C 3C 
              3C 3C 3D 3D .db 60,60,60,60,60,60,61,61
   67 D2:013F 3D 3D 3D 3D 
              3D 3D 3D 3D .db 61,61,61,61,61,61,61,61
   68 D2:0147 3E 3E 3E 3E 
              3E 3E 3E 3E .db 62,62,62,62,62,62,62,62
   69 D2:014F 3E 3E 3E 3E 
              3F 3F 3F 3F .db 62,62,62,62,63,63,63,63
   70 D2:0157 3F 3F 3F 3F 
              3F 3F 3F 3F .db 63,63,63,63,63,63,63,63
   71 D2:015F 3F 3F 3F 3F 
              3F 3F 3F 3F .db 63,63,63,63,63,63,63,63
   72 D2:0167 3F 3F 3F 3F 
              3F 3F 3F 40 .db 63,63,63,63,63,63,63,64
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\vxMain.ez80"
   14 D2:016F -  -  -  -  
   15 D2:016F -  -  -  -  ; functions
   16 D2:016F -  -  -  -  
   17 D2:016F -  -  -  -  vxEngineInit:
   18 D2:016F -  -  -  -  ; get indic off
   19 D2:016F CD 48 08 02 	call	_RunIndicoff
   20 D2:0173 -  -  -  -  ; disable interrupt and start LCD interrupt
   21 D2:0173 CD 74 03 00 	call	_boot_ClearVRAM
   22 D2:0177 F3 -  -  -  	di
   23 D2:0178 3A 1C 00 E3 	ld	a, (VX_LCD_IMSC)
   24 D2:017C F6 04 -  -  	or	%00000100
   25 D2:017E 32 1C 00 E3 	ld	(VX_LCD_IMSC), a
   26 D2:0182 -  -  -  -  
   27 D2:0182 -  -  -  -  ; setup 8bpp mode
   28 D2:0182 3E 27 -  -  	ld a,VX_BPP8
   29 D2:0184 32 18 00 E3 	ld	(VX_LCD_CTRL),a
   30 D2:0188 -  -  -  -  ; load vram buffer
   31 D2:0188 21 00 00 D4 	ld	hl, VX_FRAMEBUFFER_AUX0
   32 D2:018C 22 10 00 E3 	ld	(VX_LCD_BUFFER), hl
   33 D2:0190 21 00 2C D5 	ld	hl, VX_FRAMEBUFFER_AUX1
   34 D2:0194 22 14 00 E3 	ld	(vxFramebuffer), hl
   35 D2:0198 -  -  -  -  
   36 D2:0198 -  -  -  -  
   37 D2:0198 FD 21 00 00 
              D1 -  -  -  	ld	iy, VX_GEOMETRY_QUEUE
   38 D2:019D FD 22 86 BD 
              D1 -  -  -  	ld	(vxSubmissionQueue), iy
   39 D2:01A2 21 00 BE D1 	ld	hl, VX_BATCH_DATA
   40 D2:01A6 22 8C BD D1 	ld	(vxBatchData), hl
   41 D2:01AA B7 -  -  -  	or	a, a
   42 D2:01AB ED 62 -  -  	sbc	hl, hl
   43 D2:01AD 22 89 BD D1 	ld	(vxGeometrySize), hl
   44 D2:01B1 -  -  -  -  ;;	ld	hl, 0E00005h
   45 D2:01B1 -  -  -  -  ;;;	ld	(hl), 2	; Set flash wait states to 5 + 1 = 6 (total access time = 7)
   46 D2:01B1 CD CE C4 D1 	call	vxCreateMemoryPool
   47 D2:01B5 -  -  -  -  
   48 D2:01B5 21 79 88 D1 	ld	hl,0D18879h
   49 D2:01B9 11 11 06 C9 	ld	de,0C90611h
   50 D2:01BD ED 1F -  -  	ld	(hl),de
   51 D2:01BF 2B -  -  -  	dec	hl
   52 D2:01C0 36 ED -  -  	ld	(hl),0EDh
   53 D2:01C2 E5 -  -  -  	push	hl
   54 D2:01C3 14 -  -  -  	inc	d
   55 D2:01C4 CD 78 88 D1 	call	0D18878h
   56 D2:01C8 E1 -  -  -  	pop	hl
   57 D2:01C9 -  -  -  -  
   58 D2:01C9 -  -  -  -  #define	VX_COLOR_LUT	$D00000
   59 D2:01C9 -  -  -  -  #define	VX_SIN_TABLE	$D02000
   60 D2:01C9 -  -  -  -  
   61 D2:01C9 21 6F DF D1 	ld	hl, VX_COLOR_LUT_DATA
   62 D2:01CD 11 00 00 D0 	ld	de, VX_COLOR_LUT
   63 D2:01D1 01 00 20 00 	ld	bc, 8192
   64 D2:01D5 ED B0 -  -  	ldir
   65 D2:01D7 21 6F FF D1 	ld	hl, VX_SIN_LUT_DATA
   66 D2:01DB 11 00 20 D0 	ld	de, VX_SIN_TABLE
   67 D2:01DF 01 00 02 00 	ld	bc, 512
   68 D2:01E3 ED B0 -  -  	ldir
   69 D2:01E5 -  -  -  -  
   70 D2:01E5 CD 7C B3 D1 	call	vxResetPalette
   71 D2:01E9 -  -  -  -  ; insert stack position
   72 D2:01E9 21 EF 01 D2 	ld	hl, vxEngineQuit
   73 D2:01ED E3 -  -  -  	ex	(sp), hl
   74 D2:01EE E9 -  -  -  	jp	(hl)
   75 D2:01EF -  -  -  -  vxEngineQuit:
   76 D2:01EF 3E D0 -  -  	ld	a, $D0
   77 D2:01F1 ED 6D -  -  	.db	$ED,$6D
   78 D2:01F3 21 00 00 F5 	ld hl,$F50000
   79 D2:01F7 AF -  -  -  	xor a		; Mode 0
   80 D2:01F8 77 -  -  -  	ld (hl),a
   81 D2:01F9 2C -  -  -  	inc l		; 0F50001h
   82 D2:01FA 36 0F -  -  	ld (hl),15	; Wait 15*256 APB cycles before scanning each row
   83 D2:01FC 2C -  -  -  	inc l		; 0F50002h
   84 D2:01FD AF -  -  -  	xor a
   85 D2:01FE 77 -  -  -  	ld (hl),a
   86 D2:01FF 2C -  -  -   	inc l		; 0F50003h
   87 D2:0200 36 0F -  -  	ld (hl),15	; Wait 15 APB cycles before each scan
   88 D2:0202 2C -  -  -  	inc l		; 0F50004h
   89 D2:0203 3E 08 -  -  	ld a,8		; Number of rows to scan
   90 D2:0205 77 -  -  -  	ld (hl),a
   91 D2:0206 2C -  -  -  	inc l		; 0F50005h
   92 D2:0207 77 -  -  -  	ld (hl),a	; Number of columns to scan
   93 D2:0208 FD 21 80 00 
              D0 -  -  -  	ld iy, OS__FLAGS
   94 D2:020D 3E 2D -  -  	ld a, VX_BPP16
   95 D2:020F 32 18 00 E3 	ld (VX_LCD_CTRL),a
   96 D2:0213 21 00 00 D4 	ld	hl, VX_FRAMEBUFFER_AUX0
   97 D2:0217 22 10 00 E3 	ld	(VX_LCD_BUFFER), hl
   98 D2:021B -  -  -  -  
   99 D2:021B CD 27 C5 D1 	call	vxDestroyMemoryPool
  100 D2:021F -  -  -  -  
  101 D2:021F CD 28 08 02 	call _HomeUp
  102 D2:0223 CD 14 08 02 	call _Clrscrn
  103 D2:0227 CD 3C 1A 02 	call _DrawStatusBar
  104 D2:022B CD 44 08 02 	call _RunIndicon
  105 D2:022F FB -  -  -  	ei
  106 D2:0230 C3 50 1A 02 	jp _DrawBatteryIndicator
Listing for file "example1.ez80"
  181 D2:0234 -  -  -  -  #include	"graphics_lib.asm"
Listing for file "C:\Users\Zeromus\Documents\GitHub\Virtual3D\graphics_lib.asm"
    1 D2:0234 -  -  -  -  ; quickly hacked C routines to be able to display digits
    2 D2:0234 -  -  -  -  
    3 D2:0234 -  -  -  -  
    4 D2:0234 -  -  -  -  ;-------------------------------------------------------------------------------
    5 D2:0234 -  -  -  -  ; Used throughout the library
    6 D2:0234 -  -  -  -  lcdSize                 equ lcdWidth*lcdHeight
    7 D2:0234 -  -  -  -  currDrawBuffer          equ 0E30014h
    8 D2:0234 -  -  -  -  _GetTextX:
    9 D2:0234 -  -  -  -  ; Gets the X position of the text cursor
   10 D2:0234 -  -  -  -  ; Arguments:
   11 D2:0234 -  -  -  -  ;  None
   12 D2:0234 -  -  -  -  ; Returns:
   13 D2:0234 -  -  -  -  ;  X Text cursor posistion
   14 D2:0234 2A 91 02 D2 	ld	hl,(TextXPos_SMC) 
   15 D2:0238 C9 -  -  -  	ret
   16 D2:0239 -  -  -  -  
   17 D2:0239 -  -  -  -  ;-------------------------------------------------------------------------------
   18 D2:0239 -  -  -  -  _GetTextY:
   19 D2:0239 -  -  -  -  ; Gets the Y position of the text cursor
   20 D2:0239 -  -  -  -  ; Arguments:
   21 D2:0239 -  -  -  -  ;  None
   22 D2:0239 -  -  -  -  ; Returns:
   23 D2:0239 -  -  -  -  ;  Y Text cursor posistion
   24 D2:0239 3A 9F 02 D2 	ld	a,(TextYPos_SMC) 
   25 D2:023D C9 -  -  -  	ret
   26 D2:023E -  -  -  -  
   27 D2:023E -  -  -  -  ;-------------------------------------------------------------------------------
   28 D2:023E -  -  -  -  _SetTextBGColorC:
   29 D2:023E -  -  -  -  ; Sets the background text color for text routines
   30 D2:023E -  -  -  -  ; Arguments:
   31 D2:023E -  -  -  -  ;  arg0 : Color index to set BG to
   32 D2:023E -  -  -  -  ; Returns:
   33 D2:023E -  -  -  -  ;  Previous text color palette index
   34 D2:023E E1 -  -  -  	pop	hl
   35 D2:023F D1 -  -  -  	pop	de
   36 D2:0240 D5 -  -  -  	push	de
   37 D2:0241 E5 -  -  -  	push	hl
   38 D2:0242 21 D0 02 D2 	ld	hl,TextBGColor_SMC 
   39 D2:0246 7E -  -  -  	ld	a,(hl)
   40 D2:0247 73 -  -  -  	ld	(hl),e
   41 D2:0248 C9 -  -  -  	ret
   42 D2:0249 -  -  -  -  
   43 D2:0249 -  -  -  -  ;-------------------------------------------------------------------------------
   44 D2:0249 -  -  -  -  _SetTextFGColorC:
   45 D2:0249 -  -  -  -  ; Sets the foreground text color for text routines
   46 D2:0249 -  -  -  -  ; Arguments:
   47 D2:0249 -  -  -  -  ;  arg0 : Color index to set FG to
   48 D2:0249 -  -  -  -  ; Returns:
   49 D2:0249 -  -  -  -  ;  Previous text color palette index
   50 D2:0249 E1 -  -  -  	pop	hl
   51 D2:024A D1 -  -  -  	pop	de
   52 D2:024B D5 -  -  -  	push	de
   53 D2:024C E5 -  -  -  	push	hl
   54 D2:024D 21 D6 02 D2 	ld	hl,TextFGColor_SMC 
   55 D2:0251 7E -  -  -  	ld	a,(hl)
   56 D2:0252 73 -  -  -  	ld	(hl),e
   57 D2:0253 C9 -  -  -  	ret
   58 D2:0254 -  -  -  -  
   59 D2:0254 -  -  -  -  ;-------------------------------------------------------------------------------
   60 D2:0254 -  -  -  -  _SetTextTransparentColorC:
   61 D2:0254 -  -  -  -  ; Sets the transparency text color for text routines
   62 D2:0254 -  -  -  -  ; Arguments:
   63 D2:0254 -  -  -  -  ;  arg0 : Color index to set transparent text to
   64 D2:0254 -  -  -  -  ; Returns:
   65 D2:0254 -  -  -  -  ;  Previous text color palette index
   66 D2:0254 E1 -  -  -  	pop	hl
   67 D2:0255 D1 -  -  -  	pop	de
   68 D2:0256 D5 -  -  -  	push	de
   69 D2:0257 E5 -  -  -  	push	hl
   70 D2:0258 21 D8 02 D2 	ld	hl,TextTransColor_SMC 
   71 D2:025C 7E -  -  -  	ld	a,(hl)
   72 D2:025D 73 -  -  -  	ld	(hl),e
   73 D2:025E C9 -  -  -  	ret
   74 D2:025F -  -  -  -  	
   75 D2:025F -  -  -  -  ;-------------------------------------------------------------------------------
   76 D2:025F -  -  -  -  _SetTextXY:
   77 D2:025F -  -  -  -  ; Sets the transparency text color for text routines
   78 D2:025F -  -  -  -  ; Arguments:
   79 D2:025F -  -  -  -  ;  arg0 : Text X Pos
   80 D2:025F -  -  -  -  ;  arg1 : Text Y Pos
   81 D2:025F -  -  -  -  ; Returns:
   82 D2:025F -  -  -  -  ;  None
   83 D2:025F 21 03 00 00 	ld	hl,3
   84 D2:0263 39 -  -  -  	add	hl,sp
   85 D2:0264 11 91 02 D2 	ld	de,TextXPos_SMC 
   86 D2:0268 ED A0 -  -  	ldi
   87 D2:026A ED A0 -  -  	ldi
   88 D2:026C 23 -  -  -  	inc	hl
   89 D2:026D 7E -  -  -  	ld	a,(hl)
   90 D2:026E 32 9F 02 D2 	ld	(TextYPos_SMC),a 
   91 D2:0272 C9 -  -  -  	ret
   92 D2:0273 -  -  -  -  _PrintChar:
   93 D2:0273 -  -  -  -  ; Places a character at the current cursor position
   94 D2:0273 -  -  -  -  ; Arguments:
   95 D2:0273 -  -  -  -  ;  arg0 : Character to draw
   96 D2:0273 -  -  -  -  ; Returns:
   97 D2:0273 -  -  -  -  ;  None
   98 D2:0273 FD 21 00 00 
              00 -  -  -  	ld	iy,0
   99 D2:0278 FD 39 -  -  	add	iy,sp
  100 D2:027A FD 7E 03 -  	ld	a,(iy+3)
  101 D2:027D -  -  -  -  _PrintChar_ASM:
  102 D2:027D DD E5 -  -  	push	ix				; save stack pointer
  103 D2:027F E5 -  -  -  	push	hl				; save hl pointer if string
  104 D2:0280 5F -  -  -  	ld	e,a				; e = char
  105 D2:0281 -  -  -  -  MonoFlag_SMC =$+1
  106 D2:0281 3E 00 -  -  	ld	a,0
  107 D2:0283 B7 -  -  -  	or	a,a
  108 D2:0284 20 0A -  -  	jr	nz,+_
  109 D2:0286 ED 62 -  -  	sbc	hl,hl
  110 D2:0288 6B -  -  -  	ld	l,e				; hl = character
  111 D2:0289 ED 4B 3F 05 
              D2 -  -  -  	ld	bc,(CharSpacing_ASM) 
  112 D2:028E 09 -  -  -  	add	hl,bc
  113 D2:028F 7E -  -  -  	ld	a,(hl)				; a = char width
  114 D2:0290 -  -  -  -  TextXPos_SMC = $+1
  115 D2:0290 01 00 00 00 _:	ld	bc,0
  116 D2:0294 ED 62 -  -  	sbc	hl,hl
  117 D2:0296 6F -  -  -  	ld	l,a
  118 D2:0297 DD 67 -  -  	ld	ixh,a				; ixh = char width
  119 D2:0299 09 -  -  -  	add	hl,bc
  120 D2:029A 22 91 02 D2 	ld	(TextXPos_SMC),hl 
  121 D2:029E -  -  -  -  TextYPos_SMC = $+1
  122 D2:029E 2E 00 -  -  	ld	l,0
  123 D2:02A0 26 A0 -  -  	ld	h,lcdWidth/2
  124 D2:02A2 ED 6C -  -  	mlt	hl
  125 D2:02A4 29 -  -  -  	add	hl,hl
  126 D2:02A5 09 -  -  -  	add	hl,bc
  127 D2:02A6 ED 4B 14 00 
              E3 -  -  -  	ld	bc,(vxFramebuffer)
  128 D2:02AB 09 -  -  -  	add	hl,bc
  129 D2:02AC EB -  -  -  	ex	de,hl				; de = draw location
  130 D2:02AD 7D -  -  -  	ld	a,l				; l = character
  131 D2:02AE ED 62 -  -  	sbc	hl,hl
  132 D2:02B0 6F -  -  -  	ld	l,a				; hl = character
  133 D2:02B1 29 -  -  -  	add	hl,hl
  134 D2:02B2 29 -  -  -  	add	hl,hl
  135 D2:02B3 29 -  -  -  	add	hl,hl
  136 D2:02B4 ED 4B 42 05 
              D2 -  -  -  	ld	bc,(TextData_ASM) 		; get text data array
  137 D2:02B9 09 -  -  -  	add	hl,bc
  138 D2:02BA FD 21 00 00 
              00 -  -  -  	ld	iy,0
  139 D2:02BF -  -  -  -  UseLargeFont_SMC =$+1
  140 D2:02BF 3E 00 -  -  	ld	a,0
  141 D2:02C1 B7 -  -  -  	or	a,a
  142 D2:02C2 20 28 -  -  	jr	nz,_PrintLargeFont_ASM
  143 D2:02C4 DD 2E 08 -  	ld	ixl,8
  144 D2:02C7 4E -  -  -  _:	ld	c,(hl)				; c = 8 pixels
  145 D2:02C8 FD 19 -  -  	add	iy,de				; get draw location
  146 D2:02CA ED 13 00 -  	lea	de,iy
  147 D2:02CD DD 44 -  -  	ld	b,ixh
  148 D2:02CF -  -  -  -  TextBGColor_SMC =$+1
  149 D2:02CF 3E 00 -  -  _:	ld	a,0
  150 D2:02D1 CB 01 -  -  	rlc	c
  151 D2:02D3 30 02 -  -  	jr	nc,+_
  152 D2:02D5 -  -  -  -  TextFGColor_SMC =$+1
  153 D2:02D5 3E FF -  -  	ld	a,255
  154 D2:02D7 -  -  -  -  TextTransColor_SMC =$+1
  155 D2:02D7 FE 00 -  -  _:	cp	a,0				; check if transparent
  156 D2:02D9 28 01 -  -  	jr	z,+_
  157 D2:02DB 12 -  -  -  	ld	(de),a
  158 D2:02DC 13 -  -  -  _:	inc	de				; move to next pixel
  159 D2:02DD 10 F0 -  -  	djnz	---_
  160 D2:02DF 11 40 01 00 	ld	de,lcdWidth
  161 D2:02E3 23 -  -  -  	inc	hl
  162 D2:02E4 DD 2D -  -  	dec	ixl
  163 D2:02E6 20 DF -  -  	jr	nz,----_
  164 D2:02E8 E1 -  -  -  	pop	hl				; restore hl and stack pointer
  165 D2:02E9 DD E1 -  -  	pop	ix
  166 D2:02EB C9 -  -  -  	ret
  167 D2:02EC -  -  -  -  	
  168 D2:02EC -  -  -  -  _PrintLargeFont_ASM:
  169 D2:02EC DD 2E 10 -  	ld	ixl,16
  170 D2:02EF 4E -  -  -  _:	ld	c,(hl)				; c = 8 pixels
  171 D2:02F0 FD 19 -  -  	add	iy,de				; get draw location
  172 D2:02F2 ED 13 00 -  	lea	de,iy
  173 D2:02F5 DD 44 -  -  	ld	b,ixh
  174 D2:02F7 3A D0 02 D2 _:	ld	a,(TextBGColor_SMC)
  175 D2:02FB CB 01 -  -  	rlc	c
  176 D2:02FD 30 04 -  -  	jr	nc,+_
  177 D2:02FF 3A D6 02 D2 	ld	a,(TextFGColor_SMC)
  178 D2:0303 DD BD -  -  _:	cp	a,ixl				; check if transparent
  179 D2:0305 28 03 -  -  	jr	z,+_
  180 D2:0307 12 -  -  -  	ld	(de),a
  181 D2:0308 13 -  -  -  	inc	de
  182 D2:0309 12 -  -  -  	ld	(de),a
  183 D2:030A 13 -  -  -  _:	inc	de				; move to next pixel
  184 D2:030B 10 EA -  -  	djnz	---_
  185 D2:030D 11 40 01 00 	ld	de,lcdWidth
  186 D2:0311 23 -  -  -  	inc	hl
  187 D2:0312 DD 2D -  -  	dec	ixl
  188 D2:0314 20 D9 -  -  	jr	nz,----_
  189 D2:0316 E1 -  -  -  	pop	hl				; restore hl and stack pointer
  190 D2:0317 DD E1 -  -  	pop	ix
  191 D2:0319 C9 -  -  -  	ret
  192 D2:031A -  -  -  -  	
  193 D2:031A -  -  -  -  ;-------------------------------------------------------------------------------
  194 D2:031A -  -  -  -  _PrintUInt:
  195 D2:031A -  -  -  -  ; Places an unsigned int at the current cursor position
  196 D2:031A -  -  -  -  ; Arguments:
  197 D2:031A -  -  -  -  ;  arg0 : Number to print
  198 D2:031A -  -  -  -  ;  arg1 : Number of characters to print
  199 D2:031A -  -  -  -  ; Returns:
  200 D2:031A -  -  -  -  ;  None
  201 D2:031A FD 21 00 00 
              00 -  -  -  	ld	iy,0
  202 D2:031F FD 39 -  -  	add	iy,sp
  203 D2:0321 FD 27 03 -  	ld	hl,(iy+3)
  204 D2:0324 FD 4E 06 -  	ld	c,(iy+6)
  205 D2:0327 -  -  -  -  _PrintUInt_ASM:
  206 D2:0327 3E 08 -  -  	ld	a,8
  207 D2:0329 91 -  -  -  	sub	a,c
  208 D2:032A D8 -  -  -  	ret	c
  209 D2:032B 4F -  -  -  	ld	c,a
  210 D2:032C 06 08 -  -  	ld	b,8
  211 D2:032E ED 4C -  -  	mlt	bc
  212 D2:0330 79 -  -  -  	ld	a,c
  213 D2:0331 32 36 03 D2 	ld	(Offset_SMC),a 
  214 D2:0335 -  -  -  -  Offset_SMC =$+1
  215 D2:0335 18 FE -  -  	jr	$
  216 D2:0337 01 80 69 67 	ld	bc,-10000000
  217 D2:033B CD 73 03 D2 	call	Num1 
  218 D2:033F 01 C0 BD F0 	ld	bc,-1000000
  219 D2:0343 CD 73 03 D2 	call	Num1 
  220 D2:0347 01 60 79 FE 	ld	bc,-100000
  221 D2:034B CD 73 03 D2 	call	Num1 
  222 D2:034F 01 F0 D8 FF 	ld	bc,-10000
  223 D2:0353 CD 73 03 D2 	call	Num1 
  224 D2:0357 01 18 FC FF 	ld	bc,-1000
  225 D2:035B CD 73 03 D2 	call 	Num1 
  226 D2:035F 01 9C FF FF 	ld	bc,-100
  227 D2:0363 CD 73 03 D2 	call	Num1 
  228 D2:0367 01 F6 FF FF 	ld	bc,-10
  229 D2:036B CD 73 03 D2 	call	Num1 
  230 D2:036F 01 FF FF FF 	ld	bc,-1
  231 D2:0373 3E 2F -  -  Num1:	ld	a,'0'-1
  232 D2:0375 3C -  -  -  Num2:	inc	a
  233 D2:0376 09 -  -  -  	add	hl,bc
  234 D2:0377 38 FC -  -  	jr	c,Num2
  235 D2:0379 ED 42 -  -  	sbc	hl,bc
  236 D2:037B C3 7D 02 D2 	jp	_PrintChar_ASM 
  237 D2:037F -  -  -  -   
  238 D2:037F -  -  -  -  ;-------------------------------------------------------------------------------
  239 D2:037F -  -  -  -  _PrintInt:
  240 D2:037F -  -  -  -  ; Places an int at the current cursor position
  241 D2:037F -  -  -  -  ; Arguments:
  242 D2:037F -  -  -  -  ;  arg0 : Number to print
  243 D2:037F -  -  -  -  ;  arg1 : Number of characters to print
  244 D2:037F -  -  -  -  ; Returns:
  245 D2:037F -  -  -  -  ;  None
  246 D2:037F FD 21 00 00 
              00 -  -  -  	ld	iy,0
  247 D2:0384 ED 03 00 -  	lea	bc,iy
  248 D2:0387 FD 39 -  -  	add	iy,sp
  249 D2:0389 FD 4E 06 -  	ld	c,(iy+6)
  250 D2:038C FD 27 03 -  	ld	hl,(iy+3)
  251 D2:038F FD CB 05 7E 	bit	7,(iy+5)
  252 D2:0393 28 0E -  -  	jr	z,+_
  253 D2:0395 C5 -  -  -  	push	bc
  254 D2:0396 E5 -  -  -  	push	hl
  255 D2:0397 C1 -  -  -  	pop	bc
  256 D2:0398 ED 62 -  -  	sbc	hl,hl
  257 D2:039A ED 42 -  -  	sbc	hl,bc
  258 D2:039C 3E 2D -  -  	ld	a,'-'
  259 D2:039E CD 7D 02 D2 	call	_PrintChar_ASM 
  260 D2:03A2 C1 -  -  -  	pop	bc
  261 D2:03A3 C3 27 03 D2 _:	jp	_PrintUInt_ASM 
  262 D2:03A7 -  -  -  -  
  263 D2:03A7 -  -  -  -  ;-------------------------------------------------------------------------------
  264 D2:03A7 -  -  -  -  _GetStringWidth:
  265 D2:03A7 -  -  -  -  ; Gets the width of a string
  266 D2:03A7 -  -  -  -  ; Arguments:
  267 D2:03A7 -  -  -  -  ;  arg0 : Pointer to string
  268 D2:03A7 -  -  -  -  ; Returns:
  269 D2:03A7 -  -  -  -  ;  Width of string in pixels
  270 D2:03A7 D1 -  -  -  	pop	de
  271 D2:03A8 E1 -  -  -  	pop	hl
  272 D2:03A9 E5 -  -  -  	push	hl
  273 D2:03AA D5 -  -  -  	push	de
  274 D2:03AB 01 00 00 00 	ld	bc,0
  275 D2:03AF 7E -  -  -  _:	ld	a,(hl)
  276 D2:03B0 B7 -  -  -  	or	a,a
  277 D2:03B1 28 09 -  -  	jr	z,+_
  278 D2:03B3 E5 -  -  -  	push	hl
  279 D2:03B4 CD CC 03 D2 	call	_GetCharWidth_ASM 
  280 D2:03B8 E1 -  -  -  	pop	hl
  281 D2:03B9 23 -  -  -  	inc	hl
  282 D2:03BA 18 F3 -  -  	jr	-_
  283 D2:03BC C5 -  -  -  _:	push	bc
  284 D2:03BD E1 -  -  -  	pop	hl
  285 D2:03BE C9 -  -  -  	ret
  286 D2:03BF -  -  -  -  
  287 D2:03BF -  -  -  -  ;-------------------------------------------------------------------------------	
  288 D2:03BF -  -  -  -  _GetCharWidth:
  289 D2:03BF -  -  -  -  ; Gets the width of a character
  290 D2:03BF -  -  -  -  ; Arguments:
  291 D2:03BF -  -  -  -  ;  arg0 : Character
  292 D2:03BF -  -  -  -  ; Returns:
  293 D2:03BF -  -  -  -  ;  Width of character in pixels
  294 D2:03BF FD 21 00 00 
              00 -  -  -  	ld	iy,0
  295 D2:03C4 ED 03 00 -  	lea	bc,iy
  296 D2:03C7 FD 39 -  -  	add	iy,sp
  297 D2:03C9 FD 7E 03 -  	ld	a,(iy+3)
  298 D2:03CC -  -  -  -  _GetCharWidth_ASM:
  299 D2:03CC B7 -  -  -  	or	a,a
  300 D2:03CD ED 62 -  -  	sbc	hl,hl
  301 D2:03CF 6F -  -  -  	ld	l,a
  302 D2:03D0 3A 82 02 D2 	ld	a,(MonoFlag_SMC) 
  303 D2:03D4 B7 -  -  -  	or	a,a
  304 D2:03D5 20 0E -  -  	jr	nz,+_
  305 D2:03D7 ED 5B 3F 05 
              D2 -  -  -  	ld	de,(CharSpacing_ASM) 
  306 D2:03DC 19 -  -  -  	add	hl,de
  307 D2:03DD 7E -  -  -  	ld	a,(hl)
  308 D2:03DE ED 62 -  -  	sbc	hl,hl
  309 D2:03E0 6F -  -  -  	ld	l,a
  310 D2:03E1 09 -  -  -  	add	hl,bc
  311 D2:03E2 E5 -  -  -  	push	hl
  312 D2:03E3 C1 -  -  -  	pop	bc
  313 D2:03E4 C9 -  -  -  	ret
  314 D2:03E5 ED 62 -  -  _:	sbc	hl,hl
  315 D2:03E7 6F -  -  -  	ld	l,a
  316 D2:03E8 09 -  -  -  	add	hl,bc
  317 D2:03E9 C9 -  -  -  	ret
  318 D2:03EA -  -  -  -  
  319 D2:03EA -  -  -  -  ;-------------------------------------------------------------------------------
  320 D2:03EA -  -  -  -  _SetCustomFontData:
  321 D2:03EA -  -  -  -  ; Sets the font to be custom
  322 D2:03EA -  -  -  -  ; Arguments:
  323 D2:03EA -  -  -  -  ;  arg0 : Pointer to font data
  324 D2:03EA -  -  -  -  ;  Set Pointer to NULL to use default font
  325 D2:03EA -  -  -  -  ; Returns:
  326 D2:03EA -  -  -  -  ;  None
  327 D2:03EA D1 -  -  -  	pop	de
  328 D2:03EB E1 -  -  -  	pop	hl
  329 D2:03EC E5 -  -  -  	push	hl
  330 D2:03ED D5 -  -  -  	push	de
  331 D2:03EE 19 -  -  -  	add	hl,de
  332 D2:03EF B7 -  -  -  	or	a,a
  333 D2:03F0 ED 52 -  -  	sbc	hl,de
  334 D2:03F2 20 04 -  -  	jr	nz,+_
  335 D2:03F4 21 E5 05 D2 	ld	hl,Char000 
  336 D2:03F8 22 42 05 D2 _:	ld	(TextData_ASM),hl 
  337 D2:03FC C9 -  -  -  	ret
  338 D2:03FD -  -  -  -  
  339 D2:03FD -  -  -  -  ;-------------------------------------------------------------------------------
  340 D2:03FD -  -  -  -  _SetCustomFontSpacing:
  341 D2:03FD -  -  -  -  ; Sets the font to be custom spacing
  342 D2:03FD -  -  -  -  ; Arguments:
  343 D2:03FD -  -  -  -  ;  arg0 : Pointer to font spacing
  344 D2:03FD -  -  -  -  ;  Set Pointer to NULL to use default font spacing
  345 D2:03FD -  -  -  -  ; Returns:
  346 D2:03FD -  -  -  -  ;  None
  347 D2:03FD D1 -  -  -  	pop	de
  348 D2:03FE E1 -  -  -  	pop	hl
  349 D2:03FF E5 -  -  -  	push	hl
  350 D2:0400 D5 -  -  -  	push	de
  351 D2:0401 19 -  -  -  	add	hl,de
  352 D2:0402 B7 -  -  -  	or	a,a
  353 D2:0403 ED 52 -  -  	sbc	hl,de
  354 D2:0405 20 04 -  -  	jr	nz,+_
  355 D2:0407 21 45 05 D2 	ld	hl,DefaultCharSpacing_ASM 
  356 D2:040B 22 3F 05 D2 _:	ld	(CharSpacing_ASM),hl 
  357 D2:040F C9 -  -  -  	ret
  358 D2:0410 -  -  -  -  
  359 D2:0410 -  -  -  -  ;-------------------------------------------------------------------------------
  360 D2:0410 -  -  -  -  _SetMonospaceFont:
  361 D2:0410 -  -  -  -  ; Sets the font to be monospace
  362 D2:0410 -  -  -  -  ; Arguments:
  363 D2:0410 -  -  -  -  ;  arg0 : Monospace spacing amount
  364 D2:0410 -  -  -  -  ; Returns:
  365 D2:0410 -  -  -  -  ;  None
  366 D2:0410 E1 -  -  -  	pop	hl
  367 D2:0411 D1 -  -  -  	pop	de
  368 D2:0412 D5 -  -  -  	push	de
  369 D2:0413 E5 -  -  -  	push	hl
  370 D2:0414 7B -  -  -  	ld	a,e
  371 D2:0415 32 82 02 D2 	ld	(MonoFlag_SMC),a 
  372 D2:0419 C9 -  -  -  	ret
  373 D2:041A -  -  -  -  
  374 D2:041A -  -  -  -  
  375 D2:041A -  -  -  -  ;-------------------------------------------------------------------------------
  376 D2:041A -  -  -  -  _Max_ASM:
  377 D2:041A -  -  -  -  ; Calculate the resut of a signed comparison
  378 D2:041A -  -  -  -  ; Inputs:
  379 D2:041A -  -  -  -  ;  DE,HL=numbers
  380 D2:041A -  -  -  -  ; Oututs:
  381 D2:041A -  -  -  -  ;  HL=max number
  382 D2:041A B7 -  -  -  	or	a,a
  383 D2:041B ED 52 -  -  	sbc	hl,de
  384 D2:041D 19 -  -  -  	add	hl,de
  385 D2:041E F2 24 04 D2 	jp	p,+_ 
  386 D2:0422 E8 -  -  -  	ret	pe
  387 D2:0423 EB -  -  -  	ex	de,hl
  388 D2:0424 E0 -  -  -  _:	ret	po
  389 D2:0425 EB -  -  -  	ex	de,hl
  390 D2:0426 C9 -  -  -  	ret
  391 D2:0427 -  -  -  -  
  392 D2:0427 -  -  -  -  ;-------------------------------------------------------------------------------
  393 D2:0427 -  -  -  -  _Min_ASM:
  394 D2:0427 -  -  -  -  ; Calculate the resut of a signed comparison
  395 D2:0427 -  -  -  -  ; Inputs:
  396 D2:0427 -  -  -  -  ;  DE,HL=numbers
  397 D2:0427 -  -  -  -  ; Oututs:
  398 D2:0427 -  -  -  -  ;  HL=min number
  399 D2:0427 B7 -  -  -  	or	a,a
  400 D2:0428 ED 52 -  -  	sbc	hl,de
  401 D2:042A EB -  -  -  	ex	de,hl
  402 D2:042B F2 31 04 D2 	jp	p,_ 
  403 D2:042F E8 -  -  -  	ret	pe
  404 D2:0430 19 -  -  -  	add	hl,de
  405 D2:0431 E0 -  -  -  _:	ret	po
  406 D2:0432 19 -  -  -  	add	hl,de
  407 D2:0433 C9 -  -  -  	ret
  408 D2:0434 -  -  -  -  
  409 D2:0434 -  -  -  -  ;-------------------------------------------------------------------------------
  410 D2:0434 -  -  -  -  _ClipRectangularRegion_ASM:
  411 D2:0434 -  -  -  -  ; Calculates the new coordinates given the clip  and inputs
  412 D2:0434 -  -  -  -  ; Inputs:
  413 D2:0434 -  -  -  -  ;  None
  414 D2:0434 -  -  -  -  ; Outputs:
  415 D2:0434 -  -  -  -  ;  Modifies data registers
  416 D2:0434 -  -  -  -  ;  Sets C flag if offscreen
  417 D2:0434 2A E5 09 D2 	ld	hl,(_xmin) 
  418 D2:0438 FD 17 03 -  	ld	de,(iy+3)
  419 D2:043B CD 1A 04 D2 	call	_Max_ASM 
  420 D2:043F FD 2F 03 -  	ld	(iy+3),hl
  421 D2:0442 2A EB 09 D2 	ld	hl,(_xmax) 
  422 D2:0446 FD 17 09 -  	ld	de,(iy+9)
  423 D2:0449 CD 27 04 D2 	call	_Min_ASM 
  424 D2:044D FD 2F 09 -  	ld	(iy+9),hl
  425 D2:0450 FD 17 03 -  	ld	de,(iy+3)
  426 D2:0453 CD 77 04 D2 	call	_SignedCompare_ASM 
  427 D2:0457 D8 -  -  -  	ret	c
  428 D2:0458 2A E8 09 D2 	ld	hl,(_ymin) 
  429 D2:045C FD 17 06 -  	ld	de,(iy+6)
  430 D2:045F CD 1A 04 D2 	call	_Max_ASM 
  431 D2:0463 FD 2F 06 -  	ld	(iy+6),hl
  432 D2:0466 2A EE 09 D2 	ld	hl,(_ymax) 
  433 D2:046A FD 17 0C -  	ld	de,(iy+12)
  434 D2:046D CD 27 04 D2 	call	_Min_ASM 
  435 D2:0471 FD 2F 0C -  	ld	(iy+12),hl
  436 D2:0474 FD 17 06 -  	ld	de,(iy+6)
  437 D2:0477 -  -  -  -  _SignedCompare_ASM:
  438 D2:0477 B7 -  -  -  	or	a,a
  439 D2:0478 ED 52 -  -  	sbc	hl,de
  440 D2:047A 29 -  -  -  	add	hl,hl
  441 D2:047B E0 -  -  -  	ret	po
  442 D2:047C 3F -  -  -  	ccf
  443 D2:047D C9 -  -  -  	ret
  444 D2:047E -  -  -  -  
  445 D2:047E -  -  -  -  ;-------------------------------------------------------------------------------
  446 D2:047E -  -  -  -  _SetFullScreenClipping_ASM:
  447 D2:047E -  -  -  -  ; Sets the clipping  to the entire screen
  448 D2:047E -  -  -  -  ; Inputs:
  449 D2:047E -  -  -  -  ;  None
  450 D2:047E -  -  -  -  ; Outputs:
  451 D2:047E -  -  -  -  ;  HL=0
  452 D2:047E 21 40 01 00 	ld	hl,lcdWidth
  453 D2:0482 22 EB 09 D2 	ld	(_xmax),hl 
  454 D2:0486 21 F0 00 00 	ld	hl,lcdHeight
  455 D2:048A 22 EE 09 D2 	ld	(_ymax),hl 
  456 D2:048E 2E 00 -  -  	ld	l,0
  457 D2:0490 22 E5 09 D2 	ld	(_xmin),hl 
  458 D2:0494 22 E8 09 D2 	ld	(_ymin),hl 
  459 D2:0498 C9 -  -  -  	ret
  460 D2:0499 -  -  -  -  
  461 D2:0499 -  -  -  -  ;-------------------------------------------------------------------------------
  462 D2:0499 -  -  -  -  __idivs_ASM:
  463 D2:0499 -  -  -  -  ; Performs signed interger division
  464 D2:0499 -  -  -  -  ; Inputs:
  465 D2:0499 -  -  -  -  ;  HL : Operand 1
  466 D2:0499 -  -  -  -  ;  BC : Operand 2
  467 D2:0499 -  -  -  -  ; Outputs:
  468 D2:0499 -  -  -  -  ;  HL = HL/BC
  469 D2:0499 EB -  -  -  	ex	de,hl
  470 D2:049A AF -  -  -  	xor	a,a
  471 D2:049B ED 62 -  -  	sbc	hl,hl
  472 D2:049D ED 42 -  -  	sbc	hl,bc
  473 D2:049F F2 A6 04 D2 	jp	p,+_ 
  474 D2:04A3 E5 -  -  -  	push	hl
  475 D2:04A4 C1 -  -  -  	pop	bc
  476 D2:04A5 3C -  -  -  	inc	a
  477 D2:04A6 -  -  -  -  
  478 D2:04A6 B7 -  -  -  _:	or	a,a
  479 D2:04A7 ED 62 -  -  	sbc	hl,hl
  480 D2:04A9 ED 52 -  -  	sbc	hl,de
  481 D2:04AB FA B1 04 D2 	jp	m,+_ 
  482 D2:04AF EB -  -  -  	ex	de,hl
  483 D2:04B0 3C -  -  -  	inc	a
  484 D2:04B1 -  -  -  -  
  485 D2:04B1 19 -  -  -  _:	add	hl,de
  486 D2:04B2 1F -  -  -  	rra
  487 D2:04B3 3E 18 -  -  	ld	a,24
  488 D2:04B5 -  -  -  -  
  489 D2:04B5 EB -  -  -  _:	ex	de,hl
  490 D2:04B6 ED 6A -  -  	adc	hl,hl
  491 D2:04B8 EB -  -  -  	ex	de,hl
  492 D2:04B9 ED 6A -  -  	adc	hl,hl
  493 D2:04BB 09 -  -  -  	add	hl,bc
  494 D2:04BC 38 02 -  -  	jr	c,+_
  495 D2:04BE ED 42 -  -  	sbc	hl,bc
  496 D2:04C0 3D -  -  -  _:	dec	a
  497 D2:04C1 20 F2 -  -  	jr	nz,--_
  498 D2:04C3 -  -  -  -  
  499 D2:04C3 EB -  -  -  	ex	de,hl
  500 D2:04C4 ED 6A -  -  	adc	hl,hl
  501 D2:04C6 D8 -  -  -  	ret	c
  502 D2:04C7 EB -  -  -  	ex	de,hl
  503 D2:04C8 ED 62 -  -  	sbc	hl,hl
  504 D2:04CA ED 52 -  -  	sbc	hl,de
  505 D2:04CC C9 -  -  -  	ret
  506 D2:04CD -  -  -  -  
  507 D2:04CD -  -  -  -  ;-------------------------------------------------------------------------------
  508 D2:04CD -  -  -  -  __imuls_ASM:
  509 D2:04CD -  -  -  -  __imulu_ASM:
  510 D2:04CD -  -  -  -  ; Performs (un)signed integer multiplication
  511 D2:04CD -  -  -  -  ; Inputs:
  512 D2:04CD -  -  -  -  ;  HL : Operand 1
  513 D2:04CD -  -  -  -  ;  BC : Operand 2
  514 D2:04CD -  -  -  -  ; Outputs:
  515 D2:04CD -  -  -  -  ;  HL = HL*BC
  516 D2:04CD C5 -  -  -  	push	bc
  517 D2:04CE E5 -  -  -  	push	hl
  518 D2:04CF EB -  -  -  	ex	de,hl
  519 D2:04D0 21 02 00 00 	ld	hl,2
  520 D2:04D4 39 -  -  -  	add	hl,sp
  521 D2:04D5 46 -  -  -  	ld	b,(hl)
  522 D2:04D6 ED 4C -  -  	mlt	bc
  523 D2:04D8 23 -  -  -  	inc	hl
  524 D2:04D9 23 -  -  -  	inc	hl
  525 D2:04DA 23 -  -  -  	inc	hl
  526 D2:04DB 7A -  -  -  	ld	a,d
  527 D2:04DC 56 -  -  -  	ld	d,(hl)
  528 D2:04DD ED 5C -  -  	mlt	de
  529 D2:04DF 2B -  -  -  	dec	hl
  530 D2:04E0 6E -  -  -  	ld	l,(hl)
  531 D2:04E1 67 -  -  -  	ld	h,a
  532 D2:04E2 ED 6C -  -  	mlt	hl
  533 D2:04E4 7D -  -  -  	ld	a,l
  534 D2:04E5 83 -  -  -  	add	a,e
  535 D2:04E6 81 -  -  -  	add	a,c
  536 D2:04E7 D1 -  -  -  	pop	de
  537 D2:04E8 C1 -  -  -  	pop	bc
  538 D2:04E9 C5 -  -  -  	push	bc
  539 D2:04EA B7 -  -  -  	or	a,a
  540 D2:04EB ED 62 -  -  	sbc	hl,hl
  541 D2:04ED 52 19 -  -  	add.s	hl,de
  542 D2:04EF EB -  -  -  	ex	de,hl
  543 D2:04F0 60 -  -  -  	ld	h,b
  544 D2:04F1 ED 6C -  -  	mlt	hl
  545 D2:04F3 42 -  -  -  	ld	b,d
  546 D2:04F4 ED 4C -  -  	mlt	bc
  547 D2:04F6 09 -  -  -  	add	hl,bc
  548 D2:04F7 84 -  -  -  	add	a,h
  549 D2:04F8 67 -  -  -  	ld	h,a
  550 D2:04F9 C1 -  -  -  	pop	bc
  551 D2:04FA 51 -  -  -  	ld	d,c
  552 D2:04FB ED 5C -  -  	mlt	de
  553 D2:04FD 29 -  -  -  	add	hl,hl
  554 D2:04FE 29 -  -  -  	add	hl,hl
  555 D2:04FF 29 -  -  -  	add	hl,hl
  556 D2:0500 29 -  -  -  	add	hl,hl
  557 D2:0501 29 -  -  -  	add	hl,hl
  558 D2:0502 29 -  -  -  	add	hl,hl
  559 D2:0503 29 -  -  -  	add	hl,hl
  560 D2:0504 29 -  -  -  	add	hl,hl
  561 D2:0505 19 -  -  -  	add	hl,de
  562 D2:0506 C9 -  -  -  	ret
  563 D2:0507 -  -  -  -  
  564 D2:0507 -  -  -  -  ;-------------------------------------------------------------------------------
  565 D2:0507 -  -  -  -  _ComputeOutcode_ASM:
  566 D2:0507 -  -  -  -  ; Compute the bitcode for a point (x, y) using the clip rectangle
  567 D2:0507 -  -  -  -  ; bounded diagonally by (xmin, ymin), and (xmax, ymax)
  568 D2:0507 -  -  -  -  ; Inputs:
  569 D2:0507 -  -  -  -  ;  HL : X Argument
  570 D2:0507 -  -  -  -  ;  DE : Y Argument
  571 D2:0507 -  -  -  -  ; Outputs:
  572 D2:0507 -  -  -  -  ;   A : Bitcode
  573 D2:0507 ED 4B E5 09 
              D2 -  -  -  	ld	bc,(_xmin) 
  574 D2:050C E5 -  -  -  	push	hl
  575 D2:050D AF -  -  -  	xor	a,a
  576 D2:050E ED 42 -  -  	sbc	hl,bc
  577 D2:0510 C1 -  -  -  	pop	bc
  578 D2:0511 29 -  -  -  	add	hl,hl
  579 D2:0512 E2 17 05 D2 	jp	po,+_ 
  580 D2:0516 3F -  -  -  	ccf
  581 D2:0517 17 -  -  -  _:	rla
  582 D2:0518 2A EB 09 D2 	ld	hl,(_xmax) 
  583 D2:051C ED 42 -  -  	sbc	hl,bc
  584 D2:051E 29 -  -  -  	add	hl,hl
  585 D2:051F E2 24 05 D2 	jp	po,+_ 
  586 D2:0523 3F -  -  -  	ccf
  587 D2:0524 17 -  -  -  _:	rla
  588 D2:0525 2A E8 09 D2 	ld	hl,(_ymin) 
  589 D2:0529 37 -  -  -  	scf
  590 D2:052A ED 52 -  -  	sbc	hl,de
  591 D2:052C 29 -  -  -  	add	hl,hl
  592 D2:052D EA 32 05 D2 	jp	pe,+_ 
  593 D2:0531 3F -  -  -  	ccf
  594 D2:0532 17 -  -  -  _:	rla
  595 D2:0533 2A EE 09 D2 	ld	hl,(_ymax) 
  596 D2:0537 ED 52 -  -  	sbc	hl,de
  597 D2:0539 29 -  -  -  	add	hl,hl
  598 D2:053A 17 -  -  -  	rla
  599 D2:053B E0 -  -  -  	ret	po
  600 D2:053C EE 01 -  -  	xor	a,1
  601 D2:053E C9 -  -  -  	ret
  602 D2:053F -  -  -  -  
  603 D2:053F -  -  -  -  ;-------------------------------------------------------------------------------
  604 D2:053F -  -  -  -  CharSpacing_ASM:
  605 D2:053F 45 05 D2 -  	.dl DefaultCharSpacing_ASM 
  606 D2:0542 -  -  -  -  TextData_ASM:
  607 D2:0542 E5 05 D2 -  	.dl DefaultTextData_ASM 
  608 D2:0545 -  -  -  -  
  609 D2:0545 -  -  -  -  DefaultCharSpacing_ASM:
  610 D2:0545 -  -  -  -  	;   0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F
  611 D2:0545 08 08 08 08 
              08 08 08 08 
              08 08 08 08 
              08 02 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,8,8,2,8,8
  612 D2:0555 08 08 08 08 
              08 08 08 08 
              08 08 08 08 
              08 08 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8
  613 D2:0565 03 04 06 08 
              08 08 08 05 
              05 05 08 07 
              04 07 03 08 	.db 3,4,6,8,8,8,8,5,5,5,8,7,4,7,3,8
  614 D2:0575 08 07 08 08 
              08 08 08 08 
              08 08 03 04 
              06 07 06 07 	.db 8,7,8,8,8,8,8,8,8,8,3,4,6,7,6,7
  615 D2:0585 08 08 08 08 
              08 08 08 08 
              08 08 08 08 
              08 08 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8
  616 D2:0595 08 08 08 08 
              08 08 08 08 
              08 08 08 05 
              08 05 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,5,8,5,8,8
  617 D2:05A5 04 08 08 08 
              08 08 08 08 
              08 05 08 08 
              05 08 08 08 	.db 4,8,8,8,8,8,8,8,8,5,8,8,5,8,8,8
  618 D2:05B5 08 08 08 08 
              07 08 08 08 
              08 08 08 07 
              03 07 08 08 	.db 8,8,8,8,7,8,8,8,8,8,8,7,3,7,8,8
  619 D2:05C5 08 08 08 08 
              08 08 08 08 
              08 08 08 08 
              08 08 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8
  620 D2:05D5 08 08 08 08 
              08 08 08 08 
              08 08 08 08 
              08 08 08 08 	.db 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8
  621 D2:05E5 -  -  -  -   
  622 D2:05E5 -  -  -  -  ;-------------------------------------------------------------------------------
  623 D2:05E5 -  -  -  -  DefaultTextData_ASM:
  624 D2:05E5 00 00 00 00 
              00 00 00 00 Char000: .db $00,$00,$00,$00,$00,$00,$00,$00	; .
  625 D2:05ED 7E 81 A5 81 
              BD BD 81 7E Char001: .db $7E,$81,$A5,$81,$BD,$BD,$81,$7E	; .
  626 D2:05F5 7E FF DB FF 
              C3 C3 FF 7E Char002: .db $7E,$FF,$DB,$FF,$C3,$C3,$FF,$7E	; .
  627 D2:05FD 6C FE FE FE 
              7C 38 10 00 Char003: .db $6C,$FE,$FE,$FE,$7C,$38,$10,$00	; .
  628 D2:0605 10 38 7C FE 
              7C 38 10 00 Char004: .db $10,$38,$7C,$FE,$7C,$38,$10,$00	; .
  629 D2:060D 38 7C 38 FE 
              FE 10 10 7C Char005: .db $38,$7C,$38,$FE,$FE,$10,$10,$7C	; .
  630 D2:0615 00 18 3C 7E 
              FF 7E 18 7E Char006: .db $00,$18,$3C,$7E,$FF,$7E,$18,$7E	; .
  631 D2:061D 00 00 18 3C 
              3C 18 00 00 Char007: .db $00,$00,$18,$3C,$3C,$18,$00,$00	; .
  632 D2:0625 FF FF E7 C3 
              C3 E7 FF FF Char008: .db $FF,$FF,$E7,$C3,$C3,$E7,$FF,$FF	; .
  633 D2:062D 00 3C 66 42 
              42 66 3C 00 Char009: .db $00,$3C,$66,$42,$42,$66,$3C,$00	; .
  634 D2:0635 FF C3 99 BD 
              BD 99 C3 FF Char010: .db $FF,$C3,$99,$BD,$BD,$99,$C3,$FF	; .
  635 D2:063D 0F 07 0F 7D 
              CC CC CC 78 Char011: .db $0F,$07,$0F,$7D,$CC,$CC,$CC,$78	; .
  636 D2:0645 3C 66 66 66 
              3C 18 7E 18 Char012: .db $3C,$66,$66,$66,$3C,$18,$7E,$18	; .
  637 D2:064D 3F 33 3F 30 
              30 70 F0 E0 Char013: .db $3F,$33,$3F,$30,$30,$70,$F0,$E0	; .
  638 D2:0655 7F 63 7F 63 
              63 67 E6 C0 Char014: .db $7F,$63,$7F,$63,$63,$67,$E6,$C0	; .
  639 D2:065D 99 5A 3C E7 
              E7 3C 5A 99 Char015: .db $99,$5A,$3C,$E7,$E7,$3C,$5A,$99	; .
  640 D2:0665 80 E0 F8 FE 
              F8 E0 80 00 Char016: .db $80,$E0,$F8,$FE,$F8,$E0,$80,$00	; .
  641 D2:066D 02 0E 3E FE 
              3E 0E 02 00 Char017: .db $02,$0E,$3E,$FE,$3E,$0E,$02,$00	; .
  642 D2:0675 18 3C 7E 18 
              18 7E 3C 18 Char018: .db $18,$3C,$7E,$18,$18,$7E,$3C,$18	; .
  643 D2:067D 66 66 66 66 
              66 00 66 00 Char019: .db $66,$66,$66,$66,$66,$00,$66,$00	; .
  644 D2:0685 7F DB DB 7B 
              1B 1B 1B 00 Char020: .db $7F,$DB,$DB,$7B,$1B,$1B,$1B,$00	; .
  645 D2:068D 3F 60 7C 66 
              66 3E 06 FC Char021: .db $3F,$60,$7C,$66,$66,$3E,$06,$FC	; .
  646 D2:0695 00 00 00 00 
              7E 7E 7E 00 Char022: .db $00,$00,$00,$00,$7E,$7E,$7E,$00	; .
  647 D2:069D 18 3C 7E 18 
              7E 3C 18 FF Char023: .db $18,$3C,$7E,$18,$7E,$3C,$18,$FF	; .
  648 D2:06A5 18 3C 7E 18 
              18 18 18 00 Char024: .db $18,$3C,$7E,$18,$18,$18,$18,$00	; .
  649 D2:06AD 18 18 18 18 
              7E 3C 18 00 Char025: .db $18,$18,$18,$18,$7E,$3C,$18,$00	; .
  650 D2:06B5 00 18 0C FE 
              0C 18 00 00 Char026: .db $00,$18,$0C,$FE,$0C,$18,$00,$00	; .
  651 D2:06BD 00 30 60 FE 
              60 30 00 00 Char027: .db $00,$30,$60,$FE,$60,$30,$00,$00	; .
  652 D2:06C5 00 00 C0 C0 
              C0 FE 00 00 Char028: .db $00,$00,$C0,$C0,$C0,$FE,$00,$00	; .
  653 D2:06CD 00 24 66 FF 
              66 24 00 00 Char029: .db $00,$24,$66,$FF,$66,$24,$00,$00	; .
  654 D2:06D5 00 18 3C 7E 
              FF FF 00 00 Char030: .db $00,$18,$3C,$7E,$FF,$FF,$00,$00	; .
  655 D2:06DD 00 FF FF 7E 
              3C 18 00 00 Char031: .db $00,$FF,$FF,$7E,$3C,$18,$00,$00	; .
  656 D2:06E5 00 00 00 00 
              00 00 00 00 Char032: .db $00,$00,$00,$00,$00,$00,$00,$00	;  
  657 D2:06ED C0 C0 C0 C0 
              C0 00 C0 00 Char033: .db $C0,$C0,$C0,$C0,$C0,$00,$C0,$00	; !
  658 D2:06F5 D8 D8 D8 00 
              00 00 00 00 Char034: .db $D8,$D8,$D8,$00,$00,$00,$00,$00	; "
  659 D2:06FD 6C 6C FE 6C 
              FE 6C 6C 00 Char035: .db $6C,$6C,$FE,$6C,$FE,$6C,$6C,$00	; #
  660 D2:0705 18 7E C0 7C 
              06 FC 18 00 Char036: .db $18,$7E,$C0,$7C,$06,$FC,$18,$00	; $
  661 D2:070D 00 C6 CC 18 
              30 66 C6 00 Char037: .db $00,$C6,$CC,$18,$30,$66,$C6,$00	; %
  662 D2:0715 38 6C 38 76 
              DC CC 76 00 Char038: .db $38,$6C,$38,$76,$DC,$CC,$76,$00	; &
  663 D2:071D 30 30 60 00 
              00 00 00 00 Char039: .db $30,$30,$60,$00,$00,$00,$00,$00	; '
  664 D2:0725 30 60 C0 C0 
              C0 60 30 00 Char040: .db $30,$60,$C0,$C0,$C0,$60,$30,$00	; (
  665 D2:072D C0 60 30 30 
              30 60 C0 00 Char041: .db $C0,$60,$30,$30,$30,$60,$C0,$00	; )
  666 D2:0735 00 66 3C FF 
              3C 66 00 00 Char042: .db $00,$66,$3C,$FF,$3C,$66,$00,$00	; *
  667 D2:073D 00 30 30 FC 
              FC 30 30 00 Char043: .db $00,$30,$30,$FC,$FC,$30,$30,$00	; +
  668 D2:0745 00 00 00 00 
              00 60 60 C0 Char044: .db $00,$00,$00,$00,$00,$60,$60,$C0	; ,
  669 D2:074D 00 00 00 FC 
              00 00 00 00 Char045: .db $00,$00,$00,$FC,$00,$00,$00,$00	; -
  670 D2:0755 00 00 00 00 
              00 C0 C0 00 Char046: .db $00,$00,$00,$00,$00,$C0,$C0,$00	; .
  671 D2:075D 06 0C 18 30 
              60 C0 80 00 Char047: .db $06,$0C,$18,$30,$60,$C0,$80,$00	; /
  672 D2:0765 7C CE DE F6 
              E6 C6 7C 00 Char048: .db $7C,$CE,$DE,$F6,$E6,$C6,$7C,$00	; 0
  673 D2:076D 30 70 30 30 
              30 30 FC 00 Char049: .db $30,$70,$30,$30,$30,$30,$FC,$00	; 1
  674 D2:0775 7C C6 06 7C 
              C0 C0 FE 00 Char050: .db $7C,$C6,$06,$7C,$C0,$C0,$FE,$00	; 2
  675 D2:077D FC 06 06 3C 
              06 06 FC 00 Char051: .db $FC,$06,$06,$3C,$06,$06,$FC,$00	; 3
  676 D2:0785 0C CC CC CC 
              FE 0C 0C 00 Char052: .db $0C,$CC,$CC,$CC,$FE,$0C,$0C,$00	; 4
  677 D2:078D FE C0 FC 06 
              06 C6 7C 00 Char053: .db $FE,$C0,$FC,$06,$06,$C6,$7C,$00	; 5
  678 D2:0795 7C C0 C0 FC 
              C6 C6 7C 00 Char054: .db $7C,$C0,$C0,$FC,$C6,$C6,$7C,$00	; 6
  679 D2:079D FE 06 06 0C 
              18 30 30 00 Char055: .db $FE,$06,$06,$0C,$18,$30,$30,$00	; 7
  680 D2:07A5 7C C6 C6 7C 
              C6 C6 7C 00 Char056: .db $7C,$C6,$C6,$7C,$C6,$C6,$7C,$00	; 8
  681 D2:07AD 7C C6 C6 7E 
              06 06 7C 00 Char057: .db $7C,$C6,$C6,$7E,$06,$06,$7C,$00	; 9
  682 D2:07B5 00 C0 C0 00 
              00 C0 C0 00 Char058: .db $00,$C0,$C0,$00,$00,$C0,$C0,$00	; :
  683 D2:07BD 00 60 60 00 
              00 60 60 C0 Char059: .db $00,$60,$60,$00,$00,$60,$60,$C0	; ;
  684 D2:07C5 18 30 60 C0 
              60 30 18 00 Char060: .db $18,$30,$60,$C0,$60,$30,$18,$00	; <
  685 D2:07CD 00 00 FC 00 
              FC 00 00 00 Char061: .db $00,$00,$FC,$00,$FC,$00,$00,$00	; =
  686 D2:07D5 C0 60 30 18 
              30 60 C0 00 Char062: .db $C0,$60,$30,$18,$30,$60,$C0,$00	; >
  687 D2:07DD 78 CC 18 30 
              30 00 30 00 Char063: .db $78,$CC,$18,$30,$30,$00,$30,$00	; ?
  688 D2:07E5 7C C6 DE DE 
              DE C0 7E 00 Char064: .db $7C,$C6,$DE,$DE,$DE,$C0,$7E,$00	; @
  689 D2:07ED 38 6C C6 C6 
              FE C6 C6 00 Char065: .db $38,$6C,$C6,$C6,$FE,$C6,$C6,$00	; A
  690 D2:07F5 FC C6 C6 FC 
              C6 C6 FC 00 Char066: .db $FC,$C6,$C6,$FC,$C6,$C6,$FC,$00	; B
  691 D2:07FD 7C C6 C0 C0 
              C0 C6 7C 00 Char067: .db $7C,$C6,$C0,$C0,$C0,$C6,$7C,$00	; C
  692 D2:0805 F8 CC C6 C6 
              C6 CC F8 00 Char068: .db $F8,$CC,$C6,$C6,$C6,$CC,$F8,$00	; D
  693 D2:080D FE C0 C0 F8 
              C0 C0 FE 00 Char069: .db $FE,$C0,$C0,$F8,$C0,$C0,$FE,$00	; E
  694 D2:0815 FE C0 C0 F8 
              C0 C0 C0 00 Char070: .db $FE,$C0,$C0,$F8,$C0,$C0,$C0,$00	; F
  695 D2:081D 7C C6 C0 C0 
              CE C6 7C 00 Char071: .db $7C,$C6,$C0,$C0,$CE,$C6,$7C,$00	; G
  696 D2:0825 C6 C6 C6 FE 
              C6 C6 C6 00 Char072: .db $C6,$C6,$C6,$FE,$C6,$C6,$C6,$00	; H
  697 D2:082D 7E 18 18 18 
              18 18 7E 00 Char073: .db $7E,$18,$18,$18,$18,$18,$7E,$00	; I
  698 D2:0835 06 06 06 06 
              06 C6 7C 00 Char074: .db $06,$06,$06,$06,$06,$C6,$7C,$00	; J
  699 D2:083D C6 CC D8 F0 
              D8 CC C6 00 Char075: .db $C6,$CC,$D8,$F0,$D8,$CC,$C6,$00	; K
  700 D2:0845 C0 C0 C0 C0 
              C0 C0 FE 00 Char076: .db $C0,$C0,$C0,$C0,$C0,$C0,$FE,$00	; L
  701 D2:084D C6 EE FE FE 
              D6 C6 C6 00 Char077: .db $C6,$EE,$FE,$FE,$D6,$C6,$C6,$00	; M
  702 D2:0855 C6 E6 F6 DE 
              CE C6 C6 00 Char078: .db $C6,$E6,$F6,$DE,$CE,$C6,$C6,$00	; N
  703 D2:085D 7C C6 C6 C6 
              C6 C6 7C 00 Char079: .db $7C,$C6,$C6,$C6,$C6,$C6,$7C,$00	; O
  704 D2:0865 FC C6 C6 FC 
              C0 C0 C0 00 Char080: .db $FC,$C6,$C6,$FC,$C0,$C0,$C0,$00	; P
  705 D2:086D 7C C6 C6 C6 
              D6 DE 7C 06 Char081: .db $7C,$C6,$C6,$C6,$D6,$DE,$7C,$06	; Q
  706 D2:0875 FC C6 C6 FC 
              D8 CC C6 00 Char082: .db $FC,$C6,$C6,$FC,$D8,$CC,$C6,$00	; R
  707 D2:087D 7C C6 C0 7C 
              06 C6 7C 00 Char083: .db $7C,$C6,$C0,$7C,$06,$C6,$7C,$00	; S
  708 D2:0885 FF 18 18 18 
              18 18 18 00 Char084: .db $FF,$18,$18,$18,$18,$18,$18,$00	; T
  709 D2:088D C6 C6 C6 C6 
              C6 C6 FE 00 Char085: .db $C6,$C6,$C6,$C6,$C6,$C6,$FE,$00	; U
  710 D2:0895 C6 C6 C6 C6 
              C6 7C 38 00 Char086: .db $C6,$C6,$C6,$C6,$C6,$7C,$38,$00	; V
  711 D2:089D C6 C6 C6 C6 
              D6 FE 6C 00 Char087: .db $C6,$C6,$C6,$C6,$D6,$FE,$6C,$00	; W
  712 D2:08A5 C6 C6 6C 38 
              6C C6 C6 00 Char088: .db $C6,$C6,$6C,$38,$6C,$C6,$C6,$00	; X
  713 D2:08AD C6 C6 C6 7C 
              18 30 E0 00 Char089: .db $C6,$C6,$C6,$7C,$18,$30,$E0,$00	; Y
  714 D2:08B5 FE 06 0C 18 
              30 60 FE 00 Char090: .db $FE,$06,$0C,$18,$30,$60,$FE,$00	; Z
  715 D2:08BD F0 C0 C0 C0 
              C0 C0 F0 00 Char091: .db $F0,$C0,$C0,$C0,$C0,$C0,$F0,$00	; [
  716 D2:08C5 C0 60 30 18 
              0C 06 02 00 Char092: .db $C0,$60,$30,$18,$0C,$06,$02,$00	; \
  717 D2:08CD F0 30 30 30 
              30 30 F0 00 Char093: .db $F0,$30,$30,$30,$30,$30,$F0,$00	; ]
  718 D2:08D5 10 38 6C C6 
              00 00 00 00 Char094: .db $10,$38,$6C,$C6,$00,$00,$00,$00	; ^
  719 D2:08DD 00 00 00 00 
              00 00 00 FF Char095: .db $00,$00,$00,$00,$00,$00,$00,$FF	; _
  720 D2:08E5 C0 C0 60 00 
              00 00 00 00 Char096: .db $C0,$C0,$60,$00,$00,$00,$00,$00	; `
  721 D2:08ED 00 00 7C 06 
              7E C6 7E 00 Char097: .db $00,$00,$7C,$06,$7E,$C6,$7E,$00	; a
  722 D2:08F5 C0 C0 C0 FC 
              C6 C6 FC 00 Char098: .db $C0,$C0,$C0,$FC,$C6,$C6,$FC,$00	; b
  723 D2:08FD 00 00 7C C6 
              C0 C6 7C 00 Char099: .db $00,$00,$7C,$C6,$C0,$C6,$7C,$00	; c
  724 D2:0905 06 06 06 7E 
              C6 C6 7E 00 Char100: .db $06,$06,$06,$7E,$C6,$C6,$7E,$00	; d
  725 D2:090D 00 00 7C C6 
              FE C0 7C 00 Char101: .db $00,$00,$7C,$C6,$FE,$C0,$7C,$00	; e
  726 D2:0915 1C 36 30 78 
              30 30 78 00 Char102: .db $1C,$36,$30,$78,$30,$30,$78,$00	; f
  727 D2:091D 00 00 7E C6 
              C6 7E 06 FC Char103: .db $00,$00,$7E,$C6,$C6,$7E,$06,$FC	; g
  728 D2:0925 C0 C0 FC C6 
              C6 C6 C6 00 Char104: .db $C0,$C0,$FC,$C6,$C6,$C6,$C6,$00	; h
  729 D2:092D 60 00 E0 60 
              60 60 F0 00 Char105: .db $60,$00,$E0,$60,$60,$60,$F0,$00	; i
  730 D2:0935 06 00 06 06 
              06 06 C6 7C Char106: .db $06,$00,$06,$06,$06,$06,$C6,$7C	; j
  731 D2:093D C0 C0 CC D8 
              F8 CC C6 00 Char107: .db $C0,$C0,$CC,$D8,$F8,$CC,$C6,$00	; k
  732 D2:0945 E0 60 60 60 
              60 60 F0 00 Char108: .db $E0,$60,$60,$60,$60,$60,$F0,$00	; l
  733 D2:094D 00 00 CC FE 
              FE D6 D6 00 Char109: .db $00,$00,$CC,$FE,$FE,$D6,$D6,$00	; m
  734 D2:0955 00 00 FC C6 
              C6 C6 C6 00 Char110: .db $00,$00,$FC,$C6,$C6,$C6,$C6,$00	; n
  735 D2:095D 00 00 7C C6 
              C6 C6 7C 00 Char111: .db $00,$00,$7C,$C6,$C6,$C6,$7C,$00	; o
  736 D2:0965 00 00 FC C6 
              C6 FC C0 C0 Char112: .db $00,$00,$FC,$C6,$C6,$FC,$C0,$C0	; p
  737 D2:096D 00 00 7E C6 
              C6 7E 06 06 Char113: .db $00,$00,$7E,$C6,$C6,$7E,$06,$06	; q
  738 D2:0975 00 00 FC C6 
              C0 C0 C0 00 Char114: .db $00,$00,$FC,$C6,$C0,$C0,$C0,$00	; r
  739 D2:097D 00 00 7E C0 
              7C 06 FC 00 Char115: .db $00,$00,$7E,$C0,$7C,$06,$FC,$00	; s
  740 D2:0985 30 30 FC 30 
              30 30 1C 00 Char116: .db $30,$30,$FC,$30,$30,$30,$1C,$00	; t
  741 D2:098D 00 00 C6 C6 
              C6 C6 7E 00 Char117: .db $00,$00,$C6,$C6,$C6,$C6,$7E,$00	; u
  742 D2:0995 00 00 C6 C6 
              C6 7C 38 00 Char118: .db $00,$00,$C6,$C6,$C6,$7C,$38,$00	; v
  743 D2:099D 00 00 C6 C6 
              D6 FE 6C 00 Char119: .db $00,$00,$C6,$C6,$D6,$FE,$6C,$00	; w
  744 D2:09A5 00 00 C6 6C 
              38 6C C6 00 Char120: .db $00,$00,$C6,$6C,$38,$6C,$C6,$00	; x
  745 D2:09AD 00 00 C6 C6 
              C6 7E 06 FC Char121: .db $00,$00,$C6,$C6,$C6,$7E,$06,$FC	; y
  746 D2:09B5 00 00 FE 0C 
              38 60 FE 00 Char122: .db $00,$00,$FE,$0C,$38,$60,$FE,$00	; z
  747 D2:09BD 1C 30 30 E0 
              30 30 1C 00 Char123: .db $1C,$30,$30,$E0,$30,$30,$1C,$00	; {
  748 D2:09C5 C0 C0 C0 00 
              C0 C0 C0 00 Char124: .db $C0,$C0,$C0,$00,$C0,$C0,$C0,$00	; |
  749 D2:09CD E0 30 30 1C 
              30 30 E0 00 Char125: .db $E0,$30,$30,$1C,$30,$30,$E0,$00	; }
  750 D2:09D5 76 DC 00 00 
              00 00 00 00 Char126: .db $76,$DC,$00,$00,$00,$00,$00,$00	; ~
  751 D2:09DD 00 10 38 6C 
              C6 C6 FE 00 Char127: .db $00,$10,$38,$6C,$C6,$C6,$FE,$00	; .
  752 D2:09E5 -  -  -  -  
  753 D2:09E5 -  -  -  -  ;-------------------------------------------------------------------------------
  754 D2:09E5 -  -  -  -  ; Inner library data
  755 D2:09E5 -  -  -  -  ;-------------------------------------------------------------------------------
  756 D2:09E5 -  -  -  -   
  757 D2:09E5 -  -  -  -  _xmin:
  758 D2:09E5 00 00 00 -  	.dl 0
  759 D2:09E8 -  -  -  -  _ymin:
  760 D2:09E8 00 00 00 -  	.dl 0
  761 D2:09EB -  -  -  -  _xmax:
  762 D2:09EB 40 01 00 -  	.dl lcdWidth
  763 D2:09EE -  -  -  -  _ymax:
  764 D2:09EE F0 00 00 -  	.dl lcdHeight
  765 D2:09F1 -  -  -  -  
  766 D2:09F1 -  -  -  -  tmpWidth:
  767 D2:09F1 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl 0,0,0
Listing for file "example1.ez80"
  182 D2:09FA -  -  -  -  
  183 D2:09FA -  -  -  -  posX:
  184 D2:09FA 00 00 -  -  	.dw	0
  185 D2:09FC -  -  -  -  posY:
  186 D2:09FC 00 00 -  -  	.dw	0
  187 D2:09FE -  -  -  -  posZ:
  188 D2:09FE 00 00 -  -  	.dw	0
  189 D2:0A00 -  -  -  -  Temp:
  190 D2:0A00 00 00 00 00 
              00 00 -  -  	.dl	0,0
  191 D2:0A06 -  -  -  -  
  192 D2:0A06 -  -  -  -  VertexName:
  193 D2:0A06 15 53 55 5A 
              41 4E 30 00 	.db	AppVarObj, "SUZAN0",0
  194 D2:0A0E -  -  -  -  Vertex:
  195 D2:0A0E 00 00 00 -  	.dl	0
  196 D2:0A11 -  -  -  -  TriangleName:
  197 D2:0A11 15 53 55 5A 
              41 4E 31 00 	.db	AppVarObj, "SUZAN1", 0
  198 D2:0A19 -  -  -  -  Triangle:
  199 D2:0A19 00 00 00 -  	.dl	0
  200 D2:0A1C -  -  -  -  
  201 D2:0A1C -  -  -  -  ScaleMatrix:
  202 D2:0A1C 4D 00 00 -  	.db	77,0,0		; 44
  203 D2:0A1F 00 66 00 -  	.db	0,102,0		; 58
  204 D2:0A22 00 00 40 -  	.db	0,0,64		; 37
  205 D2:0A25 -  -  -  -  UnitVector:
  206 D2:0A25 00 00 00 00 
              40 00 00 00 
              00 -  -  -  	.dl	0,16384,0
  207 D2:0A2E -  -  -  -  Quaternion:
  208 D2:0A2E 00 00 00 00 
              00 00 00 00 
              00 00 00 00 	.dl	0,0,0,0
  209 D2:0A3A -  -  -  -  QuatMatrix:
  210 D2:0A3A 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 -  -  	.dl	0,0,0,0,0,0
  211 D2:0A4C -  -  -  -  WorldMatrix:
  212 D2:0A4C 00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 00 00 
              00 00 -  -  	.dl	0,0,0,0,0,0
  213 D2:0A5E -  -  -  -  ModelMatrix:
  214 D2:0A5E 40 00 00 -  	.db	64,0,0
  215 D2:0A61 00 40 00 -  	.db	0,64,0
  216 D2:0A64 00 00 40 -  	.db	0,0,64
  217 D2:0A67 00 00 00 00 
              00 00 -  -  	.dw	0,0,0
  218 D2:0A6D -  -  -  -  EulerAngle:
  219 D2:0A6D 00 00 00 00 
              00 00 00 00 
              00 -  -  -  	.dl	0,0,0
